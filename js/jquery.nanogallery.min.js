/**!
 * @preserve nanoGALLERY v5.9.1
 * Plugin for jQuery by Christophe Brisbois
 * Demo: http://nanogallery.brisbois.fr
 * Sources: https://github.com/Kris-B/nanoGALLERY
 *
 * License: For personal, non-profit organizations, or open source projects (without any kind of fee), you may use nanoGALLERY for jQuery for free.
 * -------- ALL OTHER USES REQUIRE THE PURCHASE OF A PROFESSIONAL LICENSE.
 *
 *
 * Components:
 *  - jQuery (http://www.jquery.com) - version >= 1.7.1
 *  - jQuery Color plugin - is embedded
 *  - imagesloaded (https://github.com/desandro/imagesloaded) - is embebed
 *  - screenfull.js (https://github.com/sindresorhus/screenfull.js) - is embeded
 *  - shifty (https://github.com/jeremyckahn/shifty) - is embeded
 *  - webfont generated by http://fontello.com - based on Font Awesome Copyright (C) 2012 by Dave Gandy (http://fortawesome.github.com/Font-Awesome/)
 *  - javascript minifying: grunt-contrib-uglify (https://github.com/gruntjs/grunt-contrib-uglify)
 *  - css minifying: grunt-contrib-cssmin (https://github.com/gruntjs/grunt-contrib-cssmin)
 */
/*

nanoGALLERY v5.9.1 release notes.

- bugfix: issue #97 - ThumbnailL1 issue  
- bugfix: images incorrectly displayed in some cases


**Visit nanoGALLERY homepage for usage details: [http://nanogallery.brisbois.fr](http://www.nanogallery.brisbois.fr/)**

*/
/*!
 * Shifty
 * By Jeremy Kahn - jeremyckahn@gmail.com
 */
// NG BUILD:
//
// replace "Tweenable" with "NGTweenable"
// replace "define.amd" with "define.amdDISABLED"
/*! shifty - v1.5.0 - 2015-05-31 - http://jeremyckahn.github.io/shifty */
(function(){var a=this,b=function(){"use strict";function b(){}function c(a,b){var c;for(c in a)Object.hasOwnProperty.call(a,c)&&b(c)}function d(a,b){return c(b,function(c){a[c]=b[c]}),a}function e(a,b){c(b,function(c){void 0===a[c]&&(a[c]=b[c])})}function f(a,b,c,d,e,f,h){var i,j,k,m=f>a?0:(a-f)/e;for(i in b)b.hasOwnProperty(i)&&(j=h[i],k="function"==typeof j?j:l[j],b[i]=g(c[i],d[i],k,m));return b}function g(a,b,c,d){return a+(b-a)*c(d)}function h(a,b){var d=k.prototype.filter,e=a._filterArgs;c(d,function(c){void 0!==d[c][b]&&d[c][b].apply(a,e)})}function i(a,b,c,d,e,g,i,j,k,l,m){s=b+c+d,t=Math.min(m||r(),s),u=t>=s,v=d-(s-t),a.isPlaying()&&!u?(a._scheduleId=l(a._timeoutHandler,p),h(a,"beforeTween"),b+c>t?f(1,e,g,i,1,1,j):f(t,e,g,i,d,b+c,j),h(a,"afterTween"),k(e,a._attachment,v)):a.isPlaying()&&u&&(k(i,a._attachment,v),a.stop(!0))}function j(a,b){var d={},e=typeof b;return"string"===e||"function"===e?c(a,function(a){d[a]=b}):c(a,function(a){d[a]||(d[a]=b[a]||n)}),d}function k(a,b){this._currentState=a||{},this._configured=!1,this._scheduleFunction=m,void 0!==b&&this.setConfig(b)}var l,m,n="linear",o=500,p=1e3/60,q=Date.now?Date.now:function(){return+new Date},r="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:q;m="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var s,t,u,v;return k.prototype.tween=function(a){return this._isTweening?this:(void 0===a&&this._configured||this.setConfig(a),this._timestamp=r(),this._start(this.get(),this._attachment),this.resume())},k.prototype.setConfig=function(a){a=a||{},this._configured=!0,this._attachment=a.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=a.delay||0,this._start=a.start||b,this._step=a.step||b,this._finish=a.finish||b,this._duration=a.duration||o,this._currentState=d({},a.from)||this.get(),this._originalState=this.get(),this._targetState=d({},a.to)||this.get();var c=this;this._timeoutHandler=function(){i(c,c._timestamp,c._delay,c._duration,c._currentState,c._originalState,c._targetState,c._easing,c._step,c._scheduleFunction)};var f=this._currentState,g=this._targetState;return e(g,f),this._easing=j(f,a.easing||n),this._filterArgs=[f,this._originalState,g,this._easing],h(this,"tweenCreated"),this},k.prototype.get=function(){return d({},this._currentState)},k.prototype.set=function(a){this._currentState=a},k.prototype.pause=function(){return this._pausedAtTime=r(),this._isPaused=!0,this},k.prototype.resume=function(){return this._isPaused&&(this._timestamp+=r()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},k.prototype.seek=function(a){a=Math.max(a,0);var b=r();return 0===this._timestamp+a?this:(this._timestamp=b-a,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,i(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,b),this.pause()),this)},k.prototype.stop=function(c){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=b,(a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.oCancelAnimationFrame||a.msCancelAnimationFrame||a.mozCancelRequestAnimationFrame||a.clearTimeout)(this._scheduleId),c&&(h(this,"beforeTween"),f(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),h(this,"afterTween"),h(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},k.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},k.prototype.setScheduleFunction=function(a){this._scheduleFunction=a},k.prototype.dispose=function(){var a;for(a in this)this.hasOwnProperty(a)&&delete this[a]},k.prototype.filter={},k.prototype.formula={linear:function(a){return a}},l=k.prototype.formula,d(k,{now:r,each:c,tweenProps:f,tweenProp:g,applyFilter:h,shallowCopy:d,defaults:e,composeEasingObject:j}),"function"==typeof SHIFTY_DEBUG_NOW&&(a.timeoutHandler=i),"object"==typeof exports?module.exports=k:"function"==typeof define&&define.amd?define("ngTweenable",function(){return k}):void 0===a.NGTweenable&&(a.NGTweenable=k),k}();!function(){b.shallowCopy(b.prototype.formula,{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},easeInOutQuad:function(a){return 1>(a/=.5)?.5*Math.pow(a,2):-.5*((a-=2)*a-2)},easeInCubic:function(a){return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){return 1>(a/=.5)?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-1,4)-1)},easeInOutQuart:function(a){return 1>(a/=.5)?.5*Math.pow(a,4):-.5*((a-=2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,5)},easeOutQuint:function(a){return Math.pow(a-1,5)+1},easeInOutQuint:function(a){return 1>(a/=.5)?.5*Math.pow(a,5):.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){return 0===a?0:1===a?1:1>(a/=.5)?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){return 1>(a/=.5)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeOutBounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInBack:function(a){var b=1.70158;return a*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return(a-=1)*a*((b+1)*a+b)+1},easeInOutBack:function(a){var b=1.70158;return 1>(a/=.5)?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin(2*(6*a-1)*Math.PI/2)+1},swingFromTo:function(a){var b=1.70158;return 1>(a/=.5)?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},swingFrom:function(a){var b=1.70158;return a*a*((b+1)*a-b)},swingTo:function(a){var b=1.70158;return(a-=1)*a*((b+1)*a+b)+1},bounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bouncePast:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?2-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?2-(7.5625*(a-=2.25/2.75)*a+.9375):2-(7.5625*(a-=2.625/2.75)*a+.984375)},easeFromTo:function(a){return 1>(a/=.5)?.5*Math.pow(a,4):-.5*((a-=2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,.25)}})}(),function(){function a(a,b,c,d,e,f){function g(a){return((n*a+o)*a+p)*a}function h(a){return((q*a+r)*a+s)*a}function i(a){return(3*n*a+2*o)*a+p}function j(a){return 1/(200*a)}function k(a,b){return h(m(a,b))}function l(a){return a>=0?a:0-a}function m(a,b){var c,d,e,f,h,j;for(e=a,j=0;8>j;j++){if(f=g(e)-a,b>l(f))return e;if(h=i(e),1e-6>l(h))break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=g(e),b>l(f-a))return e;a>f?c=e:d=e,e=.5*(d-c)+c}return e}var n=0,o=0,p=0,q=0,r=0,s=0;return p=3*b,o=3*(d-b)-p,n=1-p-o,s=3*c,r=3*(e-c)-s,q=1-s-r,k(a,j(f))}function c(b,c,d,e){return function(f){return a(f,b,c,d,e,1)}}b.setBezierFunction=function(a,d,e,f,g){var h=c(d,e,f,g);return h.displayName=a,h.x1=d,h.y1=e,h.x2=f,h.y2=g,b.prototype.formula[a]=h},b.unsetBezierFunction=function(a){delete b.prototype.formula[a]}}(),function(){function a(a,c,d,e,f,g){return b.tweenProps(e,c,a,d,1,g,f)}var c=new b;c._filterArgs=[],b.interpolate=function(d,e,f,g,h){var i=b.shallowCopy({},d),j=h||0,k=b.composeEasingObject(d,g||"linear");c.set({});var l=c._filterArgs;l.length=0,l[0]=i,l[1]=d,l[2]=e,l[3]=k,b.applyFilter(c,"tweenCreated"),b.applyFilter(c,"beforeTween");var m=a(d,i,e,f,k,j);return b.applyFilter(c,"afterTween"),m}}(),function(a){function b(a,b){var c,d=[],e=a.length;for(c=0;e>c;c++)d.push("_"+b+"_"+c);return d}function c(a){var b=a.match(v);return b?(1===b.length||a[0].match(u))&&b.unshift(""):b=["",""],b.join(A)}function d(b){a.each(b,function(a){var c=b[a];"string"==typeof c&&c.match(z)&&(b[a]=e(c))})}function e(a){return i(z,a,f)}function f(a){var b=g(a);return"rgb("+b[0]+","+b[1]+","+b[2]+")"}function g(a){return a=a.replace(/#/,""),3===a.length&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),B[0]=h(a.substr(0,2)),B[1]=h(a.substr(2,2)),B[2]=h(a.substr(4,2)),B}function h(a){return parseInt(a,16)}function i(a,b,c){var d=b.match(a),e=b.replace(a,A);if(d)for(var f,g=d.length,h=0;g>h;h++)f=d.shift(),e=e.replace(A,c(f));return e}function j(a){return i(x,a,k)}function k(a){for(var b=a.match(w),c=b.length,d=a.match(y)[0],e=0;c>e;e++)d+=parseInt(b[e],10)+",";return d=d.slice(0,-1)+")"}function l(d){var e={};return a.each(d,function(a){var f=d[a];if("string"==typeof f){var g=r(f);e[a]={formatString:c(f),chunkNames:b(g,a)}}}),e}function m(b,c){a.each(c,function(a){for(var d=b[a],e=r(d),f=e.length,g=0;f>g;g++)b[c[a].chunkNames[g]]=+e[g];delete b[a]})}function n(b,c){a.each(c,function(a){var d=b[a],e=o(b,c[a].chunkNames),f=p(e,c[a].chunkNames);d=q(c[a].formatString,f),b[a]=j(d)})}function o(a,b){for(var c,d={},e=b.length,f=0;e>f;f++)c=b[f],d[c]=a[c],delete a[c];return d}function p(a,b){C.length=0;for(var c=b.length,d=0;c>d;d++)C.push(a[b[d]]);return C}function q(a,b){for(var c=a,d=b.length,e=0;d>e;e++)c=c.replace(A,+b[e].toFixed(4));return c}function r(a){return a.match(w)}function s(b,c){a.each(c,function(a){var d,e=c[a],f=e.chunkNames,g=f.length,h=b[a];if("string"==typeof h){var i=h.split(" "),j=i[i.length-1];for(d=0;g>d;d++)b[f[d]]=i[d]||j}else for(d=0;g>d;d++)b[f[d]]=h;delete b[a]})}function t(b,c){a.each(c,function(a){var d=c[a],e=d.chunkNames,f=e.length,g=b[e[0]],h=typeof g;if("string"===h){for(var i="",j=0;f>j;j++)i+=" "+b[e[j]],delete b[e[j]];b[a]=i.substr(1)}else b[a]=g})}var u=/(\d|\-|\.)/,v=/([^\-0-9\.]+)/g,w=/[0-9.\-]+/g,x=RegExp("rgb\\("+w.source+/,\s*/.source+w.source+/,\s*/.source+w.source+"\\)","g"),y=/^.*\(/,z=/#([0-9]|[a-f]){3,6}/gi,A="VAL",B=[],C=[];a.prototype.filter.token={tweenCreated:function(a,b,c){d(a),d(b),d(c),this._tokenData=l(a)},beforeTween:function(a,b,c,d){s(d,this._tokenData),m(a,this._tokenData),m(b,this._tokenData),m(c,this._tokenData)},afterTween:function(a,b,c,d){n(a,this._tokenData),n(b,this._tokenData),n(c,this._tokenData),t(d,this._tokenData)}}}(b)}).call(null),function(a){"function"==typeof define&&define.amd?
// AMD. Register as an anonymous module depending on jQuery.
define("jqueryNanoGallery",["jquery","ngTweenable"],a):
// No AMD. Register plugin with global jQuery object.
a(jQuery,window.NGTweenable)}(function(a,b){function c(){function c(){ob.scrollTimeOut&&clearTimeout(ob.scrollTimeOut),ob.scrollTimeOut=setTimeout(function(){return ob.containerViewerDisplayed?void 0:("loadData"==ob.O.lazyBuild&&lb(ob.$E.conTnParent,ob.O.lazyBuildTreshold)&&(ob.O.lazyBuild="none",h()),-1!=ob.delayedAlbumIdx&&lb(ob.$E.conTnParent,ob.O.lazyBuildTreshold)&&T(ob.delayedAlbumIdx,ob.delayedSetLocationHash),void ka())},100)}function d(a){ob.isShiftPressed=a.shiftKey,ob.isAltPressed=a.altKey,ob.isCtrlPressed=a.ctrlKey,ob.isMetaPressed=a.metaKey}
// exposed objects for callbacks
function e(){return{animationEngine:ob.aengine,t:"test"}}
// Message for unsupported browser
function f(){var a="Your browser version is not supported anymore. The image gallery cannot be displayed. <br><br>Please update to a more recent one. Download:<br>";a+='&nbsp;&nbsp;&nbsp; <a href="http://www.google.com/chrome/">Chrome</a><br>',a+='&nbsp;&nbsp;&nbsp; <a href="http://www.mozilla.com/firefox/">Firefox</a><br>',a+='&nbsp;&nbsp;&nbsp; <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx">Internet Explorer</a><br>',a+='&nbsp;&nbsp;&nbsp; <a href="http://www.apple.com/safari/download/">Safari</a>',hb(a,!1)}
// Original author : John Hrvatin, Lead Program Manager, Internet Explorer - http://blogs.msdn.com/b/ie/archive/2011/10/28/a-best-practice-for-programming-with-vendor-prefixes.aspx
function g(a){for(var b=document.createElement("div"),c=0;c<a.length;++c)if("undefined"!=typeof b.style[a[c]])return a[c];return null}
// #####
// Finalize initialization
// #####
function h(){var a=Math.max(window.screen.width,window.screen.height);void 0!=window.devicePixelRatio&&window.devicePixelRatio>1&&(a*=window.devicePixelRatio);for(var b=0;b<ob.tn.getHE().length;b++)switch(ob.tn.getHE()[b].name){case"imageScale150":case"imageScale150Outside":case"imageScaleIn80":case"imageSlide2Up":case"imageSlide2Down":case"imageSlide2Left":case"imageSlide2Right":case"imageSlide2UpRight":case"imageSlide2UpLeft":case"imageSlide2DownRight":case"imageSlide2DownLeft":case"imageSlide2Random":ob.tn.scale=Math.max(ob.tn.scale,1.5);break;case"scale120":ob.tn.scale=Math.max(ob.tn.scale,1.2)}switch(ob.O.itemsBaseURL.length>0&&(ob.O.itemsBaseURL+="/"),ob.O.kind){
// MARKUP / API
case"":if(P(ob.i18nTranslations.breadcrumbHome,"","","","","album","","0","-1"),void 0!==ob.O.items&&null!==ob.O.items)A(),v(!1)||S(0,!1);else{var c=jQuery(ob.$E.base).children("a");c.length>0?(C(c),v(!1)||S(0,!1)):hb("error: no image to process.")}break;
// FLICKR STORAGE
case"flickr":for(ob.O.flickrSkipOriginal||(ob.flickr.photoAvailableSizes.push(1e4),ob.flickr.photoAvailableSizesStr.push("o")),i=0;i<ob.flickr.photoAvailableSizes.length&&(ob.flickr.photoSize=i,!(a<=ob.flickr.photoAvailableSizes[i]));i++);P(ob.i18nTranslations.breadcrumbHome,"","","","","album","",ob.O.photoset.length>0?ob.O.photoset:"0","-1"),G(0,!0,-1,!1);break;
// CUSTOM STORAGE
case"json":P(ob.i18nTranslations.breadcrumbHome,"","","","","album","","0","-1"),D(0,!0,-1,!1);break;
// PICASA/GOOGLE+ STORAGE
case"picasa":default:if(ob.O.album.length>0){var e=ob.O.album.indexOf("&authkey=");if(e>=0){var f=ob.O.album.substring(0,e),g=ob.O.album.substring(e);-1==g.indexOf("Gv1sRg")&&(g="&authkey=Gv1sRg"+g.substring(9));var h=P(ob.i18nTranslations.breadcrumbHome,"","","","","album","",f,"-1");h.customData.authkey=g}else P(ob.i18nTranslations.breadcrumbHome,"","","","","album","",ob.O.album,"-1")}else P(ob.i18nTranslations.breadcrumbHome,"","","","","album","","0","-1");M(0,!0,-1,!1)}
// Keyboard management --> Image Viewer
// Keyboard management --> Album Viewer (Else section)
jQuery(document).keyup(function(a){if(d(a),ob.containerViewerDisplayed)switch(a.keyCode){case 27:// Esc key
bb(!0);break;case 32:// SPACE
case 13:// ENTER
Qa();break;case 38:// UP
case 39:// RIGHT
case 33:// PAGE UP
Va();break;case 40:// DOWN
case 37:// LEFT
case 34:// PAGE DOWN
Xa();break;case 35:// END
case 36:}else if(!ob.containerViewerDisplayed&&ob.curAlbumIdx>0&&ob.O.galleryEnableKeyboard)switch(a.keyCode){case 27:// Esc key
S(0,"false");break;case 38:// UP
case 39:// RIGHT
case 33:// PAGE UP
U();break;case 40:// DOWN
case 37:// LEFT
case 34:// PAGE DOWN
V();break;case 32:// SPACE
case 13:// ENTER
case 35:// END
case 36:}}),
// TODO:
jQuery(window).click(d),jQuery(window).mousemove(d),
// browser back-button to close the image currently displayed
ob.O.locationHash&&jQuery(window).bind("hashchange",function(){v(!0)}),
// gallery fullpage
ob.O.galleryFullpageButton&&(ob.O.RTL?ob.$E.conNavBFullpage=jQuery('<div class="nanoGalleryFullpage setFullPageButton"></div>').prependTo(ob.$E.conNavB):ob.$E.conNavBFullpage=jQuery('<div class="nanoGalleryFullpage setFullPageButton"></div>').appendTo(ob.$E.conNavB),ob.$E.conNavBFullpage.on("click",function(a){if(ob.$E.conNavBFullpage.hasClass("setFullPageButton")){
// switch to fullpage display mode
if(ob.containerViewerDisplayed)return;for(ob.O.maxWidth>0&&jQuery(ob.$E.base).css({maxWidth:""}),ob.$E.conNavBFullpage.removeClass("setFullPageButton").addClass("removeFullPageButton"),mb("",ob.$E.base),b=0;b<ob.tn.getHE().length;b++)/scale120|imageScale150Outside|overScaleOutside|imageFlipHorizontal|imageFlipVertical/i.test(ob.tn.getHE()[b].name)&&ob.$E.base.css({overflow:"auto"});ob.$E.base.addClass("fullpage"),jQuery("body").css({overflow:"hidden"}),ca()}else{
// switch off fullpage mode
if(ob.containerViewerDisplayed)return;for(ob.$E.conNavBFullpage.removeClass("removeFullPageButton").addClass("setFullPageButton"),ob.O.maxWidth>0&&jQuery(ob.$E.base).css({maxWidth:ob.O.maxWidth}),ob.$E.base.removeClass("fullpage"),b=0;b<ob.tn.getHE().length;b++)/scale120|imageScale150Outside|overScaleOutside|imageFlipHorizontal|imageFlipVertical/i.test(ob.tn.getHE()[b].name)&&ob.$E.base.css({overflow:"visible"});k(),ca()}}))}function k(){
//jQuery('body').css({overflow:'initial'});
jQuery("body").css({overflow:"visible"})}function l(a,b){jQuery(a).css({left:b})}
// ##### USER EVENTS HANDLING ON GALLERY (click, hover, swipe, drag)
// based on "Implement Custom Gestures" from Google
// https://developers.google.com/web/fundamentals/input/touch-input/touchevents/
function m(a){function b(a){if(void 0!=a&&(null!=ob.$currentTouchedThumbnail&&Ja(ob.$currentTouchedThumbnail),ob.$currentTouchedThumbnail=null,"function"!=typeof ob.O.fnThumbnailClicked||ob.O.fnThumbnailClicked(ob.I[a].$elt,ob.I[a]))){
// open URL
if(void 0!==ob.I[a].destinationURL&&ob.I[a].destinationURL.length>0)return void(window.location=ob.I[a].destinationURL);ob.openNoDelay=!1,"album"==ob.I[a].kind?ba(a,!1,-1,!0):
// Display image
Ka(a,!1)}}function c(){if(o=0,m=null,n=null,l(ob.$E.conTn[0],0),ob.containerViewerDisplayed)ob.$currentTouchedThumbnail=null,ob.openNoDelay=!1;else if(null!=ob.$currentTouchedThumbnail){if(Math.abs(r.t-jb().t)>10)
// viewport has been scrolled (touchscreen)--> open is cancelled
return Ja(ob.$currentTouchedThumbnail),ob.$currentTouchedThumbnail=null,void(ob.openNoDelay=!1);var a=ob.$currentTouchedThumbnail,c=a.data("index");if(void 0==c)return;("l1"==ob.curNavLevel&&void 0!==ob.O.touchAnimationL1?ob.O.touchAnimationL1:ob.O.touchAnimation)&&!ob.openNoDelay?
// automatically opens the touched thumbnail (to disply an image or to open an album)
ob.O.touchAutoOpenDelay>0?(ya(),Ha(a),window.clearInterval(ob.touchAutoOpenDelayTimerID),ob.touchAutoOpenDelayTimerID=window.setInterval(function(){window.clearInterval(ob.touchAutoOpenDelayTimerID),Math.abs(r.t-jb().t)>10?(
// viewport has been scrolled after hover effect delay (touchscreen)--> open is cancelled
ob.openNoDelay=!1,ob.$currentTouchedThumbnail=null,Ja(a)):b(c)},ob.O.touchAutoOpenDelay)):ob.I[c].hovered?b(c):(ya(),Ha(a)):b(c)}else ob.openNoDelay=!1}function e(){if(null==n||null==m)// touchend without touchmove
// currentXPosition=0;
// initialTouchPos=null;
return void c();var a=m.x-n.x;m.y-n.y;o-=a,ob.pgMaxLinesPerPage>0&&"auto"!=ob.tn.settings.getH()&&"auto"!=ob.tn.settings.getW()&&ob.O.paginationSwipe&&Math.abs(a)>40&&Math.abs(r.t-jb().t)<=10?(ob.$currentTouchedThumbnail=null,o=0,m=null,n=null,ya(),-40>a?na():ma()):c()}function f(a){var b={};
// Either Mouse event or Pointer Event
return a.targetTouches?(b.x=a.targetTouches[0].clientX,b.y=a.targetTouches[0].clientY):(b.x=a.clientX,b.y=a.clientY),b}function g(){if(k){if(ob.pgMaxLinesPerPage>0&&"auto"!=ob.tn.settings.getH()&&"auto"!=ob.tn.settings.getW()){var a=m.x-n.x;l(j,o-a)}k=!1}}function h(a){if(!ob.containerViewerDisplayed){var b=a.target||a.srcElement;
// if( target.getAttribute('class') == 'nanoGalleryThumbnailContainer' ) {
jQuery(b).hasClass("nanoGalleryThumbnailContainer")&&
//if( G.$currentTouchedThumbnail == null ) {
Ha(jQuery(b))}}function i(a){var b=a.target||a.srcElement;jQuery(b).hasClass("nanoGalleryThumbnailContainer")&&
// if( target.getAttribute('class') == 'nanoGalleryThumbnailContainer' ) {
Ja(jQuery(b))}var j=a,k=!1,m=null,n=null,o=0,p=!1,q=null,r=0;
// Check if MS pointer events are supported.
if(
// Handle the start of gestures -->  click event
this.handleGestureStartNoDelay=function(a){
// delay to ignore click event after touchstart event
var b=jQuery(a.target).get(0).tagName.toUpperCase();
// class customEventHandler --> disable standard event handler
if(ob.containerViewerDisplayed||"A"==b||"INPUT"==b||jQuery(a.target).hasClass("customEventHandler")){// detect click on custom element
// selection checkbox clicked
if(jQuery(a.target).hasClass("ngChekbox")){var c=jQuery(a.target).parent().data("index");void 0!=c&&va(ob.I[c],void 0,!1)}
//e.eventDefault();
return a.stopPropagation(),!1}d(a),
// if items are selectable, cannot limit on user speed
(new Date).getTime()-ob.timeLastTouchStart<400&&ob.O.itemsSelectable!==!0||(ob.openNoDelay=!0,this.handleGestureStart(a))}.bind(this),
// Handle the start of gestures
this.handleGestureStart=function(a){var b=jQuery(a.target).get(0).tagName.toUpperCase();
// class customEventHandler --> disable standard event handler
if(ob.containerViewerDisplayed||"A"==b||"INPUT"==b||jQuery(a.target).hasClass("customEventHandler"))
//e.eventDefault();
// detect click on custom element
return a.stopPropagation(),!1;if(!((new Date).getTime()-ob.timeImgChanged<400&&ob.O.itemsSelectable!==!0||(new Date).getTime()-ob.timeLastTouchStart<400&&ob.O.itemsSelectable!==!0)){ob.timeLastTouchStart=(new Date).getTime();for(var c=a.target||a.srcElement,d=!1;c!=ob.$E.conTn[0];)// go element parent up to find the thumbnail element
// if( target.getAttribute('class') == 'nanoGalleryThumbnailContainer' ) {
jQuery(c).hasClass("nanoGalleryThumbnailContainer")&&(null==ob.$currentTouchedThumbnail||ob.$currentTouchedThumbnail.is(jQuery(c))||ya(),ob.$currentTouchedThumbnail=jQuery(c),d=!0),c=c.parentNode;if(d){
// handle thumbnail selection
if(ob.O.itemsSelectable===!0){if(ob.isShiftPressed||ob.isCtrlPressed||ob.isMetaPressed||"input"===a.target.nodeName.toLowerCase())return va(ob.I[ob.$currentTouchedThumbnail.data("index")]),!1;if(ob.selectMode===!0)return va(ob.I[ob.$currentTouchedThumbnail.data("index")]),!1;if(ob.I[ob.$currentTouchedThumbnail.data("index")].kind===ob.selectMode)return va(ob.I[ob.$currentTouchedThumbnail.data("index")]),!1;var e=ob.$currentTouchedThumbnail.data("index");ob.touchSelectTO=setTimeout(function(){va(ob.I[e])},500)}r=jb(),
//if(e.touches && e.touches.length > 1) { return; }
m=f(a),initialOffsetTop=jb().t,
//if( G.gallerySwipeInitDone ) { return; }
// Add the move and end listeners
window.navigator.msPointerEnabled?(
// Pointer events are supported.
document.addEventListener("MSPointerMove",this.handleGestureMove,!0),document.addEventListener("MSPointerUp",this.handleGestureEnd,!0)):(
// Add Touch Listeners
document.addEventListener("touchmove",this.handleGestureMove,!0),document.addEventListener("touchend",this.handleGestureEnd,!0),document.addEventListener("touchcancel",this.handleGestureEnd,!0),
// Add Mouse Listeners
document.addEventListener("mousemove",this.handleGestureMove,!0),document.addEventListener("mouseup",this.handleGestureEnd,!0)),
// makes content unselectable --> avoid image drag during 'mouse swipe'
ob.$E.base.addClass("unselectable").find("*").attr("draggable","false").attr("unselectable","on"),ob.gallerySwipeInitDone=!0}}}.bind(this),
// Handle move gestures
this.handleGestureMove=function(a){n=f(a),k||ob.O.paginationSwipe&&ob.pgMaxLinesPerPage>0&&"auto"!=ob.tn.settings.getH()&&"auto"!=ob.tn.settings.getW()&&(Math.abs(m.x-n.x)>15||p)&&(a.preventDefault(),p=!0,k=!0,window.requestAnimationFrame(g))}.bind(this),
// Handle end gestures
this.handleGestureEnd=function(a){if(a.cancelable&&a.preventDefault(),a.stopPropagation(),k=!1,p=!1,window.navigator.msPointerEnabled?(document.removeEventListener("MSPointerMove",this.handleGestureMove,!0),document.removeEventListener("MSPointerUp",this.handleGestureEnd,!0)):(document.removeEventListener("touchmove",this.handleGestureMove,!0),document.removeEventListener("touchend",this.handleGestureEnd,!0),document.removeEventListener("touchcancel",this.handleGestureEnd,!0),document.removeEventListener("mousemove",this.handleGestureMove,!0),document.removeEventListener("mouseup",this.handleGestureEnd,!0)),ob.O.itemsSelectable===!0){if((new Date).getTime()-ob.timeLastTouchStart>500)return!1;clearTimeout(ob.touchSelectTO)}
// allow text + image selection again
ob.$E.base.addClass("unselectable").find("*").attr("draggable","true").attr("unselectable","off"),e(),m=null,n=null,o=0,p=!1,q=null}.bind(this),window.navigator.msPointerEnabled)
// Add Pointer Event Listener
j.addEventListener("MSPointerDown",this.handleGestureStartNoDelay,!0);else
// Add Mouse Listener
if(
// Add Touch Listener
j.addEventListener("touchstart",this.handleGestureStart,!0),!ob.isIOS){var s=this;j.addEventListener("mousedown",function(a){
// filter : if the user uses the right click,
// do not do anything
2!=a.button&&s.handleGestureStartNoDelay(a)},!0)}
// MOUSE OVER
j.addEventListener("mouseenter",h,!0),j.addEventListener("mouseleave",i,!0)}
// ##### CHECK PLUGIN PARAMETERS CONSISTENCY
function o(){"fancybox"==ob.O.viewer&&"undefined"==typeof jQuery.fancybox&&(ob.O.viewer="internal",ib("Fancybox could not be found. Fallback to internal viewer. Please check the files included in the HTML page.")),("CBRISBOIS@GMAIL.COM"==ob.O.userID.toUpperCase()||"111186676244625461692"==ob.O.userID)&&(""==ob.O.blackList||"SCRAPBOOK|PROFIL"==ob.O.blackList.toUpperCase())&&(ob.O.blackList="profil|scrapbook|forhomepage"),""!=ob.O.blackList&&(ob.blackList=ob.O.blackList.toUpperCase().split("|")),""!=ob.O.whiteList&&(ob.whiteList=ob.O.whiteList.toUpperCase().split("|")),""!=ob.O.albumList&&(ob.albumList=ob.O.albumList.toUpperCase().split("|")),("picasa"==ob.O.kind||"flickr"==ob.O.kind)&&(ob.O.displayBreadcrumb=!0),
// flickr
void 0!==ob.O.photoset?ob.O.photoset.length>0&&(ob.O.displayBreadcrumb=!1):ob.O.photoset="",
// picasa
void 0!==ob.O.album?ob.O.album.length>0&&(ob.O.displayBreadcrumb=!1):ob.O.album="",ob.O.maxWidth>0&&(jQuery(ob.$E.base).css({maxWidth:ob.O.maxWidth}),jQuery(ob.$E.base).css({"margin-left":"auto"}),jQuery(ob.$E.base).css({"margin-right":"auto"})),"number"==qb(ob.O.slideshowDelay)&&ob.O.slideshowDelay>=2e3?ob.slideshowDelay=ob.O.slideshowDelay:ib('Parameter "slideshowDelay" must be an integer >= 2000 ms.'),"number"==qb(ob.O.thumbnailDisplayInterval)&&ob.O.thumbnailDisplayInterval>=0?ob.tn.displayInterval=ob.O.thumbnailDisplayInterval:ib('Parameter "thumbnailDisplayInterval" must be an integer.'),"number"==qb(ob.O.thumbnailLazyLoadTreshold)&&ob.O.thumbnailLazyLoadTreshold>=0?ob.tn.lazyLoadTreshold=ob.O.thumbnailLazyLoadTreshold:ib('Parameter "thumbnailLazyLoadTreshold" must be an integer.'),"number"==qb(ob.O.paginationMaxLinesPerPage)&&ob.O.paginationMaxLinesPerPage>=0?ob.pgMaxLinesPerPage=ob.O.paginationMaxLinesPerPage:ib('Parameter "paginationMaxLinesPerPage" must be an integer.'),
// resolution breakpoints --> convert old syntax to new one
void 0!==ob.O.thumbnailSizeSM&&(ob.O.breakpointSizeSM=ob.O.thumbnailSizeSM),void 0!==ob.O.thumbnailSizeME&&(ob.O.breakpointSizeME=ob.O.thumbnailSizeME),void 0!==ob.O.thumbnailSizeLA&&(ob.O.breakpointSizeLA=ob.O.thumbnailSizeLA),void 0!==ob.O.thumbnailSizeXL&&(ob.O.breakpointSizeXL=ob.O.thumbnailSizeXL);/*
      if( G.tn.settings.getH() == 'auto' || G.tn.settings.getW() == 'auto' ) {
        if( G.O.paginationMaxLinesPerPage >0 ) {
          nanoConsoleLog('Parameters "paginationMaxLinesPerPage" and "thumbnailWidth/thumbnailHeight" value "auto" are not compatible.');
        }
        G.pgMaxLinesPerPage=0;

      }
      */
// random sorting
var a=ob.O.albumSorting.toUpperCase();0==a.indexOf("RANDOM")&&a.length>6&&(n=parseInt(a.substring(6)),n>0&&(ob.maxAlbums=n),ob.O.albumSorting="random");var b=ob.O.photoSorting.toUpperCase();0==b.indexOf("RANDOM")&&b.length>6&&(n=parseInt(b.substring(6)),n>0&&(ob.maxPhotos=n),ob.O.photoSorting="random");var c=parseInt(ob.O.albumMax);c>0&&(ob.maxAlbums=n);
// thumbnails hover effects - Level1
var d=ob.O.thumbnailL1HoverEffect;if(void 0!==d)switch(qb(d)){case"string":for(var e=d.split(","),f=0;f<e.length;f++)if("none"!=e[f]&&t(e[f])){var g=s();g.name=e[f],ob.tnL1HE.push(g)}break;case"object":if("none"!=d.name&&t(d.name)){var g=s();ob.tnL1HE.push(jQuery.extend(g,d))}break;case"array":for(var f=0;f<d.length;f++)if("none"!=d[f].name&&t(d[f].name)){var g=s();ob.tnL1HE.push(jQuery.extend(g,d[f]))}break;case"null":break;default:hb('incorrect parameter for "thumbnailL1HoverEffect".')}
// thumbnails hover effects - other levels
var h=ob.O.thumbnailHoverEffect;switch(qb(h)){case"string":for(var e=h.split(","),f=0;f<e.length;f++)if("none"!=e[f]&&t(e[f])){var g=s();g.name=e[f],ob.tnHE.push(g)}break;case"object":if("none"!=h.name&&t(h.name)){var g=s();ob.tnHE.push(jQuery.extend(g,h))}break;case"array":for(var f=0;f<h.length;f++)if("none"!=h[f].name&&t(h[f].name)){var g=s();ob.tnHE.push(jQuery.extend(g,h[f]))}break;case"null":break;default:hb('incorrect parameter for "thumbnailHoverEffect".')}
// RETRIEVE ALL THUMBNAIL SIZES
if(0==ob.tnHE.length&&(0==ob.tnL1HE.length&&(ob.O.touchAnimationL1=!1),ob.O.touchAnimation=!1),
// management of screen width
ob.curWidth=q(),"number"==qb(ob.O.thumbnailWidth))p("width","l1",ob.O.thumbnailWidth,"u"),p("width","lN",ob.O.thumbnailWidth,"u");else{var i=ob.O.thumbnailWidth.split(" "),j="auto";"auto"!=i[0].substring(0,4)&&(j=parseInt(i[0]));var k="u";"C"==i[0].charAt(i[0].length-1)&&(k="c"),p("width","l1",j,k),// default value for all resolutions and navigation levels
p("width","lN",j,k);for(var f=1;f<i.length;f++){var l=i[f].substring(0,2).toLowerCase();if(/xs|sm|me|la|xl/i.test(l)){var m=i[f].substring(2),j="auto";"auto"!=m.substring(0,4)&&(j=parseInt(m));var k="u";"C"==m.charAt(m.length-1)&&(k="c"),ob.tn.settings.width.l1[l]=j,ob.tn.settings.width.lN[l]=j,ob.tn.settings.width.l1[l+"c"]=k,ob.tn.settings.width.lN[l+"c"]=k}}}if(void 0!=ob.O.thumbnailL1Width)if("number"==qb(ob.O.thumbnailL1Width))p("width","l1",ob.O.thumbnailL1Width,"u");else{var i=ob.O.thumbnailL1Width.split(" "),j="auto";"auto"!=i[0].substring(0,4)&&(j=parseInt(i[0]));var k="u";"C"==i[0].charAt(i[0].length-1)&&(k="c"),p("width","l1",j,k);for(var f=1;f<i.length;f++){var l=i[f].substring(0,2).toLowerCase();if(/xs|sm|me|la|xl/i.test(l)){var m=i[f].substring(2),j="auto";"auto"!=m.substring(0,4)&&(j=parseInt(m));var k="u";"C"==m.charAt(m.length-1)&&(k="c"),ob.tn.settings.width.l1[l]=j,ob.tn.settings.width.l1[l+"c"]=k}}}if("number"==qb(ob.O.thumbnailHeight))p("height","l1",ob.O.thumbnailHeight,"u"),p("height","lN",ob.O.thumbnailHeight,"u");else{var i=ob.O.thumbnailHeight.split(" "),j="auto";"auto"!=i[0].substring(0,4)&&(j=parseInt(i[0]));var k="u";"C"==i[0].charAt(i[0].length-1)&&(k="c"),p("height","l1",j,k),// default value for all resolutions and navigation levels
p("height","lN",j,k);for(var f=1;f<i.length;f++){var l=i[f].substring(0,2).toLowerCase();if(/xs|sm|me|la|xl/i.test(l)){var m=i[f].substring(2),j="auto";"auto"!=m.substring(0,4)&&(j=parseInt(m));var k="u";"C"==m.charAt(m.length-1)&&(k="c"),ob.tn.settings.height.l1[l]=j,ob.tn.settings.height.lN[l]=j,ob.tn.settings.height.l1[l+"c"]=k,ob.tn.settings.height.lN[l+"c"]=k}}}if(void 0!=ob.O.thumbnailL1Height)if("number"==qb(ob.O.thumbnailL1Height))p("height","l1",ob.O.thumbnailL1Height,"u");else{var i=ob.O.thumbnailL1Height.split(" "),j="auto";"auto"!=i[0].substring(0,4)&&(j=parseInt(i[0]));var k="u";"C"==i[0].charAt(i[0].length-1)&&(k="c"),p("height","l1",j,k);for(var f=1;f<i.length;f++){var l=i[f].substring(0,2).toLowerCase();if(/xs|sm|me|la|xl/i.test(l)){var m=i[f].substring(2),j="auto";"auto"!=m.substring(0,4)&&(j=parseInt(m));var k="u";"C"==m.charAt(m.length-1)&&(k="c"),ob.tn.settings.height.l1[l]=j,ob.tn.settings.height.l1[l+"c"]=k}}}}
// ##### THUMBNAIL SIZE MANAGEMENT
function p(a,b,c,d){ob.tn.settings[a][b].xs=c,ob.tn.settings[a][b].sm=c,ob.tn.settings[a][b].me=c,ob.tn.settings[a][b].la=c,ob.tn.settings[a][b].xl=c,ob.tn.settings[a][b].xsc=d,ob.tn.settings[a][b].smc=d,ob.tn.settings[a][b].mec=d,ob.tn.settings[a][b].lac=d,ob.tn.settings[a][b].xlc=d}function q(){var a=jb().w;return ob.O.breakpointSizeSM>0&&a<ob.O.breakpointSizeSM?"xs":ob.O.breakpointSizeME>0&&a<ob.O.breakpointSizeME?"sm":ob.O.breakpointSizeLA>0&&a<ob.O.breakpointSizeLA?"me":ob.O.breakpointSizeXL>0&&a<ob.O.breakpointSizeXL?"la":"xl"}function r(){var a=Math.max(jb().w,jb().h);return ob.O.breakpointSizeSM>0&&a<ob.O.breakpointSizeSM?"xs":ob.O.breakpointSizeME>0&&a<ob.O.breakpointSizeME?"sm":ob.O.breakpointSizeLA>0&&a<ob.O.breakpointSizeLA?"me":ob.O.breakpointSizeXL>0&&a<ob.O.breakpointSizeXL?"la":"xl"}
// HOVER EFFECTS
function s(){
// easing : jQuery supports only 'swing' and 'linear'
var a={delay:0,delayBack:0,duration:400,durationBack:200,easing:"swing",easingBack:"swing",animParam:null};return"animate"!=ob.aengine&&(a.easing="ease",a.easingBack="ease"),a}
// check if effect is compatible with the used animation engine
// check also consistency of thumbnail configuration with hover effect
function t(a){
// var isBasic = /labelOpacity50|borderLighter|borderDarker/i.test(effect),
var b=/labelOpacity50|borderLighter|borderDarker/i.test(a),
// isStd = /imageFlipVertical|imageFlipHorizontal|imageRotateCornerBR|imageRotateCornerBL|rotateCornerBL|rotateCornerBR|imageScale150|overScale|overScaleOutside|imageScaleIn80|imageScale150Outside|scale120|scaleLabelOverImage|slideUp|slideDown|slideLeft|slideRight|imageSlideUp|imageSlideDown|imageSlideLeft|imageSlideRight|labelAppear|labelAppear75|descriptionAppear|labelSlideDown|labelSlideUp|labelSlideUpTop|imageInvisible|imageOpacity50|descriptionSlideUp|labelSplitVert|labelSplit4|labelAppearSplitVert|labelAppearSplit4|imageSplitVert|imageSplit4|imageSlide2Up|imageSlide2Down|imageSlide2Left|imageSlide2Right|imageSlide2Random|imageSlide2UpRight|imageSlide2UpLeft|imageSlide2DownRight|imageSlide2DownLeft/i.test(effect),
c=/imageFlipVertical|imageFlipHorizontal|imageRotateCornerBR|imageRotateCornerBL|rotateCornerBL|rotateCornerBR|imageScale150|overScale|overScaleOutside|imageScaleIn80|imageScale150Outside|scale120|scaleLabelOverImage|slideUp|slideDown|slideLeft|slideRight|imageSlideUp|imageSlideDown|imageSlideLeft|imageSlideRight|labelAppear|labelAppear75|descriptionAppear|labelSlideDown|labelSlideUp|labelSlideUpTop|imageInvisible|imageOpacity50|descriptionSlideUp|labelSplitVert|labelSplit4|labelAppearSplitVert|labelAppearSplit4|imageSplitVert|imageSplit4/i.test(a),
// isAdv = /imageScaleIn80|imageScale150|imageScale150Outside|scale120|overScale|overScaleOutside|scaleLabelOverImage|imageFlipHorizontal|imageFlipVertical|rotateCornerBR|rotateCornerBL|imageRotateCornerBR|imageRotateCornerBL|imageExplode/i.test(effect);
d=/imageExplode/i.test(a);return ob.O.touchAutoOpenDelay=parseInt(ob.O.touchAutoOpenDelay),0==ob.O.touchAutoOpenDelay&&(ob.O.touchAutoOpenDelay=1e3),b||c||d?"onBottom"!=ob.O.thumbnailLabel.get("position")||/borderLighter|borderDarker|imageOpacity50|imageScale150|imageScaleIn80|imageSlide2Up|imageSlide2Down|imageSlide2Left|imageSlide2Right|imageSlide2Random|imageSlide2UpRight|imageSlide2UpLeft|imageSlide2DownRight|imageSlide2DownLeft|imageScale150Outside|scale120/i.test(a)?!d||"animate"!=ob.aengine&&null!=ob.CSStransformName?!0:(ib('Parameter thumbnailHoverEffect="'+a+'" requires one of the additionals jQuery plugins "Velocity" or "Transit".'),!1):(hb('The parameter combination thumbnailHoverEffect="'+a+'" and thumbnailLabel.position="onBottom" is not supported.'),!1):(hb('Unknow parameter value: thumbnailHoverEffect="'+a+'".'),!1)}
// I18N : define text translations
function u(){
// browser language
ob.i18nLang=(navigator.language||navigator.userLanguage).toUpperCase(),"UNDEFINED"===ob.i18nLang&&(ob.i18nLang="");var a=-("_"+ob.i18nLang).length;if("object"==qb(ob.O.i18n))for(var b in ob.O.i18n){
//var value = G.O.i18n[key];
var c=b.substr(a);c=="_"+ob.i18nLang?ob.i18nTranslations[b.substr(0,b.length-c.length)]=ob.O.i18n[b]:ob.i18nTranslations[b]=ob.O.i18n[b]}}
// Location Hash
function v(a){
// special use case -> openOnStart can be processed like location hash, only once (on start)
if(""!=ob.O.openOnStart){var b=ob.O.openOnStart;return ob.O.openOnStart="",w(!1,b,!0)}
// standard use case -> location hash processing
if(!ob.O.locationHash)return!1;var c="#nanogallery/"+ob.baseEltID+"/",d=location.hash;if(d!=ob.lastLocationHash){if(""==d&&-1!=ob.lastOpenAlbumID)
// back button and no hash --> display first album
return ob.lastLocationHash="",ba(0,!1,-1,!1),!0;if(0==d.indexOf(c)){var b=d.substring(c.length);return w(a,b,!a)}}}function w(a,b,c){var d=null,e=null,f=b.indexOf("/"),g=-1,h=-1,i=ob.I.length;if(f>0){d=b.substring(0,f),e=b.substring(f+1);for(var j=0;i>j;j++)if("image"==ob.I[j].kind&&ob.I[j].GetID()==e){h=j;break}}else d=b;for(var j=0;i>j;j++)if("album"==ob.I[j].kind&&ob.I[j].GetID()==d){g=j;break}
// process IMAGE
// if( !isTriggeredByEvent ) {
// first load the album
// activate fullscreen before ajax call, because it can be done only on user interaction
// album is already loaded
// process ALBUM
return null!==e?(c&&(ob.albumIdxToOpenOnViewerClose=g),""==ob.O.kind?Ka(h):-1==h?(ob.O.viewerFullscreen&&ngscreenfull.request(),ba(g,!1,e,a)):Ka(h),!0):(ba(g,!1,-1,a),!0)}
// build a dummy thumbnail to get different sizes and to cache them
function x(){ob.I=[],
// var desc='';
// if( G.O.thumbnailLabel.displayDescription ) { desc='d'; }
// var item=NGAddItem('dummydummydummy', G.emptyGif, G.emptyGif, desc, '', 'image', '', '1', '0' ),
// $newDiv=thumbnailBuild(item, 0, false).e$;
// G.tn.borderWidth=$newDiv.outerWidth(true)-$newDiv.width();
// G.tn.borderHeight=$newDiv.outerHeight(true)-$newDiv.height();
// G.tn.imgcBorderWidth=$newDiv.find('.imgContainer').outerWidth(true)-$newDiv.find('.imgContainer').width();
// G.tn.imgcBorderHeight=$newDiv.find('.imgContainer').outerHeight(true)-$newDiv.find('.imgContainer').height();
// G.tn.labelBorderHeight=$newDiv.find('.labelImage').outerHeight(true)-$newDiv.find('.labelImage').height();
// G.tn.labelBorderWidth=$newDiv.find('.labelImage').outerWidth(true)-$newDiv.find('.labelImage').width();
// if( G.O.thumbnailLabel.position == 'onBottom' ) {
// G.tn.labelHeight=$newDiv.find('.labelImage').outerHeight(true);
// }
// var lst=['xs','sm','me','la','xl'];
// for( var i=0; i< lst.length; i++ ) {
// var w=G.tn.settings.width['l1'][lst[i]];
// if( w != 'auto' ) {
// G.tn.outerWidth['l1'][lst[i]]=w+G.tn.borderWidth+G.tn.imgcBorderWidth;
// }
// else {
// G.tn.outerWidth['l1'][lst[i]]=0;
// }
// w=G.tn.settings.width['lN'][lst[i]];
// if( w != 'auto' ) {
// G.tn.outerWidth['lN'][lst[i]]=w+G.tn.borderWidth+G.tn.imgcBorderWidth;
// }
// else {
// G.tn.outerWidth['lN'][lst[i]]=0;
// }
// }
// for( var i=0; i< lst.length; i++ ) {
// var h=G.tn.settings.height['l1'][lst[i]];
// if( h != 'auto' ) {
// G.tn.outerHeight['l1'][lst[i]]=h+G.tn.borderHeight+G.tn.imgcBorderHeight+G.tn.labelHeight;
// }
// else {
// G.tn.outerHeight['l1'][lst[i]]=0;
// }
// h=G.tn.settings.height['lN'][lst[i]];
// if( h != 'auto' ) {
// G.tn.outerHeight['lN'][lst[i]]=h+G.tn.borderHeight+G.tn.imgcBorderHeight+G.tn.labelHeight;
// }
// else {
// G.tn.outerHeight['lN'][lst[i]]=0;
// }
// }
// Retrieve LN
ob.curNavLevel="lN";var a="";ob.O.thumbnailLabel.get("displayDescription")&&(a="d");var b=P("dummydummydummy",ob.emptyGif,ob.emptyGif,a,"","image","","1","0"),c=sa(b,0,!1).e$;ob.tn.borderWidth=c.outerWidth(!0)-c.width(),ob.tn.borderHeight=c.outerHeight(!0)-c.height(),ob.tn.imgcBorderWidth=c.find(".imgContainer").outerWidth(!0)-c.find(".imgContainer").width(),ob.tn.imgcBorderHeight=c.find(".imgContainer").outerHeight(!0)-c.find(".imgContainer").height(),ob.tn.labelBorderHeight=c.find(".labelImage").outerHeight(!0)-c.find(".labelImage").height(),ob.tn.labelBorderWidth=c.find(".labelImage").outerWidth(!0)-c.find(".labelImage").width(),"onBottom"==ob.O.thumbnailLabel.get("position")&&(ob.tn.labelHeight.lN=c.find(".labelImage").outerHeight(!0),ob.tn.labelHeight.l1=ob.tn.labelHeight.lN);for(var d=["xs","sm","me","la","xl"],e=0;e<d.length;e++)f=ob.tn.settings.width.lN[d[e]],"auto"!=f?(ob.tn.outerWidth.lN[d[e]]=f+ob.tn.borderWidth+ob.tn.imgcBorderWidth,ob.tn.outerWidth.l1[d[e]]=f+ob.tn.borderWidth+ob.tn.imgcBorderWidth):(ob.tn.outerWidth.lN[d[e]]=0,ob.tn.outerWidth.l1[d[e]]=0);for(var e=0;e<d.length;e++)g=ob.tn.settings.height.lN[d[e]],"auto"!=g?(ob.tn.outerHeight.lN[d[e]]=g+ob.tn.borderHeight+ob.tn.imgcBorderHeight+ob.tn.labelHeight.get(),ob.tn.outerHeight.l1[d[e]]=g+ob.tn.borderHeight+ob.tn.imgcBorderHeight+ob.tn.labelHeight.get()):(ob.tn.outerHeight.lN[d[e]]=0,ob.tn.outerHeight.l1[d[e]]=0);
// Retrieve L1
ob.I=[],ob.curNavLevel="l1",a="",ob.O.thumbnailLabel.get("displayDescription")&&(a="d"),b=P("dummydummydummy",ob.emptyGif,ob.emptyGif,a,"","image","","1","0"),c=sa(b,0,!1).e$,ob.tn.borderWidth=c.outerWidth(!0)-c.width(),ob.tn.borderHeight=c.outerHeight(!0)-c.height(),ob.tn.imgcBorderWidth=c.find(".imgContainer").outerWidth(!0)-c.find(".imgContainer").width(),ob.tn.imgcBorderHeight=c.find(".imgContainer").outerHeight(!0)-c.find(".imgContainer").height(),ob.tn.labelBorderHeight=c.find(".labelImage").outerHeight(!0)-c.find(".labelImage").height(),ob.tn.labelBorderWidth=c.find(".labelImage").outerWidth(!0)-c.find(".labelImage").width(),"onBottom"==ob.O.thumbnailLabel.get("position")&&(ob.tn.labelHeight.l1=c.find(".labelImage").outerHeight(!0));for(var d=["xs","sm","me","la","xl"],e=0;e<d.length;e++){var f=ob.tn.settings.width.l1[d[e]];"auto"!=f?ob.tn.outerWidth.l1[d[e]]=f+ob.tn.borderWidth+ob.tn.imgcBorderWidth:ob.tn.outerWidth.l1[d[e]]=0}for(var e=0;e<d.length;e++){var g=ob.tn.settings.height.l1[d[e]];"auto"!=g?ob.tn.outerHeight.l1[d[e]]=g+ob.tn.borderHeight+ob.tn.imgcBorderHeight+ob.tn.labelHeight.get():ob.tn.outerHeight.l1[d[e]]=0}
// pagination
ob.pgMaxNbThumbnailsPerRow=fa(),
// backup values used in animations/transitions
ob.custGlobals.oldBorderColor=c.css("border-color-top"),(""==ob.custGlobals.oldBorderColor||null==ob.custGlobals.oldBorderColor||void 0==ob.custGlobals.oldBorderColor)&&(ob.custGlobals.oldBorderColor="#000"),ob.custGlobals.oldLabelOpacity=c.find(".labelImage").css("opacity");var h=jQuery.Color(c.find(".labelImage"),"backgroundColor");
// thumbnail content CSS styles
if("transparent"==h?(ob.custGlobals.oldLabelRed=0,ob.custGlobals.oldLabelGreen=0,ob.custGlobals.oldLabelBlue=0):(ob.custGlobals.oldLabelRed=h.red(),ob.custGlobals.oldLabelGreen=h.green(),ob.custGlobals.oldLabelBlue=h.blue()),ob.I=[],ob.O.thumbnailLabel.display)switch(ob.O.thumbnailLabel.position){case"onBottom":ob.tn.styleLabelImage="top:0; position:relative; left:0; right:0;",ob.tn.styleL1LabelImage="top:0; position:relative; left:0; right:0;","auto"==ob.tn.settings.getH()?(
// line break
ob.tn.styleFTitle="white-space:normal;",ob.tn.styleL1FTitle="white-space:normal;",ob.tn.styleITitle="white-space:normal;",ob.tn.styleL1ITitle="white-space:normal;",ob.tn.styleDesc="white-space:normal;",ob.tn.styleL1Desc="white-space:normal;"):(
// no line break
ob.tn.styleFTitle="white-space:nowrap;",ob.tn.styleL1FTitle="white-space:nowrap;",ob.tn.styleITitle="white-space:nowrap;",ob.tn.styleL1ITitle="white-space:nowrap;",ob.tn.styleDesc="white-space:nowrap;",ob.tn.styleL1Desc="white-space:nowrap;");break;case"overImageOnTop":ob.tn.styleLabelImage="top:0; bottom:0; left:0; right:0;",ob.tn.styleL1LabelImage="top:0; bottom:0; left:0; right:0;";break;case"overImageOnMiddle":ob.tn.styleLabelImage="top:0; bottom:0; left:0; right:0;",ob.tn.styleL1LabelImage="top:0; bottom:0; left:0; right:0;",ob.tn.styleFTitle="left:0; right:0; position:absolute; bottom:50%;",ob.tn.styleL1FTitle="left:0; right:0; position:absolute; bottom:50%;",ob.tn.styleITitle="left:0; right:0; position:absolute; bottom:50%;",ob.tn.styleL1ITitle="left:0; right:0; position:absolute; bottom:50%;",ob.tn.styleDesc="left:0; right:0; position:absolute; top:50%;",ob.tn.styleL1Desc="left:0; right:0; position:absolute; top:50%;";break;case"custom":break;case"overImageOnBottom":default:ob.O.thumbnailLabel.position="overImageOnBottom",ob.tn.styleLabelImage="bottom:0; left:0; right:0;",ob.tn.styleL1LabelImage="bottom:0; left:0; right:0;"}if(ob.O.thumbnailL1Label&&ob.O.thumbnailL1Label.display)switch(ob.O.thumbnailL1Label.position){case"onBottom":ob.tn.styleL1LabelImage="top:0; position:relative; left:0; right:0;","auto"==ob.tn.settings.getH()?(
// line break
ob.tn.styleL1FTitle="white-space:normal;",ob.tn.styleL1ITitle="white-space:normal;",ob.tn.styleL1Desc="white-space:normal;"):(
// no line break
ob.tn.styleL1FTitle="white-space:nowrap;",ob.tn.styleL1ITitle="white-space:nowrap;",ob.tn.styleL1Desc="white-space:nowrap;");break;case"overImageOnTop":ob.tn.styleL1LabelImage="top:0; bottom:0; left:0; right:0;";break;case"overImageOnMiddle":ob.tn.styleL1LabelImage="top:0; bottom:0; left:0; right:0;",ob.tn.styleL1FTitle="left:0; right:0; position:absolute; bottom:50%;",ob.tn.styleL1ITitle="left:0; right:0; position:absolute; bottom:50%;",ob.tn.styleL1Desc="left:0; right:0; position:absolute; top:50%;";break;case"custom":ob.tn.styleL1LabelImage="";break;case"overImageOnBottom":default:ob.O.thumbnailL1Label.position="overImageOnBottom",ob.tn.styleL1LabelImage="bottom:0; left:0; right:0;"}}function y(a,b){var c="";return c=""!=ob.i18nLang&&void 0!==a[b+"_"+ob.i18nLang]&&a[b+"_"+ob.i18nLang].length>0?a[b+"_"+ob.i18nLang]:a[b]}
// ####################################
// ##### LIST OF ITEMS IN OPTIONS #####
// ####################################
function z(a){if("%filename"==ob.O.thumbnailLabel.get("title"))return a.split("/").pop().replace("_"," ");if("%filenameNoExt"==ob.O.thumbnailLabel.get("title")){var b=a.split("/").pop();return b.split(".").shift().replace("_"," ")}return a}function A(){var a=!1;"undefined"!=typeof ob.O.dataSorting&&("random"==ob.O.dataSorting?ob.O.items=nb(ob.O.items):"reversed"==ob.O.dataSorting&&(ob.O.items=ob.O.items.reverse())),jQuery.each(ob.O.items,function(b,c){var d="";d=y(c,"title"),void 0===d&&(d="");var e=ob.O.itemsBaseURL;e+=void 0!==c["src"+r().toUpperCase()]?c["src"+r().toUpperCase()]:c.src;var f="";f=void 0!==c.srct&&c.srct.length>0?ob.O.itemsBaseURL+c.srct:e;var g="";g=void 0!==c.srct2x&&c.srct2x.length>0?ob.O.itemsBaseURL+c.srct2x:""!=f?f:e,""!=ob.O.thumbnailLabel.get("title")&&(d=z(e));var h="";h=y(c,"description"),void 0===h&&(h="");
//if( toType(item.description) == 'string' ) {
//  description=item.description;
//}
var i="";void 0!==c.destURL&&c.destURL.length>0&&(i=c.destURL);
//if( item.tags !== undefined && item.tags.length>0 ) {
//  tags=item.tags;
//}
var j=y(c,"tags");void 0===j&&(j="");var k=0;void 0!==c.albumID&&(k=c.albumID,a=!0);var l=null;void 0!==c.ID&&(l=c.ID);var m="image";void 0!==c.kind&&c.kind.length>0&&(m=c.kind);var n=P(d,f,e,h,i,m,j,l,k),o=0;void 0!==c.imgtWidth&&c.imgtWidth>0&&(o=c.imgtWidth);var p=0;void 0!==c.imgtHeight&&c.imgtHeight>0&&(p=c.imgtHeight),n.thumbs={url:{l1:{xs:f,sm:f,me:f,la:f,xl:f},lN:{xs:f,sm:f,me:f,la:f,xl:f}},width:{l1:{xs:o,sm:o,me:o,la:o,xl:o},lN:{xs:o,sm:o,me:o,la:o,xl:o}},height:{l1:{xs:p,sm:p,me:p,la:p,xl:p},lN:{xs:p,sm:p,me:p,la:p,xl:p}}},
// custom data
null!==c.customData&&(n.customData=B(c.customData)),"function"==typeof ob.O.fnProcessData&&ob.O.fnProcessData(n,"api",null)}),a&&(ob.O.displayBreadcrumb=!0);for(var b=ob.I.length,c=0,d=0,e=0;b>e;e++){c=0,d=0;for(var f=0;b>f;f++)e!=f&&ob.I[e].GetID()==ob.I[f].albumID&&(c++,"image"==ob.I[f].kind&&(ob.I[f].imageNumber=d++));ob.I[e].contentLength=c}}function B(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();// give temp the original obj's constructor
for(var c in a)b[c]=B(a[c]);return b}
// ###################################
// ##### LIST OF HREF ATTRIBUTES #####
// ###################################
function C(a){var b=!1;"undefined"!=typeof ob.O.dataSorting&&("random"==ob.O.dataSorting?a=nb(a):"reversed"==ob.O.dataSorting&&(jQuery.fn.reverse=[].reverse,a=a.reverse())),jQuery.each(a,function(a,c){var d="";void 0!==jQuery(c).attr("data-ngthumb")&&jQuery(c).attr("data-ngthumb").length>0&&(d=ob.O.itemsBaseURL+jQuery(c).attr("data-ngthumb")),void 0!==jQuery(c).attr("data-ngThumb")&&jQuery(c).attr("data-ngThumb").length>0&&(d=ob.O.itemsBaseURL+jQuery(c).attr("data-ngThumb"));var e="";void 0!==jQuery(c).attr("data-ngthumb2x")&&jQuery(c).attr("data-ngthumb2x").length>0&&(e=ob.O.itemsBaseURL+jQuery(c).attr("data-ngthumb2x")),void 0!==jQuery(c).attr("data-ngThumb2x")&&jQuery(c).attr("data-ngThumb2x").length>0&&(e=ob.O.itemsBaseURL+jQuery(c).attr("data-ngThumb2x"));
// responsive image source
var f="",g=r().toUpperCase();void 0!==jQuery(c).attr("data-ngsrc"+g)&&jQuery(c).attr("data-ngsrc"+g).length>0&&(f=ob.O.itemsBaseURL+jQuery(c).attr("data-ngsrc"+g)),void 0!==jQuery(c).attr("data-ngSrc"+g)&&jQuery(c).attr("data-ngSrc"+g).length>0&&(f=ob.O.itemsBaseURL+jQuery(c).attr("data-ngSrc"+g)),""==f&&(f=ob.O.itemsBaseURL+jQuery(c).attr("href"));
//newObj.description=jQuery(item).attr('data-ngdesc');
var h="";void 0!==jQuery(c).attr("data-ngdesc")&&jQuery(c).attr("data-ngdesc").length>0&&(h=jQuery(c).attr("data-ngdesc")),void 0!==jQuery(c).attr("data-ngDesc")&&jQuery(c).attr("data-ngDesc").length>0&&(h=jQuery(c).attr("data-ngDesc"));var i="";void 0!==jQuery(c).attr("data-ngdest")&&jQuery(c).attr("data-ngdest").length>0&&(i=jQuery(c).attr("data-ngdest")),void 0!==jQuery(c).attr("data-ngDest")&&jQuery(c).attr("data-ngDest").length>0&&(i=jQuery(c).attr("data-ngDest"));var j=0;void 0!==jQuery(c).attr("data-ngalbumid")&&(j=jQuery(c).attr("data-ngalbumid"),b=!0),void 0!==jQuery(c).attr("data-ngAlbumID")&&(j=jQuery(c).attr("data-ngAlbumID"),b=!0);var k=null;void 0!==jQuery(c).attr("data-ngid")&&(k=jQuery(c).attr("data-ngid")),void 0!==jQuery(c).attr("data-ngID")&&(k=jQuery(c).attr("data-ngID"));var l="image";void 0!==jQuery(c).attr("data-ngkind")&&jQuery(c).attr("data-ngkind").length>0&&(l=jQuery(c).attr("data-ngkind")),void 0!==jQuery(c).attr("data-ngKind")&&jQuery(c).attr("data-ngKind").length>0&&(l=jQuery(c).attr("data-ngKind"));var m=jQuery(c).text();""!=ob.O.thumbnailLabel.get("title")&&void 0!=ob.O.thumbnailLabel.get("title")&&(m=z(f));var n=P(m,d,f,h,i,l,"",k,j),o=0;void 0!==jQuery(c).attr("data-ngthumbImgWidth")&&jQuery(c).attr("data-ngthumbImgWidth").length>0&&(o=jQuery(c).attr("data-ngthumbImgWidth"));var p=0;void 0!==jQuery(c).attr("data-ngthumbImgHeight")&&jQuery(c).attr("data-ngthumbImgHeight").length>0&&(p=jQuery(c).attr("data-ngthumbImgHeight")),n.thumbs={url:{l1:{xs:d,sm:d,me:d,la:d,xl:d},lN:{xs:d,sm:d,me:d,la:d,xl:d}},width:{l1:{xs:o,sm:o,me:o,la:o,xl:o},lN:{xs:o,sm:o,me:o,la:o,xl:o}},height:{l1:{xs:p,sm:p,me:p,la:p,xl:p},lN:{xs:p,sm:p,me:p,la:p,xl:p}}},
// custom data
void 0!==jQuery(c).data("customdata")&&(n.customData=B(jQuery(c).data("customdata"))),"function"==typeof ob.O.fnProcessData&&ob.O.fnProcessData(n,"markup",null)}),jQuery.each(a,function(a,b){jQuery(b).remove()}),b&&(ob.O.displayBreadcrumb=!0);for(var c=ob.I.length,d=0,e=0,f=0;c>f;f++){d=0,e=0;for(var g=0;c>g;g++)f!=g&&ob.I[f].GetID()==ob.I[g].albumID&&(d++,"image"==ob.I[g].kind&&(ob.I[g].imageNumber=e++));ob.I[f].contentLength=d}}
// ##########################
// ##### CUSTOM STORAGE #####
// ##########################
function D(a,b,c,d){if($(a),ob.I[a].contentIsLoaded)// already loaded?
return void S(a,d);var e=ob.O.jsonProvider+"?albumID="+encodeURIComponent(ob.I[a].GetID());_(),jQuery.ajaxSetup({cache:!1}),jQuery.support.cors=!0;var f=setTimeout(function(){
// workaround to handle JSONP (cross-domain) errors
aa(),hb("Could not retrieve Custom data...")},6e4);jQuery.getJSON(e,function(e,g,h){if(clearTimeout(f),aa(),F(a,e),b||""!=ob.O.openOnStart)v(!1)||S(a,d);else if(-1!=c){for(var i=-1,j=ob.I.length,k=0;j>k;k++)if("image"==ob.I[k].kind&&ob.I[k].GetID()==c){i=k;break}Ka(i,!0)}else S(a,d)}).fail(function(a,b,c){clearTimeout(f),aa();var d=b+", "+c;hb("Could not retrieve JSON items list (jQuery): "+d)})}function E(a){return decodeURIComponent(a)}function F(a,b){var c=!1,d=0;jQuery.each(b,function(a,b){var e="";e=y(b,"title"),void 0===e&&(e="");var f=ob.O.jsonProvider.substring(0,ob.O.jsonProvider.indexOf("nanoPhotosProvider.php")),g=f+E(b.src),h=f+E(b.srct);""!=ob.O.thumbnailLabel.get("title")&&(e=z(b.src));var i="";i=y(b,"description"),void 0===i&&(i="");var j="",k=0;void 0!==b.albumID&&(k=b.albumID,c=!0);var l=null;void 0!==b.ID&&(l=b.ID);var m="image";void 0!==b.kind&&b.kind.length>0&&(m=b.kind);var n=P(e,h,g,i,j,m,"",l,k),o=b.imgtWidth,p=b.imgtHeight;return n.thumbs={url:{l1:{xs:h,sm:h,me:h,la:h,xl:h},lN:{xs:h,sm:h,me:h,la:h,xl:h}},width:{l1:{xs:o,sm:o,me:o,la:o,xl:o},lN:{xs:o,sm:o,me:o,la:o,xl:o}},height:{l1:{xs:p,sm:p,me:p,la:p,xl:p},lN:{xs:p,sm:p,me:p,la:p,xl:p}}},"function"==typeof ob.O.fnProcessData&&ob.O.fnProcessData(n,"api",null),"image"==m&&(n.imageNumber=d,d++,d>=ob.maxAlbums)?!1:void 0}),c&&(ob.O.displayBreadcrumb=!0),ob.I[a].contentIsLoaded=!0,ob.I[a].contentLength=d}
// ##########################
// ##### FLICKR STORAGE #####
// ##########################
function G(a,b,c,d){if($(a),ob.I[a].contentIsLoaded)// already loaded?
return void S(a,d);var e="",f="album";0==ob.I[a].GetID()?
// albums
//url = G.flickr.url() + "?&method=flickr.photosets.getList&api_key=" + G.flickr.ApiKey + "&user_id="+G.O.userID+"&primary_photo_extras=url_"+G.flickr.thumbSize+"&format=json&jsoncallback=?";
e=ob.flickr.url()+"?&method=flickr.photosets.getList&api_key="+ob.flickr.ApiKey+"&user_id="+ob.O.userID+"&per_page=500&primary_photo_extras=url_o,url_sq,url_t,url_q,url_s,url_m,url_l,url_z,url_b,url_h,url_k&format=json&jsoncallback=?":(
// photos
e="none"==ob.I[a].GetID()?ob.flickr.url()+"?&method=flickr.people.getPublicPhotos&api_key="+ob.flickr.ApiKey+"&user_id="+ob.O.userID+"&extras=description,views,url_o,url_sq,url_t,url_q,url_s,url_m,url_z,url_b,url_h,url_k&per_page=500&format=json&jsoncallback=?":ob.flickr.url()+"?&method=flickr.photosets.getPhotos&api_key="+ob.flickr.ApiKey+"&photoset_id="+ob.I[a].GetID()+"&extras=description,views,url_o,url_sq,url_t,url_q,url_s,url_m,url_l,url_z,url_b,url_h,url_k&format=json&jsoncallback=?",f="image"),_(),jQuery.ajaxSetup({cache:!1}),jQuery.support.cors=!0;var g=setTimeout(function(){
// workaround to handle JSONP (cross-domain) errors
aa(),hb("Could not retrieve Flickr data...")},6e4);jQuery.getJSON(e,function(e,h,i){if(clearTimeout(g),aa(),"album"==f?H(a,e):K(a,e),b||""!=ob.O.openOnStart)v(!1)||S(a,d);else if(-1!=c){for(var j=-1,k=ob.I.length,l=0;k>l;l++)if("image"==ob.I[l].kind&&ob.I[l].GetID()==c){j=l;break}Ka(j,!0)}else S(a,d)}).fail(function(a,b,c){clearTimeout(g),aa();var d=b+", "+c;hb("Could not retrieve Flickr photoset list (jQuery): "+d)})}function H(a,b){var c=!0;if(void 0!==b.stat&&"fail"===b.stat&&(hb("Could not retrieve Flickr photoset list: "+b.message+" (code: "+b.code+")."),c=!1),c){var d=0,e=b.photosets.photoset;switch(ob.O.albumSorting){case"random":e=nb(e);break;case"reversed":e=e.reverse();break;case"titleAsc":e.sort(function(a,b){var c=a.title._content.toUpperCase(),d=b.title._content.toUpperCase();return d>c?-1:c>d?1:0});break;case"titleDesc":e.sort(function(a,b){var c=a.title._content.toUpperCase(),d=b.title._content.toUpperCase();return c>d?-1:d>c?1:0})}jQuery.each(e,function(b,c){if(
//Get the title
itemTitle=c.title._content,R(itemTitle,c.id)){itemID=c.id,
//Get the description
itemDescription="",void 0!=c.description._content&&(itemDescription=c.description._content);var e={};for(var f in c.primary_photo_extras)e[f]=c.primary_photo_extras[f];tags="",void 0!==c.primary_photo_extras&&void 0!==c.primary_photo_extras.tags&&(tags=c.primary_photo_extras.tags);var g=P(itemTitle,"","",itemDescription,"","album",tags,itemID,ob.I[a].GetID());
//newItem.thumbImgWidth=item.primary_photo_extras['width_'+G.flickr.thumbSize];
//newItem.thumbImgHeight=item.primary_photo_extras['height_'+G.flickr.thumbSize];
g.contentLength=c.photos,g.thumbSizes=e;var h={url:{l1:{xs:"",sm:"",me:"",la:"",xl:""},lN:{xs:"",sm:"",me:"",la:"",xl:""}},width:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}},height:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}}};if(h=I(h,c.primary_photo_extras,"l1"),h=I(h,c.primary_photo_extras,"lN"),g.thumbs=h,d++,d>=ob.maxAlbums)return!1}}),ob.I[a].contentIsLoaded=!0,ob.I[a].contentLength=d}}function I(a,b,c){for(var d=["xs","sm","me","la","xl"],e=0;e<d.length;e++)if("auto"==ob.tn.settings.width[c][d[e]]){var f="height_",g=Math.ceil(ob.tn.settings.height[c][d[e]]*ob.tn.scale),h=J(f,g,b);a.url[c][d[e]]=h.url,a.width[c][d[e]]=h.width,a.height[c][d[e]]=h.height}else if("auto"==ob.tn.settings.height[c][d[e]]){var f="width_",g=Math.ceil(ob.tn.settings.width[c][d[e]]*ob.tn.scale),h=J(f,g,b);a.url[c][d[e]]=h.url,a.width[c][d[e]]=h.width,a.height[c][d[e]]=h.height}else{var f="height_",g=Math.ceil(ob.tn.settings.height[c][d[e]]*ob.tn.scale);ob.tn.settings.width[c][d[e]]>ob.tn.settings.height[c][d[e]]&&(f="width_",g=Math.ceil(ob.tn.settings.width[c][d[e]]*ob.tn.scale));var h=J(f,g,b);a.url[c][d[e]]=h.url,a.width[c][d[e]]=h.width,a.height[c][d[e]]=h.height}return a}function J(a,b,c){for(var d={url:"",width:0,height:0},e=0,f=0;f<ob.flickr.thumbAvailableSizes.length;f++){var g=c[a+ob.flickr.photoAvailableSizesStr[f]];if(void 0!=g&&(e=f,g>=b))break}var h=ob.flickr.photoAvailableSizesStr[e];return d.url=c["url_"+h],d.width=parseInt(c["width_"+h]),d.height=parseInt(c["height_"+h]),d}function K(a,b){var c="";switch(c="none"==ob.I[a].GetID()?b.photos.photo:b.photoset.photo,ob.O.photoSorting){case"random":c=nb(c);break;case"reversed":c=c.reverse();break;case"titleAsc":c.sort(function(a,b){
// var x = a.title.toUpperCase();
// var y =  b.title.toUpperCase();
var c="",d="";return""!=ob.O.thumbnailLabel.get("title")?(c=z(a.url_sq),d=z(b.url_sq)):(c=a.title.toUpperCase(),d=b.title.toUpperCase()),d>c?-1:c>d?1:0});break;case"titleDesc":c.sort(function(a,b){
// var x = a.title.toUpperCase();
// var y =  b.title.toUpperCase();
var c="",d="";return""!=ob.O.thumbnailLabel.get("title")?(c=z(a.url_sq),d=z(b.url_sq)):(c=a.title.toUpperCase(),d=b.title.toUpperCase()),c>d?-1:d>c?1:0})}var d=ob.I[a].GetID(),e=0;jQuery.each(c,function(a,b){//fallback size
for(var c=b.title,f=b.id,g=b.description._content,h=b.url_sq,a=ob.flickr.photoSize;a>=0;a--)if(void 0!=b["url_"+ob.flickr.photoAvailableSizesStr[a]]){h=b["url_"+ob.flickr.photoAvailableSizesStr[a]];break}var i={};for(var j in b)(0==j.indexOf("height_")||0==j.indexOf("width_")||0==j.indexOf("url_"))&&(i[j]=b[j]);""!=ob.O.thumbnailLabel.get("title")&&(c=z(h));var k=P(c,"",h,g,"","image","",f,d);k.imageNumber=e,void 0!==b.url_o?(k.width=b.width_o,k.height=b.height_o):(k.width=b.width_z,k.height=b.height_z);
//newItem.thumbImgWidth=item['width_'+G.flickr.photoAvailableSizesStr[tnIndex]];
//newItem.thumbImgHeight=item['height_'+G.flickr.photoAvailableSizesStr[tnIndex]];
//      newItem.thumbSizes=sizes;
var l={url:{l1:{xs:"",sm:"",me:"",la:"",xl:""},lN:{xs:"",sm:"",me:"",la:"",xl:""}},width:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}},height:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}}};return l=I(l,b,"l1"),l=I(l,b,"lN"),k.thumbs=l,e++,e>=ob.maxPhotos?!1:void 0}),ob.I[a].contentIsLoaded=!0,ob.I[a].contentLength=e}
// ##########################
// ##### PICASA STORAGE #####
// ##########################
function L(a,b,c,d,e){var f=Math.ceil(c*ob.tn.scale)+e;return"auto"==b?f=Math.ceil(c*ob.tn.scale)+e:"auto"==c?f=Math.ceil(b*ob.tn.scale)+d:b>c&&(f=Math.ceil(b*ob.tn.scale)+d),a.length>0&&(a+=","),a+=f}function M(a,b,c,d){if($(a),ob.I[a].contentIsLoaded)// already loaded?
//renderGallery(albumIdx,0);
return void S(a,d);var e="",f="album",g="";if(g=L(g,ob.tn.settings.width.l1.xs,ob.tn.settings.height.l1.xs,ob.tn.settings.width.l1.xsc,ob.tn.settings.height.l1.xsc),g=L(g,ob.tn.settings.width.l1.sm,ob.tn.settings.height.l1.sm,ob.tn.settings.width.l1.smc,ob.tn.settings.height.l1.smc),g=L(g,ob.tn.settings.width.l1.me,ob.tn.settings.height.l1.me,ob.tn.settings.width.l1.mec,ob.tn.settings.height.l1.mec),g=L(g,ob.tn.settings.width.l1.la,ob.tn.settings.height.l1.la,ob.tn.settings.width.l1.lac,ob.tn.settings.height.l1.lac),g=L(g,ob.tn.settings.width.l1.xl,ob.tn.settings.height.l1.xl,ob.tn.settings.width.l1.xlc,ob.tn.settings.height.l1.xlc),g=L(g,ob.tn.settings.width.lN.xs,ob.tn.settings.height.lN.xs,ob.tn.settings.width.lN.xsc,ob.tn.settings.height.lN.xsc),g=L(g,ob.tn.settings.width.lN.sm,ob.tn.settings.height.lN.sm,ob.tn.settings.width.lN.smc,ob.tn.settings.height.lN.smc),g=L(g,ob.tn.settings.width.lN.me,ob.tn.settings.height.lN.me,ob.tn.settings.width.lN.mec,ob.tn.settings.height.lN.mec),g=L(g,ob.tn.settings.width.lN.la,ob.tn.settings.height.lN.la,ob.tn.settings.width.lN.lac,ob.tn.settings.height.lN.lac),g=L(g,ob.tn.settings.width.lN.xl,ob.tn.settings.height.lN.xl,ob.tn.settings.width.lN.xlc,ob.tn.settings.height.lN.xlc),0==ob.I[a].GetID())
// albums
//url = G.picasa.url() + 'user/'+G.O.userID+'?alt=json&kind=album&imgmax=d&thumbsize='+G.picasa.thumbSize;
// url = G.picasa.url() + 'user/'+G.O.userID+'?alt=json&kind=album&imgmax=d&thumbsize=320';
// url = G.picasa.url() + 'user/'+G.O.userID+'?alt=json&kind=album&imgmax=d&thumbsize='+thumbSizes;
// url = G.picasa.url() + 'user/'+G.O.userID+'?alt=json&kind=album&access=public&thumbsize='+thumbSizes+'&rnd=' + (new Date().getTime());
e=ob.picasa.url()+"user/"+ob.O.userID+"?alt=json&kind=album&thumbsize="+g+"&rnd="+(new Date).getTime();else{
// photos
var h="";"undefined"!=typeof ob.I[a].customData.authkey&&(h=ob.I[a].customData.authkey),
// url = G.picasa.url() + 'user/'+G.O.userID+'/albumid/'+G.I[albumIdx].GetID()+'?alt=json&kind=photo'+opt+'&thumbsize='+G.picasa.thumbSize+'&imgmax=d';
e=ob.picasa.url()+"user/"+ob.O.userID+"/albumid/"+ob.I[a].GetID()+"?alt=json&kind=photo"+h+"&thumbsize="+g+"&imgmax=d",
// url = G.picasa.url() + 'user/'+G.O.userID+'/albumid/'+G.I[albumIdx].GetID()+'?alt=json&kind=photo'+opt+'&thumbsize=320&imgmax=d';
f="image"}
//A    url = url + "&callback=?";
_(),
// get the content and display it
jQuery.ajaxSetup({cache:!1}),jQuery.support.cors=!0;var i=setTimeout(function(){
// workaround to handle JSONP (cross-domain) errors
aa(),hb("Could not retrieve Picasa/Google+ data...")},6e4),j=function(e){
//renderGallery(albumIdx,0);
if(clearTimeout(i),aa(),N(a,e,f),b||""!=ob.O.openOnStart)v(!1)||S(a,d);else if(-1!=c){for(var g=-1,h=ob.I.length,j=0;h>j;j++)if("image"==ob.I[j].kind&&ob.I[j].GetID()==c){g=j;break}Ka(g,!0)}else S(a,d)},k=null,l=function(a,b){jQuery.getJSON(a+"&start-index="+b,"callback=?",function(b){null===k?k=b:k.feed.entry=k.feed.entry.concat(b.feed.entry),b.feed.openSearch$startIndex.$t+b.feed.openSearch$itemsPerPage.$t>=b.feed.openSearch$totalResults.$t?
//ok finito
j(k):
//ce ne sono ancora da caricare
//altra chiamata per il rimanente
l(a,b.feed.openSearch$startIndex.$t+b.feed.openSearch$itemsPerPage.$t)}).fail(function(b,c,d){clearTimeout(i),aa();
//alertObject(jqxhr);
var e="";for(var f in b)e+=f+"="+b[f]+"<br>";var g=c+", "+d+" "+e+"<br><br>URL:"+a;hb("Could not retrieve Picasa/Google+ data. Error: "+g)})};l(e,1)}function N(a,b,c){var d=0,e=ob.I[a].GetID(),f=b.feed.entry,g=ob.O.albumSorting;switch("image"==c&&(g=ob.O.photoSorting),g){case"random":f=nb(f);break;case"reversed":f=f.reverse();break;case"titleAsc":f.sort(function(a,b){
// var x =  kind == 'image' ? a.media$group.media$description.$t.toUpperCase() : a.media$group.media$title.$t.toUpperCase();
// var y =  kind == 'image' ? b.media$group.media$description.$t.toUpperCase() : b.media$group.media$title.$t.toUpperCase();
var d="",e="";return"image"==c?""!=ob.O.thumbnailLabel.get("title")?(d=z(unescape(unescape(unescape(unescape(a.media$group.media$content[0].url))))),e=z(unescape(unescape(unescape(unescape(b.media$group.media$content[0].url)))))):(d=a.media$group.media$description.$t.toUpperCase(),e=b.media$group.media$description.$t.toUpperCase()):(d=a.media$group.media$title.$t.toUpperCase(),e=b.media$group.media$title.$t.toUpperCase()),e>d?-1:d>e?1:0});break;case"titleDesc":f.sort(function(a,b){
// var x =  kind == 'image' ? a.media$group.media$description.$t.toUpperCase() : a.media$group.media$title.$t.toUpperCase();
// var y =  kind == 'image' ? b.media$group.media$description.$t.toUpperCase() : b.media$group.media$title.$t.toUpperCase();
var d="",e="";return"image"==c?""!=ob.O.thumbnailLabel.get("title")?(d=z(unescape(unescape(unescape(unescape(a.media$group.media$content[0].url))))),e=z(unescape(unescape(unescape(unescape(b.media$group.media$content[0].url)))))):(d=a.media$group.media$description.$t.toUpperCase(),e=b.media$group.media$description.$t.toUpperCase()):(d=a.media$group.media$title.$t.toUpperCase(),e=b.media$group.media$title.$t.toUpperCase()),d>e?-1:e>d?1:0})}jQuery.each(f,function(a,b){
//Get the title
var f=b.media$group.media$title.$t,g=b.media$group.media$thumbnail[0].url,h=b.gphoto$id.$t,i="",j=b.media$group.media$description.$t;"image"==c&&(i=f,f=j,j="");var k=b.media$group.media$content[0].url;"image"==c&&""!=ob.O.thumbnailLabel.get("title")&&(f=z(unescape(unescape(unescape(unescape(k))))));var l=!0;"album"==c&&(R(f,h)||(l=!1));var m="";if(l){var n="",o="";if("album"==c)o=h;else{o=k;var p=k.substring(0,k.lastIndexOf("/"));p=p.substring(0,p.lastIndexOf("/"))+"/",o=window.screen.width>window.screen.height?p+"w"+window.screen.width+"/"+i:p+"h"+window.screen.height+"/"+i}var q=P(f,g,o,j,"",c,m,h,e);q.picasaThumbBaseURL=n,q.imageNumber=d,"album"==c&&(q.author=b.author[0].name.$t,q.contentLength=b.gphoto$numphotos.$t);
// OLD METHOD
/*
          if( kind == 'image' ) {
          newItem.width=data.gphoto$width.$t;
            newItem.height=data.gphoto$height.$t;
            newItem.thumbImgWidth=data.media$group.media$thumbnail[0].width;
            newItem.thumbImgHeight=data.media$group.media$thumbnail[0].height;
          }
          else {
            if( G.tn.settings.getH() == 'auto' ) {
              newItem.thumbImgWidth=G.picasa.thumbSize;
            }
            else
              if( G.tn.settings.getW() == 'auto' ) {
                newItem.thumbImgHeight=G.picasa.thumbSize;
              }
              else {
                newItem.thumbImgWidth=G.picasa.thumbSize;
                newItem.thumbImgHeight=G.picasa.thumbSize;
              }
          }
          */
// NEW METHOD
var r={url:{l1:{xs:"",sm:"",me:"",la:"",xl:""},lN:{xs:"",sm:"",me:"",la:"",xl:""}},width:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}},height:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}}};if(r=O("l1",0,r,b,c),r=O("lN",5,r,b,c),q.thumbs=r,"function"==typeof ob.O.fnProcessData&&ob.O.fnProcessData(q,"picasa",b),d++,d>=("album"==c?ob.maxAlbums:ob.maxPhotos))return!1}}),ob.I[a].contentIsLoaded=!0,ob.I[a].contentLength=d}function O(a,b,c,d,e){for(var f=["xs","sm","me","la","xl"],g=0;g<f.length;g++)if(c.url[a][f[g]]=d.media$group.media$thumbnail[b+g].url,"image"==e){c.width[a][f[g]]=d.media$group.media$thumbnail[b+g].width,c.height[a][f[g]]=d.media$group.media$thumbnail[b+g].height;var h=d.media$group.media$thumbnail[b+g].width,i=d.media$group.media$thumbnail[b+g].height;if("auto"==ob.tn.settings.width[a][f[g]]&&i<ob.tn.settings.height[a][f[g]]){
// calculate new h/w and change URL
var j=h/i;c.width[a][f[g]]=h*j,c.height[a][f[g]]=i*j;var k=c.url[a][f[g]].substring(0,c.url[a][f[g]].lastIndexOf("/"));k=k.substring(0,k.lastIndexOf("/"))+"/",c.url[a][f[g]]=k+"h"+ob.tn.settings.height[a][f[g]]+"/"}if("auto"==ob.tn.settings.height[a][f[g]]&&h<ob.tn.settings.width[a][f[g]]){
// calculate new h/w and change URL
var j=i/h;c.height[a][f[g]]=i*j,c.width[a][f[g]]=h*j;var k=c.url[a][f[g]].substring(0,c.url[a][f[g]].lastIndexOf("/"));k=k.substring(0,k.lastIndexOf("/"))+"/",c.url[a][f[g]]=k+"w"+ob.tn.settings.width[a][f[g]]+"/"}}else{if("auto"!=ob.tn.settings.width[a][f[g]])c.width[a][f[g]]=d.media$group.media$thumbnail[b+g].width;else{var k=c.url[a][f[g]].substring(0,c.url[a][f[g]].lastIndexOf("/"));k=k.substring(0,k.lastIndexOf("/"))+"/",c.url[a][f[g]]=k+"h"+ob.tn.settings.height[a][f[g]]+"/"}if("auto"!=ob.tn.settings.height[a][f[g]])c.height[a][f[g]]=d.media$group.media$thumbnail[b+g].height;else{var k=c.url[a][f[g]].substring(0,c.url[a][f[g]].lastIndexOf("/"));k=k.substring(0,k.lastIndexOf("/"))+"/",c.url[a][f[g]]=k+"w"+ob.tn.settings.width[a][f[g]]+"/"}}return c}
// ################################
// ##### NGITEMS MANIPULATION #####
// ################################
function P(a,b,c,d,e,f,g,h,i){var j=Q(h),k=!1;return null===j?(j=new pb(a,h),k=!0):j.title=a,j.src=c,j.description=d,j.destinationURL=e,j.kind=f,j.albumID=i,0==g.length?j.tags=null:j.tags=g.split(" "),k&&(j.title=a,ob.I.push(j)),j}function Q(a){for(var b=ob.I.length,c=0;b>c;c++)if(ob.I[c].GetID()==a)return ob.I[c];return null}
// check album name - blackList/whiteList
function R(a,b){var c=a.toUpperCase();if(null===ob.albumList){var d=!1;if(null!==ob.whiteList){
//whiteList : authorize only album cointaining one of the specified keyword in the title
for(var e=0;e<ob.whiteList.length;e++)-1!==c.indexOf(ob.whiteList[e])&&(d=!0);if(!d)return!1}if(null!==ob.blackList)
//blackList : ignore album cointaining one of the specified keyword in the title
for(var e=0;e<ob.blackList.length;e++)if(-1!==c.indexOf(ob.blackList[e]))return!1;return!0}for(var e=0;e<ob.albumList.length;e++)if(c==ob.albumList[e].toUpperCase()||b==ob.albumList[e])return!0}
// ###########################
// ##### GALLERY TOOLBAR #####
// ###########################
function S(a,b){"display"==ob.O.lazyBuild?lb(ob.$E.conTnParent,ob.O.lazyBuildTreshold)?T(a,b):(ob.delayedAlbumIdx=a,ob.delayedSetLocationHash=b):T(a,b)}function T(a,b){if(ob.O.lazyBuild="none",ob.delayedAlbumIdx=-1,ob.albumIdxToOpenOnViewerClose=-1,ob.O.thumbnailAlbumDisplayImage&&0!=a){for(var c=ob.I.length,d=0;c>d;d++)if(ob.I[d].albumID==ob.I[a].GetID()){Ka(d);break}}else if(ob.containerViewerDisplayed&&bb(!1),a!=ob.lastOpenAlbumID){if(ob.O.locationHash&&b){var e="nanogallery/"+ob.baseEltID+"/"+ob.I[a].GetID();ob.lastLocationHash="#"+e;try{top.location.hash=e}catch(f){ob.O.locationHash=!1}}ob.lastOpenAlbumID=ob.I[a].GetID(),$(a);var g=0;ob.I[a].paginationLastPage>0&&ob.I[a].paginationLastWidth==ob.$E.conTnParent.width()&&(g=ob.I[a].paginationLastPage),pa(a,g)}}
// Display next album
function U(){var a=W(ob.curAlbumIdx),b=a>0;
// DisplayAlbum(newAlbumIdx, setLocationHash);
ba(a,!1,-1,b)}
// Display previous album
function V(){var a=X(ob.curAlbumIdx),b=a>0;
// DisplayAlbum(newAlbumIdx, setLocationHash);
ba(a,!1,-1,b)}function W(a){for(var b=ob.I.length,c=-1,d=a+1;b>d;d++)if(ob.I[d].albumID==ob.I[a].albumID&&"album"==ob.I[d].kind){c=d;break}if(-1==c)for(var d=0;a>=d;d++)if(ob.I[d].albumID==ob.I[a].albumID&&"album"==ob.I[d].kind){c=d;break}return c}function X(a){for(var b=(ob.I.length,-1),c=a-1;c>=0;c--)if(ob.I[c].albumID==ob.I[a].albumID&&"album"==ob.I[c].kind){b=c;break}if(-1==b)for(var c=ob.I.length-1;c>=a;c--)if(ob.I[c].albumID==ob.I[a].albumID&&"album"==ob.I[c].kind){b=c;break}return b}
// add album to breadcrumb
function Y(a){var b="folder";0==a&&(b="folderHome");var c=jQuery('<div class="'+b+' oneFolder">'+ob.I[a].title+"</div>").appendTo(ob.$E.conBC);jQuery(c).data("albumIdx",a),c.click(function(){var a=jQuery(this).data("albumIdx");jQuery(this).nextAll().remove(),ba(a,!1,-1,!0)})}
// add separator to breadcrumb
function Z(a){var b=jQuery('<div class="separator'+(ob.O.RTL?"RTL":"")+'"></div>').appendTo(ob.$E.conBC);jQuery(b).data("albumIdx",a),b.click(function(){var a=jQuery(this).data("albumIdx");jQuery(this).nextAll().remove(),jQuery(this).remove(),ba(a,!1,-1,!0)})}function $(a){var c=!1;
// Breadcrumb
if(1==ob.O.displayBreadcrumb&&!ob.O.thumbnailAlbumDisplayImage){if(0==ob.$E.conBC.children().length&&ob.$E.conNavBCon.css({opacity:0,"max-height":"0px"}),c=!0,ob.$E.conBC.children().remove(),Y(0),0!=a){var d=ob.I.length,e=[];e.push(a);for(var f=a;0!=ob.I[f].albumID&&-1!=ob.I[f].albumID;)for(i=1;i<d;i++)if(ob.I[i].GetID()==ob.I[f].albumID){f=i,e.push(f);break}for(Z(0),i=e.length-1;i>=0;i--)Y(e[i]),i>0&&Z(e[i-1])}var g=ob.$E.conBC.children(),h=g.length;if(0==h)ob.curNavLevel="l1",ob.O.breadcrumbAutoHideTopLevel&&(ob.$E.conNavBCon.css({opacity:0,"max-height":"0px"}),c=!1);else if(1==h?ob.curNavLevel="l1":ob.curNavLevel="lN",1==h&&ob.O.breadcrumbAutoHideTopLevel){
//G.$E.conNavBCon.animate({'opacity':'0','max-height':'0px'});
var j=new b;j.tween({from:{opacity:ob.$E.conNavBCon.css("opacity"),"max-height":ob.$E.conNavBCon.css("max-height")},to:{opacity:"0","max-height":"0px"},attachment:{$e:ob.$E.conNavBCon},duration:200,step:function(a,b){b.$e.css(a)},finish:function(a,b){b.$e.css({opacity:"0","max-height":"0px"})}})}else
//G.$E.conNavBCon.animate({'opacity':'1','max-height':'50px'});
if(ob.O.breadcrumbAutoHideTopLevel){var j=new b;j.tween({from:{opacity:ob.$E.conNavBCon.css("opacity"),"max-height":ob.$E.conNavBCon.css("max-height")},to:{opacity:"1","max-height":"50px"},attachment:{$e:ob.$E.conNavBCon},duration:200,step:function(a,b){b.$e.css(a)},finish:function(a,b){b.$e.css({opacity:"1","max-height":"50px"})}})}else ob.$E.conNavBCon.css({opacity:1,"max-height":"50px"});ob.pgMaxNbThumbnailsPerRow=fa()}
// Tag-bar
ob.O.useTags&&(c=!0,null==ob.containerTags&&(ob.containerTags=jQuery('<div class="nanoGalleryTags"></div>').appendTo(ob.$E.conNavB))),ob.O.galleryFullpageButton&&(c=!0),!ob.containerNavigationbarContDisplayed&&c&&(ob.containerNavigationbarContDisplayed=!0,ob.$E.conNavBCon.show())}function _(){
//if( G.O.displayBreadcrumb == true ) { G.$E.conBC.find('.oneFolder').last().addClass('loading'); }
// G.$E.conLoadingB.css({visibility:'visible'});
ob.$E.conLoadingB.addClass("nanoGalleryLBar").removeClass("nanoGalleryLBarOff")}function aa(){
//if( G.O.displayBreadcrumb == true ) { G.$E.conBC.find('.oneFolder').last().removeClass('loading'); }
// G.$E.conLoadingB.css({visibility:'hidden'});
ob.$E.conLoadingB.removeClass("nanoGalleryLBar").addClass("nanoGalleryLBarOff")}
// ##### Open one album
function ba(a,b,c,d){
// unselect everything
if(ob.O.itemsSelectable&&ob.O.keepSelection===!1){ob.selectedItems=[];for(var e=ob.I.length,f=0;e>f;f++)ob.I[f].selected=!1}switch(ob.O.kind){case"":
//renderGallery(albumIdx,0);
S(a,d);break;case"flickr":G(a,b,c,d);break;case"json":D(a,b,c,d);break;case"picasa":default:M(a,b,c,d)}}
// ##### REPOSITION THUMBNAILS ON SCREEN RESIZE EVENT
function ca(){"auto"==ob.tn.settings.getH()?da():"auto"==ob.tn.settings.getW()?ea():ga(),ka(),ja(0)}
// CASCADING LAYOUT
function da(){var a=ob.$E.conTnParent.width(),b=0,c=0,d=0,e=[],f=fa(),//parseInt(areaW/G.tn.defaultFullWidth);
g=0,h=ob.O.thumbnailGutterHeight,j=ob.tn.outerWidth.get(),k=ob.$E.conTn.find(".nanoGalleryThumbnailContainer");"justified"==ob.O.thumbnailAlignment?(f=Math.min(f,k.length),g=1==f?0:(a-f*j)/(f-1)):g=ob.O.thumbnailGutterWidth;var l=0;
// first loop to retrieve the width of the area
k.each(function(){var a=jQuery(this),i=a.data("index");if(void 0!==i){var j=0;if(0!=c)return!1;j=b*(ob.tn.outerWidth.get()+g),e[b]=ob.I[i].thumbFullHeight+h,b++,l++,b>=f&&(b=0,c++),d++}});var m=e.length*(j+g)-g;c=0,b=0,k.each(function(){var a=jQuery(this),j=a.data("index");if(void 0!==j){"onBottom"==ob.O.thumbnailLabel.get("position")&&xa(a,ob.I[j]);var k=0,l=0;if(0==c)k=b*(ob.tn.outerWidth.get()+g),e[b]=ob.I[j].thumbFullHeight+h,b++,b>=f&&(b=0,c++);else{var n=0,o=e[0];for(i=1;i<f;i++)if(e[i]+5<o){o=e[i],n=i;break}l=e[n],k=n*(ob.tn.outerWidth.get()+g),e[n]=l+ob.I[j].thumbFullHeight+h}var p=k;ob.O.RTL&&(p=m-k-ob.tn.outerWidth.get()),a.css({top:l,left:p}),ha(a,ob.I[j],d),d++}});var n=e[0];for(i=1;i<l;i++)n=Math.max(n,e[i]);ob.$E.conTn.width(m).height(n)}
// JUSTIFIED LAYOUT
function ea(){var a=ob.$E.conTnParent.width(),b=0,c=0,d=0,e=[],f=0,g=[],h=!1,i=0,j=0,k=0,l=0,m=ob.O.thumbnailGutterWidth,n=ob.O.thumbnailGutterHeight,o=0,p=0,q=!1,r=!1,s=ob.$E.conTn.find(".nanoGalleryThumbnailContainer");s.each(function(){var c=jQuery(this).data("index");if(void 0!==c&&void 0!=ob.I[c]){if(!(ob.I[c].thumbImg().width>0&&ob.I[c].thumbImg().height>0))
// exit to conserve display order, and avoid displaying thumbnail before an existing one
return!1;var d=ob.I[c],j=Math.floor(d.thumbImg().width/d.thumbImg().height*ob.tn.settings.getH())+ob.tn.borderWidth+ob.tn.imgcBorderWidth;
// down scale image resolution
if(// +gutterWidth;
ob.O.thumbnailFeatured&&0==i&&(j=2*j,k=j),h&&(h=!1,f++,b=0,q=!1,r=!1,1==f&&k>0&&(b=k,k=0)),
// by grief-of-these-days
d.thumbImg().height>d.thumbImg().width?q=!0:r=!0,a>b+j+m){
// last row
b+=j+m,g[f]=ob.tn.settings.getH();
// rowHeight[rowNum]=item.thumbFullHeight;
// prevent incomplete row from being heigher than the previous ones.
// by grief-of-these-days
var l=Math.max(q?o:0,r?p:0);ob.O.thumbnailAdjustLastRowHeight&&l>0&&(g[f]=Math.min(g[f],l)),e[f]=c}else{
// new row after current item
b+=j;var n=Math.floor(ob.tn.settings.getH()*a/b);
// var rH=Math.floor(item.thumbFullHeight*areaW/curWidth);
g[f]=n,
// save the max row height for each thumb orientation.
// by grief-of-these-days
q&&(o=Math.max(o,n)),r&&(p=Math.max(p,n)),e[f]=c,h=!0}i++}}),f=0,d=0,c=0,i=0,s.each(function(){var b=jQuery(this),h=b.data("index");if(void 0!==h&&void 0!=ob.I[h]){if(!(ob.I[h].thumbImg().width>0&&ob.I[h].thumbImg().height>0))return!1;var k=ob.I[h],o=Math.floor(k.thumbImg().width/k.thumbImg().height*g[f]);0==i&&ob.O.thumbnailFeatured&&(o=2*o,j=1==g.length?2*parseInt(g[0]):parseInt(g[0])+parseInt(g[1])+ob.tn.borderHeight+ob.tn.imgcBorderHeight),h==e[f]&&(e.length!=f+1?o=a-c-ob.tn.borderWidth-ob.tn.imgcBorderWidth:c+o+ob.tn.borderWidth+ob.tn.imgcBorderWidth+m>a&&(o=a-c-ob.tn.borderWidth-ob.tn.imgcBorderWidth));var p=0;0==i&&ob.O.thumbnailFeatured||(p=g[f]),p=parseInt(p),o=parseInt(o),b.width(o+ob.tn.imgcBorderWidth).height(p+ob.tn.imgcBorderHeight+ob.tn.labelHeight.get()),k.$getElt(".imgContainer").height(p).width(o),b.find("img").css({"max-height":p+2,"max-width":o+2}),b.find(".subcontainer").width(o+ob.tn.imgcBorderWidth).height(p+ob.tn.imgcBorderHeight+ob.tn.labelHeight.get());var q=c;ob.O.RTL&&(q=a-c-(o+ob.tn.borderWidth+ob.tn.imgcBorderWidth)),b.css({top:d,left:q}),k.thumbFullWidth=o+ob.tn.borderWidth+ob.tn.imgcBorderWidth,k.thumbFullHeight=p+ob.tn.borderHeight+ob.tn.imgcBorderHeight+ob.tn.labelHeight.get(),Ba(b),ha(b,k,i),c+=o+ob.tn.borderWidth+ob.tn.imgcBorderWidth+m,h==e[f]&&(d+=g[f]+ob.tn.labelHeight.get()+n+ob.tn.imgcBorderHeight+ob.tn.borderHeight,f++,c=0,1==f&&l>0&&(c=l,l=0)),i++}}),f>0&&(d-=n),j=j+ob.tn.outerHeight.get()+ob.tn.labelHeight.get(),ob.$E.conTn.width(a).height(d>j?d:j)}
// Maximum number of thumbnails in one row
function fa(){var a=ob.tn.settings.getW()+ob.tn.borderWidth+ob.tn.imgcBorderWidth,b=ob.$E.conTnParent.width(),c=0;return c="justified"==ob.O.thumbnailAlignment?Math.floor(b/a):Math.floor((b+ob.O.thumbnailGutterWidth)/(a+ob.O.thumbnailGutterWidth)),ob.O.maxItemsPerLine>0&&c>ob.O.maxItemsPerLine&&(c=ob.O.maxItemsPerLine),1>c&&(c=1),c}
// GRID LAYOUT
function ga(){var a=0,b=0,c=0,d=ob.O.thumbnailGutterHeight,e=ob.$E.conTnParent.width(),f=fa(),g=0,h=0,i=0,j=[],k=0;ob.L.nbMaxTnPerRow=fa();var l=new Date;
// pagination - max lines per page mode
if(ob.pgMaxLinesPerPage>0&&ob.tn.outerWidth.get()>0&&f!=ob.pgMaxNbThumbnailsPerRow){// max number of thumbnails per line has changed --> render the gallery again
ob.pgMaxNbThumbnailsPerRow=f;var m=ob.$E.conPagin.data("galleryIdx");return void pa(m,0)}var n=ob.$E.conTn.find(".nanoGalleryThumbnailContainer"),o=n.length;"justified"==ob.O.thumbnailAlignment?(f=Math.min(f,o),c=1==f?0:(e-f*ob.tn.outerWidth.get())/(f-1)):c=ob.O.thumbnailGutterWidth,ob.O.RTL&&(
// first loop to retrieve the width of the area
n.each(function(){var e=jQuery(this),g=e.data("index");if(void 0!==g){if(0!=b)return!1;a=k*(ob.tn.outerWidth.get()+c),j[k]=a,i=a,k++,k>=f&&(k=0,b+=ob.tn.outerHeight.get()+d)}}),e=i+ob.tn.outerWidth.get(),b=0,k=0);var p=[],q=0;n.each(function(){var l=jQuery(this),m=l.data("index");if(void 0!==m){q=m,0==b?(a=k*(ob.tn.outerWidth.get()+c),j[k]=a,i=a):(a=j[k],h=b);var n=a;ob.O.RTL&&(n=parseInt(e)-a-ob.tn.outerWidth.get()),p.push({$e:l,t:b,l:n,item:ob.I[m]}),
// $this.css({ top: curPosY , left: x });
// ThumbnailAppear($this, G.I[n], cnt);
k++,k>=f&&(k=0,b+=ob.tn.outerHeight.get()+d),g++}});for(var r=p.length,h=0,s=0;r>s;s++)p[s].$e.css({top:p[s].t,left:p[s].l}),ha(p[s].$e,p[s].item,s),h=p[s].t;p=[],ob.$E.conTn.width(i+ob.tn.outerWidth.get()).height(h+ob.tn.outerHeight.get()),ob.O.debugMode&&console.log("ResizeGalleryGrid: "+(new Date-l))}function ha(a,b,c){
// if( $this.css('opacity') == 0 ) {    // ==> DO NOT USE / TOO SLOW
a.hasClass("nanogalleryHideElement")&&(a.removeClass("nanogalleryHideElement"),ob.O.thumbnailDisplayTransition?"function"==typeof ob.O.fnThumbnailDisplayEffect?ob.O.fnThumbnailDisplayEffect(a,b,0):setTimeout(function(){window.requestAnimationFrame(function(){ia(a)})},c*ob.tn.displayInterval):a.css({opacity:1}))}function ia(a){var c=new b;c.tween({from:{o:0},to:{o:1},duration:200,step:function(b){a.css({opacity:b.o})},finish:function(b){a.css({opacity:b.o})}})}function ja(a){if(ob.O.galleryToolbarWidthAligned&&void 0!==ob.$E.conNavBCon){var b=ob.$E.conTn.outerWidth(!0);
//if( pageNumber > 0 ) {
ob.$E.conNavBCon.width()<b?ob.$E.conNavBCon.width(b):ob.$E.conNavBCon.width(b)}}
// thumbnail image lazy load
function ka(){var a=ob.$E.conTn.find(".nanoGalleryThumbnailContainer").filter(function(){return kb(jQuery(this),ob.tn.lazyLoadTreshold)});jQuery(a).each(function(){var a=jQuery(this).find("img");if(a.attr("src")==ob.emptyGif){var b=jQuery(this).data("index");if(void 0==b||void 0==ob.I[b])return;a.attr("src",""),a.attr("src",ob.I[b].thumbImg().src)}})}
// ###################
// ##### GALLERY #####
// ###################
// Display pagination
function la(b,c){if(void 0!=ob.$E.conPagin){
//if( G.tn.settings.getH() == 'auto' || G.tn.settings.getW() == 'auto' ) { return; }
if(ob.$E.conPagin.children().remove(),0==ob.pgMaxLinesPerPage||"auto"==ob.tn.settings.getH()||"auto"==ob.tn.settings.getW())
// Hide pagination container, if not used.
return void ob.$E.conPagin.hide();
// Must show the container for width calculation to work.
ob.$E.conPagin.show(),ob.$E.conPagin.data("galleryIdx",b),ob.$E.conPagin.data("currentPageNumber",c);var d=0,e=0;if(!ob.O.paginationDots&&c>0){var f=jQuery('<div class="paginationPrev">'+(ob.O.paginationDots?"":ob.i18nTranslations.paginationPrevious)+"</div>").appendTo(ob.$E.conPagin);e+=jQuery(f).outerWidth(!0),f.click(function(a){na()})}var g=0;
// only one page -> do not display anything
// if( n2==1 ) { return; }
if(
// pagination - max lines per page mode
ob.pgMaxLinesPerPage>0&&"auto"!=ob.tn.settings.getH()&&"auto"!=ob.tn.settings.getW()&&(d=Math.ceil(ob.I[b].contentLength/(ob.pgMaxLinesPerPage*ob.pgMaxNbThumbnailsPerRow))),
// no previous/next
ob.O.paginationDots?g=0:c>=5?(g=c-5,d>c+6&&(d=c+6)):d>10&&(d=10),1==d)
// Hide pagination container, if not used.
return void ob.$E.conPagin.hide();for(var h=g;d>h;h++){var i="";h==c&&(i=" currentPage");var j=jQuery('<div class="paginationItem'+i+'">'+(ob.O.paginationDots?"":h+1)+"</div>").appendTo(ob.$E.conPagin);j.data("pageNumber",h),e+=j.outerWidth(!0),j.click(function(b){var c=ob.$E.conPagin.data("galleryIdx"),d=jQuery(this).data("pageNumber");lb(ob.$E.base,0)||a("html, body").animate({scrollTop:ob.$E.base.offset().top},200),pa(c,d)})}if(!ob.O.paginationDots&&d>c+1){var k=jQuery('<div class="paginationNext">'+(ob.O.paginationDots?"":ob.i18nTranslations.paginationNext)+"</div>").appendTo(ob.$E.conPagin);e+=k.outerWidth(!0),k.click(function(a){ma()})}ob.$E.conPagin.width(e)}}function ma(){var b=ob.$E.conPagin.data("galleryIdx"),c=0;
// pagination - max lines per page mode
ob.pgMaxLinesPerPage>0&&(c=ob.I[b].contentLength/(ob.pgMaxLinesPerPage*ob.pgMaxNbThumbnailsPerRow)),n2=Math.ceil(c);var d=ob.$E.conPagin.data("currentPageNumber");d<n2-1?d++:d=0,lb(ob.$E.base,0)||a("html, body").animate({scrollTop:ob.$E.base.offset().top},200),pa(b,d)}function na(){var b=ob.$E.conPagin.data("galleryIdx"),c=0;
// pagination - max lines per page mode
ob.pgMaxLinesPerPage>0&&(c=ob.I[b].contentLength/(ob.pgMaxLinesPerPage*ob.pgMaxNbThumbnailsPerRow)),n2=Math.ceil(c);var d=ob.$E.conPagin.data("currentPageNumber");d>0?d--:d=n2-1,lb(ob.$E.base,0)||a("html, body").animate({scrollTop:ob.$E.base.offset().top},250),pa(b,d)}function oa(a){var b=ob.I.length,c=0,d=a||ob.GetCurrentViewedItemIdx();if(-1!==d){for(var e=0;b>e;e++)ob.I[e].albumID==ob.I[d].albumID&&"image"==ob.I[e].kind&&c++;return c}return 0}function pa(a,c){ob.curAlbumIdx=-1,void 0==ob.$E.conPagin&&ob.$E.conPagin.children().remove();var d=ob.$E.conTn.parent(),e=new b;e.tween({to:{opacity:0},from:{opacity:1},attachment:{$e:d},duration:150,step:function(a,b){b.$e.css(a)},finish:function(b,d){d.$e.css({opacity:0}),ob.containerThumbnailsDisplayed=!1,
//      G.$E.conTn.off().empty();
ob.$E.conTn.hide(0).off().show(0).html("");for(var e=ob.I.length,f=0;e>f;f++)ob.I[f].$Elts=[],ob.I[f].$elt=null,ob.I[f].hoverInitDone=!1,ob.I[f].hovered=!1;ob.$E.conTnParent.css({left:0,opacity:1}),l(ob.$E.conTn[0],0),qa(a,c,ra)}})}function qa(a,b,c){if(ob.O.debugMode&&console.timeline&&console.timeline("nanoGALLERY"),ob.startDateTime=new Date,-1!=a&&void 0!=ob.I[a]){ob.I[a].paginationLastPage=b,ob.I[a].paginationLastWidth=ob.$E.conTnParent.width();var d=ob.I.length,e=!1;/*if( G.O.thumbnailLabel.get('position') == 'onBottom'  ) {
        for(var i=0; i<l; i++ ) {
          if( G.I[i].albumID == G.I[albumIdx].albumID && G.I[i].description.length > 0 ) { foundDesc=true; }
        }
      }*/
// var G.galleryItemsCount=0;
ob.galleryItemsCount=0;var f=0,g=0,h=0;ob.pgMaxLinesPerPage>0&&"auto"!=ob.tn.settings.getH()&&"auto"!=ob.tn.settings.getW()&&(g=b*ob.pgMaxLinesPerPage*ob.pgMaxNbThumbnailsPerRow,h=g+ob.pgMaxLinesPerPage*ob.pgMaxNbThumbnailsPerRow),aa();var i=!1,j=!1,k=0;!function(){ob.toRender=[];for(var h=0;h<ob.O.galleryRenderStep;h++){if(k>=d)return void c(a,b);var l=ob.I[k];if(l.albumID==ob.I[a].GetID()){
// pagination - max lines per page mode
if(f++,ob.pgMaxLinesPerPage>0&&"auto"!=ob.tn.settings.getH()&&"auto"!=ob.tn.settings.getW()&&ob.galleryItemsCount+1>ob.pgMaxLinesPerPage*ob.pgMaxNbThumbnailsPerRow)return void c(a,b);if(f>g){ob.galleryItemsCount++;
// If the item is does not exists anymore
var m=sa(l,k,e),n=m.e$;
// image lazy load
ob.O.thumbnailLazyLoad&&!m.cIS&&(i||(kb(n,ob.tn.lazyLoadTreshold)?(l.$getElt("img").attr("src",""),// firefox bug workaround
l.$getElt("img").attr("src",l.thumbImg().src),j=!0):j&&(i=!0)))}}k++}var o=ob.toRender.length;if(o>0)for(var h=0;o>h;h++);d>k?
//setGalleryToolbarWidth(pageNumber);
setTimeout(arguments.callee,2):c(a,b)}()}}function ra(a,b){
//if( G.O.thumbnailHeight == 'auto' || G.O.thumbnailWidth == 'auto' || G.O.thumbnailWidth == 'autoUpScale' ) {
ca(),
//}
// SetGalleryWidth(pageNumber);
//setGalleryToolbarWidth(pageNumber);
la(a,b),ob.containerThumbnailsDisplayed=!0,ob.curAlbumIdx=a,"function"==typeof ob.O.fnInitGallery&&ob.O.fnInitGallery(a,b),ob.O.debugMode&&console.timeline&&(console.log("End-render: "+(new Date-ob.startDateTime)),console.timelineEnd("nanoGALLERY")),
// Refresh select mode
ob.SetSelectMode()}function sa(a,b,c){var d=[],f=0;a.$Elts=[];var g="",h=" nanogalleryHideElement";ob.O.thumbnailLazyLoad&&"auto"==ob.tn.settings.getW()&&(g="top:0px;left:0px;"),d[f++]='<div class="nanoGalleryThumbnailContainer'+h+' nGEvent" style="display:block;opacity:0;'+g+'" ><div class="subcontainer nGEvent" style="display:block;">';var i=!1,j=ob.emptyGif;("auto"==ob.tn.settings.getH()&&0==ob.I[b].thumbImg().height||"auto"==ob.tn.settings.getW()&&0==ob.I[b].thumbImg().width)&&(i=!0),(!ob.O.thumbnailLazyLoad||i)&&(j=a.thumbImg().src);var k=ta(a),l=ua(a);if("auto"==ob.tn.settings.getH()?d[f++]='<div class="imgContainer nGEvent" style="width:'+ob.tn.settings.getW()+'px;"><img class="image nGEvent" src="'+j+'" alt="'+k+'" style="max-width:'+ob.tn.settings.getW()+'px;"></div>':"auto"==ob.tn.settings.getW()?d[f++]='<div class="imgContainer nGEvent" style="height:'+ob.tn.settings.getH()+'px;"><img class="image nGEvent" src="'+j+'" alt="'+k+'" style="max-height:'+ob.tn.settings.getH()+'px;" ></div>':d[f++]='<div class="imgContainer nGEvent" style="width:'+ob.tn.settings.getW()+"px;height:"+ob.tn.settings.getH()+'px;"><img class="image nGEvent" src="'+j+'" alt="'+k+'" style="max-width:'+ob.tn.settings.getW()+"px;max-height:"+ob.tn.settings.getH()+'px;" ></div>',"album"==a.kind){
// ALBUM
if(1==ob.O.thumbnailLabel.get("display")){if(a.contentLength>0)
// display content counter
switch(ob.O.thumbnailLabel.get("itemsCount")){case"title":k+=" "+ob.i18nTranslations.thumbnailLabelItemsCountPart1+'<span class="nGEvent">'+a.contentLength+"</span>"+ob.i18nTranslations.thumbnailLabelItemsCountPart2;break;case"description":l+=" "+ob.i18nTranslations.thumbnailLabelItemsCountPart1+'<span class="nGEvent">'+a.contentLength+"</span>"+ob.i18nTranslations.thumbnailLabelItemsCountPart2}d[f++]='<div class="labelImage nGEvent" style="width:'+ob.tn.settings.getW()+"px;"+(ob.O.RTL?"direction:RTL;":"")+("l1"==ob.curNavLevel?ob.tn.styleL1LabelImage:ob.tn.styleLabelImage)+'"><div class="labelFolderTitle labelTitle nGEvent" style="'+("l1"==ob.curNavLevel?ob.tn.styleL1FTitle:ob.tn.styleFTitle)+'">'+k+'</div><div class="labelDescription nGEvent" style="'+("l1"==ob.curNavLevel?ob.tn.styleL1Desc:ob.tn.styleDesc)+'">'+l+"</div></div>"}}else
// IMAGE
1==ob.O.thumbnailLabel.get("display")&&(c&&0==l.length&&"onBottom"==ob.O.thumbnailLabel.get("position")&&(l="&nbsp;"),d[f++]='<div class="labelImage nGEvent" style="width:'+ob.tn.settings.getW()+"px;"+(ob.O.RTL?"direction:RTL;":"")+("l1"==ob.curNavLevel?ob.tn.styleL1LabelImage:ob.tn.styleLabelImage)+'"><div class="labelImageTitle labelTitle nGEvent" style="'+("l1"==ob.curNavLevel?ob.tn.styleL1ITitle:ob.tn.styleITitle)+'">'+k+'</div><div class="labelDescription nGEvent" style="'+("l1"==ob.curNavLevel?ob.tn.styleL1Desc:ob.tn.styleDesc)+'">'+l+"</div></div>");
// checkbox for selection
if(d[f++]="</div>",ob.O.itemsSelectable){if(a.selected=!1,ob.O.keepSelection===!0)for(it in ob.selectedItems)ob.selectedItems[it].GetID()===a.GetID()&&(a.selected=!0);ob.O.showCheckboxes&&(checked="",a.selected&&(checked="checked"),d[f++]='<input class="ngChekbox" type="checkbox" '+checked+' style="position:absolute;z-index:999;'+ob.O.checkboxStyle+'">')}d[f++]="</div>";
// var $newDiv =jQuery(newElt.join('')).appendTo(G.$E.conTnHid); //.animate({ opacity: 1},1000, 'swing');  //.show('slow'); //.fadeIn('slow').slideDown('slow');
var m=jQuery(d.join("")).appendTo(ob.$E.conTnHid);//.animate({ opacity: 1},1000, 'swing');  //.show('slow'); //.fadeIn('slow').slideDown('slow');
"undefined"!=typeof a.selected&&a.selected===!0&&m.find(".subcontainer").addClass("selected"),a.$elt=m,m.data("index",b),a.$getElt("img").data("index",b),
// Custom init function
"function"==typeof ob.O.fnThumbnailInit&&ob.O.fnThumbnailInit(m,a,e());var n=m.detach();if(n.appendTo(ob.$E.conTn),i){
// ThumbnailOverInit($newDiv);     // init hover effects
var o=ngimagesLoaded(m);
//$newDiv.ngimagesLoaded().always( function( instance ) {
o.on("always",function(a){var b=ob.I[jQuery(a.images[0].img).data("index")];if(void 0!=b&&a.images[0].img.src!=ob.emptyGif){// warning: also fired for blank image --> ignore
var c=!1;b.thumbImg().height!=a.images[0].img.naturalHeight&&(b.thumbSetImgHeight(a.images[0].img.naturalHeight),b.thumbSetImgWidth(a.images[0].img.naturalWidth),c=!0),b.thumbImg().width!=a.images[0].img.naturalWidth&&(b.thumbSetImgHeight(a.images[0].img.naturalHeight),b.thumbSetImgWidth(a.images[0].img.naturalWidth),c=!0),c&&(za(b.$elt),// init hover effects
xa(b.$elt,b),Ba(b.$elt),ca())}})}else
//G.toRender.push({ $e:$newDiv, i:item });
za(m),// init hover effects
xa(m,a),Ba(m);return{e$:m,cIS:i}}function ta(a){var b=a.title;return 1==ob.O.thumbnailLabel.get("display")&&((void 0===b||0==b.length)&&(b="&nbsp;"),""!=ob.i18nTranslations.thumbnailImageTitle&&(b=ob.i18nTranslations.thumbnailImageTitle),ob.O.thumbnailLabel.get("titleMaxLength")>3&&b.length>ob.O.thumbnailLabel.get("titleMaxLength")&&(b=b.substring(0,ob.O.thumbnailLabel.get("titleMaxLength"))+"...")),b}function ua(a){var b="";return 1==ob.O.thumbnailLabel.get("displayDescription")&&(b="album"==a.kind?""!=ob.i18nTranslations.thumbnailImageDescription?ob.i18nTranslations.thumbnailAlbumDescription:a.description:""!=ob.i18nTranslations.thumbnailImageDescription?ob.i18nTranslations.thumbnailImageDescription:a.description,ob.O.thumbnailLabel.get("descriptionMaxLength")>3&&b.length>ob.O.thumbnailLabel.get("descriptionMaxLength")&&(b=b.substring(0,ob.O.thumbnailLabel.get("descriptionMaxLength"))+"...")),b}function va(a,b,c){var d=a.$elt,e=d.find("input[type=checkbox]");"image"!==ob.selectMode&&"album"!==ob.selectMode||a.kind===ob.selectMode?("undefined"==typeof b?a.selected=!a.selected:a.selected=b,c!==!1&&e.prop("checked",a.selected),a.selected?a.$getElt(".subcontainer").addClass("selected"):a.$getElt(".subcontainer").removeClass("selected")):(a.selected=!1,e.prop("checked",!1),a.$getElt(".subcontainer").removeClass("selected")),wa(),"function"==typeof ob.O.fnThumbnailSelection&&ob.O.fnThumbnailSelection(d,a)}function wa(){var a;ob.O.keepSelection===!0&&(a=ob.selectedItems.slice(0)),ob.selectedItems=[];for(var b=ob.I.length,c=0;b>c;c++)ob.I[c].selected===!0&&ob.selectedItems.push(ob.I[c]);if(ob.O.keepSelection===!0){for(c in a){alreadyExists=!1;for(var d=0;b>d;d++)ob.I[d].GetID()===a[c].GetID()&&(alreadyExists=!0);alreadyExists===!1&&ob.selectedItems.push(a[c])}a=[]}ob.selectedItems.length>0||1==ob.selectModeForce?(ob.I.forEach(function(a){null===a.$elt||a.$elt.hasClass("selectable")||(1==ob.selectModeForce&&a.kind===ob.selectMode||1==ob.selectMode)&&a.$elt.addClass("selectable")}),ob.selectMode!==!0&&"image"!==ob.selectMode&&"album"!==ob.selectMode&&(ob.selectMode=!0)):(ob.I.forEach(function(a){null!==a.$elt&&a.$elt.removeClass("selectable")}),ob.selectMode=!1),"function"==typeof ob.O.fnChangeSelectMode&&ob.O.fnChangeSelectMode(ob.selectMode)}function xa(a,b){if("auto"==ob.tn.settings.getH()){
// CASCADING LAYOUT
if(b.thumbImg().height>0){var c=b.thumbImg().height/b.thumbImg().width;b.$getElt(".imgContainer").height(ob.tn.settings.getW()*c),//.css({'overflow':'hidden'});
"onBottom"==ob.O.thumbnailLabel.get("position")?(b.thumbLabelHeight=b.$getElt(".labelImage").outerHeight(!0),b.thumbFullHeight=ob.tn.settings.getW()*c+b.thumbLabelHeight+ob.tn.borderHeight+ob.tn.imgcBorderHeight,a.width(ob.tn.outerWidth.get()-ob.tn.borderWidth).height(b.thumbFullHeight-ob.tn.borderHeight),b.$getElt(".labelImage").css({position:"absolute",top:"",bottom:"0px"})):(b.thumbFullHeight=ob.tn.settings.getW()*c+b.thumbLabelHeight+ob.tn.borderHeight+ob.tn.imgcBorderHeight,a.width(ob.tn.outerWidth.get()-ob.tn.borderWidth).height(b.thumbFullHeight-ob.tn.borderHeight))}b.thumbFullWidth=ob.tn.outerWidth.get(),b.$getElt(".subcontainer").width(ob.tn.outerWidth.get()-ob.tn.borderWidth).height(b.thumbFullHeight-ob.tn.borderHeight)}else
// JUSTIFIED LAYOUT
if("auto"==ob.tn.settings.getW()){return;
// var ratio=item.thumbImg().height/item.thumbImg().width;
var c}else
// GRID LAYOUT
b.thumbFullHeight=ob.tn.outerHeight.get(),//+G.tn.labelHeight.get();  //G.tn.defaultFullHeight;
b.thumbFullWidth=ob.tn.outerWidth.get(),//G.tn.defaultFullWidth;
"onBottom"==ob.O.thumbnailLabel.get("position")?a.width(b.thumbFullWidth-ob.tn.borderWidth).height(b.thumbFullHeight-ob.tn.borderHeight):a.width(b.thumbFullWidth-ob.tn.borderWidth).height(b.thumbFullHeight-ob.tn.borderHeight),b.$getElt(".subcontainer").width(b.thumbFullWidth-ob.tn.borderWidth).height(b.thumbFullHeight-ob.tn.borderHeight)}function ya(){for(var a=ob.I.length,b=0;a>b;b++)ob.I[b].hovered&&Ja(ob.I[b].$elt)}
// init hover effects
function za(a){var b=a.data("index");if(void 0!=b){// required because can be fired on ghost elements
var c=ob.I[b];for("function"==typeof ob.O.fnThumbnailHoverInit&&ob.O.fnThumbnailHoverInit(a,c,e()),Da(c),j=0;j<ob.tn.getHE().length;j++)switch(ob.tn.getHE()[j].name){case"imageSplit4":var d=c.$getElt(".subcontainer"),f=c.$getElt(".labelImage"),g=c.$getElt(".imgContainer");g.css({position:"absolute"}),d.css({overflow:"hidden",position:"relative",width:"100%",height:"100%"}),d.prepend(g.clone()),d.prepend(c.$getElt(".imgContainer",!0).clone()),g=c.$getElt(".imgContainer",!0),mb("",g),Ca(c,"imgContainer0",g.eq(0)),Fa(c,"imgContainer0"),Ca(c,"imgContainer1",g.eq(1)),Fa(c,"imgContainer1"),Ca(c,"imgContainer2",g.eq(2)),Fa(c,"imgContainer2"),Ca(c,"imgContainer3",g.eq(3)),Fa(c,"imgContainer3");break;case"imageSplitVert":var d=c.$getElt(".subcontainer"),g=c.$getElt(".imgContainer");g.css({position:"absolute"}),d.css({overflow:"hidden",position:"relative"}),//, width:'100%', height:'100%'});
d.prepend(g.clone()),g=c.$getElt(".imgContainer",!0),mb("",g),Ca(c,"imgContainer0",g.eq(0)),Fa(c,"imgContainer0"),Ca(c,"imgContainer1",g.eq(1)),Fa(c,"imgContainer1");break;case"labelSplit4":var d=c.$getElt(".subcontainer"),f=c.$getElt(".labelImage").css({top:0,bottom:0});d.css({overflow:"hidden",position:"relative"}),f.clone().appendTo(d),c.$getElt(".labelImage",!0).clone().appendTo(d),f=c.$getElt(".labelImage",!0),Ca(c,"labelImage0",f.eq(0)),Fa(c,"labelImage0"),Ca(c,"labelImage1",f.eq(1)),Fa(c,"labelImage1"),Ca(c,"labelImage2",f.eq(2)),Fa(c,"labelImage2"),Ca(c,"labelImage3",f.eq(3)),Fa(c,"labelImage3");break;case"labelSplitVert":var d=c.$getElt(".subcontainer"),f=c.$getElt(".labelImage");d.css({overflow:"hidden",position:"relative"}),f.clone().appendTo(d),f=c.$getElt(".labelImage",!0),Ca(c,"labelImage0",f.eq(0)),Fa(c,"labelImage0"),Ca(c,"labelImage1",f.eq(1)),Fa(c,"labelImage1");break;case"labelAppearSplit4":var d=c.$getElt(".subcontainer");f=c.$getElt(".labelImage"),f.css({left:0,top:0,right:0,bottom:0}),d.css({overflow:"hidden",position:"relative"}),f.clone().appendTo(d),c.$getElt(".labelImage",!0).clone().appendTo(d),f=c.$getElt(".labelImage",!0);var h=Ca(c,"labelImage0",f.eq(0));h.translateX=-c.thumbFullWidth/2,h.translateY=-c.thumbFullHeight/2,Fa(c,"labelImage0"),h=Ca(c,"labelImage1",f.eq(1)),h.translateX=c.thumbFullWidth/2,h.translateY=-c.thumbFullHeight/2,Fa(c,"labelImage1"),h=Ca(c,"labelImage2",f.eq(2)),h.translateX=c.thumbFullWidth/2,h.translateY=c.thumbFullHeight/2,Fa(c,"labelImage2"),h=Ca(c,"labelImage3",f.eq(3)),h.translateX=-c.thumbFullWidth/2,h.translateY=c.thumbFullHeight/2,Fa(c,"labelImage3");break;case"labelAppearSplitVert":var d=c.$getElt(".subcontainer"),f=c.$getElt(".labelImage");d.css({overflow:"hidden",position:"relative"}),f.clone().appendTo(d),f=c.$getElt(".labelImage",!0),Ca(c,"labelImage0",f.eq(0)).translateX=-c.thumbFullWidth/2,Fa(c,"labelImage0"),Ca(c,"labelImage1",f.eq(1)).translateX=c.thumbFullWidth/2,Fa(c,"labelImage1");break;case"imageScale150Outside":ob.$E.base.css({overflow:"visible"}),ob.$E.conTn.css({overflow:"visible"}),a.css({overflow:"visible"}),c.$getElt(".subcontainer").css({overflow:"visible"}),c.$getElt(".imgContainer").css({overflow:"visible"}),Ca(c,"img0",c.$getElt("img")),Fa(c,"img0"),mb(c.$getElt(".imgContainer"),c.$getElt(".labelImage"));break;case"scale120":ob.$E.base.hasClass("fullpage")||ob.$E.base.css({overflow:"visible"}),ob.$E.conTn.css({overflow:"visible"}),Ca(c,"base",a),Fa(c,"base");break;case"scaleLabelOverImage":var i=c.$getElt(".imgContainer"),k=c.$getElt(".labelImage");mb(i,k),k.css({opacity:0}),Ca(c,"labelImage0",k).scale=50,Fa(c,"labelImage0"),Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"overScale":a.css({overflow:"hidden"});var i=c.$getElt(".imgContainer"),k=c.$getElt(".labelImage");mb("",k),k.css({opacity:0}),i.css({opacity:1}),Ca(c,"labelImage0",k).scale=150,Fa(c,"labelImage0"),Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"overScaleOutside":ob.$E.base.hasClass("fullpage")||ob.$E.base.css({overflow:"visible"}),ob.$E.conTn.css({overflow:"visible"}),a.css({overflow:"visible"});var i=c.$getElt(".imgContainer"),k=c.$getElt(".labelImage");mb("",k),k.css({opacity:0}),i.css({opacity:1}),Ca(c,"labelImage0",k).scale=150,Fa(c,"labelImage0"),Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"rotateCornerBL":a.css({overflow:"hidden"});var i=c.$getElt(".labelImage");i.css({opacity:1}),i[0].style[ob.CSStransformName+"Origin"]="100% 100%",Ca(c,"labelImage0",i).rotateZ=-90,Fa(c,"labelImage0"),i=c.$getElt(".imgContainer"),i[0].style[ob.CSStransformName+"Origin"]="100% 100%",Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"rotateCornerBR":a.css({overflow:"hidden"});var i=c.$getElt(".labelImage");i.css({opacity:1}),i[0].style[ob.CSStransformName+"Origin"]="0% 100%",Ca(c,"labelImage0",i).rotateZ=90,Fa(c,"labelImage0"),i=c.$getElt(".imgContainer"),i[0].style[ob.CSStransformName+"Origin"]="0 100%",Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"imageRotateCornerBL":var i=c.$getElt(".imgContainer");mb(a,i),a.css({overflow:"hidden"}),c.$getElt(".labelImage").css({opacity:1}),i[0].style[ob.CSStransformName+"Origin"]="bottom right",Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"imageRotateCornerBR":var i=c.$getElt(".imgContainer");mb(a,i),a.css({overflow:"hidden"}),c.$getElt(".labelImage").css({opacity:1}),i[0].style[ob.CSStransformName+"Origin"]="0 100%",Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"slideUp":a.css({overflow:"hidden"}),i=c.$getElt(".labelImage"),i.css({opacity:1,top:0}),Ca(c,"labelImage0",i).translateY=c.thumbFullHeight,Fa(c,"labelImage0"),i=c.$getElt(".imgContainer"),i.css({left:0,top:0}),Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"slideDown":a.css({overflow:"hidden"}),i=c.$getElt(".labelImage"),i.css({opacity:1,top:0}),Ca(c,"labelImage0",i).translateY=-c.thumbFullHeight,Fa(c,"labelImage0"),i=c.$getElt(".imgContainer"),i.css({left:0,top:0}),Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"slideRight":a.css({overflow:"hidden"}),i=c.$getElt(".labelImage"),i.css({opacity:1,top:0}),Ca(c,"labelImage0",i).translateX=-c.thumbFullWidth,Fa(c,"labelImage0"),i=c.$getElt(".imgContainer"),i.css({left:0,top:0}),Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"slideLeft":a.css({overflow:"hidden"}),i=c.$getElt(".labelImage"),i.css({opacity:1,top:0}),Ca(c,"labelImage0",i).translateX=c.thumbFullWidth,Fa(c,"labelImage0"),i=c.$getElt(".imgContainer"),i.css({left:0,top:0}),Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"imageSlideUp":case"imageSlideDown":case"imageSlideRight":case"imageSlideLeft":i=c.$getElt(".imgContainer"),mb(a,i),a.css({overflow:"visible"}),c.$getElt(".labelImage").css({opacity:1}),i.css({left:0,top:0}),Ca(c,"imgContainer0",i),Fa(c,"imgContainer0");break;case"labelAppear":case"labelAppear75":var l="rgb("+ob.custGlobals.oldLabelRed+","+ob.custGlobals.oldLabelGreen+","+ob.custGlobals.oldLabelBlue+",0.01)";c.$getElt(".labelImage").css({backgroundColor:l}),
//item.$getElt('.labelImage')[0].style.setProperty( 'backgroundColor',c, 'important' );
"album"==c.kind?c.$getElt(".labelFolderTitle").css({opacity:0}):c.$getElt(".labelImageTitle").css({opacity:0}),c.$getElt(".labelDescription").css({opacity:0});break;case"descriptionAppear":c.$getElt(".labelDescription").css({opacity:0});break;case"labelSlideUpTop":a.css({overflow:"hidden"}),c.$getElt(".labelImage").css({top:0,bottom:0}),Ca(c,"labelImage0",c.$getElt(".labelImage")).translateY=c.thumbFullHeight,Fa(c,"labelImage0");break;case"labelSlideUp":a.css({overflow:"hidden"}),Ca(c,"labelImage0",c.$getElt(".labelImage")).translateY=c.thumbFullHeight,Fa(c,"labelImage0");break;case"labelSlideDown":a.css({overflow:"hidden"}),Ca(c,"labelImage0",c.$getElt(".labelImage")).translateY=-c.thumbFullHeight,Fa(c,"labelImage0");break;case"descriptionSlideUp":a.css({overflow:"hidden"});var m="album"==c.kind?c.$getElt(".labelFolderTitle").outerHeight(!0):c.$getElt(".labelImageTitle").outerHeight(!0);c.$getElt(".labelDescription").css({opacity:0}),c.$getElt(".labelImage").css({height:m}),Ca(c,"labelImage0",c.$getElt(".labelImage")),//.translateY=-lh;
Fa(c,"labelImage0");break;case"imageExplode":
// G.$E.base.css('overflow', 'visible');
// G.$E.conTn.css('overflow', 'visible');
// $e.css('overflow', 'visible');
mb("",a),mb(c.$getElt(".labelImage"),c.$getElt(".imgContainer"));for(var d=c.$getElt(".subcontainer"),b=7,//$e.outerHeight(true);
g=(c.thumbFullHeight,c.$getElt(".imgContainer")),n=g.outerWidth(!0)/b,o=g.outerHeight(!0),o=g.outerHeight(!0)/b,p=0;b>p;p++)for(var l=0;b>l;l++){var q="rect("+o*p+"px, "+n*(l+1)+"px, "+o*(p+1)+"px, "+n*l+"px)";g.clone().appendTo(d).css({top:0,scale:1,clip:q,left:0,position:"absolute"}).data("ngScale",1)}g.remove();break;case"imageFlipHorizontal":switch(ob.O.thumbnailLabel.get("position")){case"overImageOnTop":c.$getElt(".labelImage").css({top:-ob.tn.imgcBorderHeight/2,bottom:ob.tn.imgcBorderWidth/2,left:0,right:0});break;case"overImageOnMiddle":c.$getElt(".labelImage").css({top:-ob.tn.imgcBorderHeight/2,bottom:ob.tn.imgcBorderWidth/2,left:0,right:0});break;case"overImageOnBottom":default:c.$getElt(".labelImage").css({bottom:ob.tn.imgcBorderWidth/2,left:0,right:0})}ob.$E.base.hasClass("fullpage")||ob.$E.base.css({overflow:"visible"}),ob.$E.conTn.css({overflow:"visible"}),a.css({overflow:"visible"}),mb("",a),mb(c.$getElt(".labelImage"),c.$getElt(".imgContainer"));var i=c.$getElt(".subcontainer");i.css({overflow:"visible"}),i[0].style[ob.CSStransformStyle]="preserve-3d";var b=Math.round(1.2*c.thumbFullHeight)+"px";i[0].style[ob.CSSperspective]=b,
// item.$getElt('.imgContainer').data('ngRotateX','0');
i=c.$getElt(".imgContainer"),i[0].style[ob.CSSbackfaceVisibilityName]="hidden",
// $t[0].style[G.CSStransformName]= 'rotateX:(0deg)';
Ca(c,"imgContainer0",i),Fa(c,"imgContainer0"),a.find(".image")[0].style[ob.CSSbackfaceVisibilityName]="hidden",
// item.$getElt('.labelImage').data('ngRotateX','180');
i=c.$getElt(".labelImage"),i[0].style[ob.CSSbackfaceVisibilityName]="hidden",
// $t[0].style[G.CSStransformName] = 'rotateX(180deg)';
Ca(c,"labelImage0",i).rotateX=180,Fa(c,"labelImage0");break;case"imageFlipVertical":switch(ob.O.thumbnailLabel.get("position")){case"overImageOnTop":c.$getElt(".labelImage").css({top:-ob.tn.imgcBorderHeight/2,bottom:ob.tn.imgcBorderWidth/2,left:0,right:0});break;case"overImageOnMiddle":c.$getElt(".labelImage").css({top:-ob.tn.imgcBorderHeight/2,bottom:ob.tn.imgcBorderWidth/2,left:0,right:0});break;case"overImageOnBottom":default:c.$getElt(".labelImage").css({bottom:ob.tn.imgcBorderWidth/2,left:0,right:0})}ob.$E.base.hasClass("fullpage")||ob.$E.base.css({overflow:"visible"}),ob.$E.conTn.css({overflow:"visible"}),a.css({overflow:"visible"}),mb("",a),mb(c.$getElt(".labelImage"),c.$getElt(".imgContainer"));var i=c.$getElt(".subcontainer");i.css({overflow:"visible"}),i[0].style[ob.CSStransformStyle]="preserve-3d";var b=Math.round(1.2*c.thumbFullWidth)+"px";i[0].style[ob.CSSperspective]=b,i=c.$getElt(".imgContainer"),i[0].style[ob.CSSbackfaceVisibilityName]="hidden",Ca(c,"imgContainer0",i),Fa(c,"imgContainer0"),a.find(".image")[0].style[ob.CSSbackfaceVisibilityName]="hidden",i=c.$getElt(".labelImage"),i[0].style[ob.CSSbackfaceVisibilityName]="hidden",Ca(c,"labelImage0",i).rotateY=180,Fa(c,"labelImage0");break;
// case 'flipHorizontal':  // ONLY TO TEST --> hover issue
// var n= Math.round(item.thumbFullHeight*1.2) + 'px';
// item.$getElt('.labelImage').css({ perspective: n, rotateX: '180deg', 'backface-visibility': 'hidden', 'opacity':'1', 'height':'100%' });
// break;
// case 'flipVertical':  // OONLY TO TEST --> hover issue
// var n= Math.round(item.thumbFullWidth*1.2) + 'px';
// item.$getElt('.subcontainer').css({ perspective: n, rotateY: '0deg'});
// item.$getElt('.labelImage').css({ perspective: n, rotateY: '180deg', 'backface-visibility': 'hidden', 'opacity':'1', 'height':'100%' });
// break;
case"imageScale150":a.css({overflow:"hidden"}),Ca(c,"img0",c.$getElt("img")),Fa(c,"img0");break;case"imageScaleIn80":a.css({overflow:"hidden"}),Ca(c,"img0",c.$getElt("img")).scale=120,Fa(c,"img0");break;case"imageSlide2Up":case"imageSlide2Down":case"imageSlide2Left":case"imageSlide2Right":case"imageSlide2UpRight":case"imageSlide2UpLeft":case"imageSlide2DownRight":case"imageSlide2DownLeft":a.css({overflow:"hidden"}),c.customData.hoverEffectRDir=ob.tn.getHE()[j].name,Aa(a,c);break;case"imageSlide2Random":a.css({overflow:"hidden"});var r=["imageSlide2Up","imageSlide2Down","imageSlide2Left","imageSlide2Left","imageSlide2UpRight","imageSlide2UpLeft","imageSlide2DownRight","imageSlide2DownLeft"];c.customData.hoverEffectRDir=r[Math.floor(Math.random()*r.length)],Aa(a,c)}c.hoverInitDone=!0}}function Aa(a,b){
// var w=item.thumbImgWidth;    //$e.outerWidth(true),
// h=item.thumbImg().height,       //$e.outerHeight(true);
var c=b.thumbFullWidth,//$e.outerWidth(true),
d=b.thumbFullHeight,e=Ca(b,"img0",b.$getElt("img"));switch(e.scale=140,b.customData.hoverEffectRDir){case"imageSlide2Up":
// c={top:h*.1, left: -w*.1};
// t.translateY=h*.1;
// t.translateX=-w*.1;
e.translateY=b.thumbFullHeight<1.4*b.thumbImg().height?(1.4*b.thumbImg().height-b.thumbFullHeight)/2:0,e.translateX=b.thumbFullWidth<1.4*b.thumbImg().width?-(1.4*b.thumbImg().width-b.thumbFullWidth)/2:0;break;case"imageSlide2Down":
// c={top:-h*.1, left: -w*.1};
// t.translateY=-h*.1;
var f=b.thumbFullHeight<1.4*b.thumbImg().height?Math.min((1.4*b.thumbImg().height-b.thumbFullHeight)/2*.1,.1*d):0;e.translateY=-f;var g=b.thumbFullWidth<1.4*b.thumbImg().width?Math.min((1.4*b.thumbImg().width-b.thumbFullWidth)/2*.1,.1*c):0;e.translateX=g;break;case"imageSlide2Left":
// c={top:-h*.1, left: w*.1};
e.translateY=.1*-d,e.translateX=.1*c;break;case"imageSlide2Right":
// c={top:-h*.1, left: -w*.1};
e.translateY=.1*-d,e.translateX=.1*-c;break;case"imageSlide2UpRight":
// c={top:h*.05, left: -w*.05};
e.translateY=.05*d,e.translateX=.05*-c;break;case"imageSlide2UpLeft":
// c={top:h*.05, left: w*.05};
e.translateY=.05*d,e.translateX=.05*c;break;case"imageSlide2DownRight":
// c={top:-h*.05, left: -w*.05};
e.translateY=.05*-d,e.translateX=.05*-c;break;case"imageSlide2DownLeft":
// c={top:-h*.05, left: w*.05};
e.translateY=.05*-d,e.translateX=.05*c}Fa(b,"img0")}function Ba(a){var b=a.data("index");if(void 0!=b){// required because can be fired on ghost elements
var c=ob.I[b];if(!c.hoverInitDone)return void za(a);for("function"==typeof ob.O.fnThumbnailHoverResize&&ob.O.fnThumbnailHoverResize(a,c,e()),j=0;j<ob.tn.getHE().length;j++)switch(ob.tn.getHE()[j].name){case"imageSplit4":var d=c.thumbFullWidth-ob.tn.borderWidth-ob.tn.imgcBorderWidth,f=c.thumbFullHeight-ob.tn.borderHeight-ob.tn.imgcBorderHeight,g=c.$getElt(".imgContainer"),h="rect(0px, "+Math.ceil(d/2)+"px, "+Math.ceil(f/2)+"px, 0px)";g.eq(0).css({clip:h}),h="rect(0px, "+d+"px, "+Math.ceil(f/2)+"px, "+Math.ceil(d/2)+"px)",g.eq(1).css({clip:h}),h="rect("+Math.ceil(f/2)+"px, "+d+"px, "+f+"px, "+Math.ceil(d/2)+"px)",g.eq(2).css({clip:h}),h="rect("+Math.ceil(f/2)+"px, "+Math.ceil(d/2)+"px, "+f+"px, 0px)",g.eq(3).css({clip:h});break;case"imageSplitVert":var g=c.$getElt(".imgContainer"),d=c.thumbFullWidth-ob.tn.borderWidth-ob.tn.imgcBorderWidth,f=c.thumbFullHeight-ob.tn.borderHeight-ob.tn.imgcBorderHeight,h="rect(0px, "+Math.ceil(d/2)+"px, "+f+"px, 0px)";g.eq(0).css({clip:h}),h="rect(0px, "+d+"px, "+f+"px, "+Math.ceil(d/2)+"px)",g.eq(1).css({clip:h});break;case"labelSplit4":var d=c.thumbFullWidth-ob.tn.borderWidth-ob.tn.imgcBorderWidth,f=c.thumbFullHeight-ob.tn.borderHeight-ob.tn.imgcBorderHeight,i=c.$getElt(".labelImage");h="rect(0px, "+Math.ceil(d/2)+"px, "+Math.ceil(f/2)+"px, 0px)",i.eq(0).css({clip:h}),h="rect(0px, "+d+"px, "+Math.ceil(f/2)+"px, "+Math.ceil(d/2)+"px)",i.eq(1).css({clip:h}),h="rect("+Math.ceil(f/2)+"px, "+d+"px, "+f+"px, "+Math.ceil(d/2)+"px)",i.eq(2).css({clip:h}),h="rect("+Math.ceil(f/2)+"px, "+Math.ceil(d/2)+"px, "+f+"px, 0px)",i.eq(3).css({clip:h});break;case"labelSplitVert":var d=c.thumbFullWidth-ob.tn.borderWidth-ob.tn.imgcBorderWidth,f=c.thumbFullHeight-ob.tn.borderHeight-ob.tn.imgcBorderHeight,i=c.$getElt(".labelImage"),h="rect(0px, "+Math.ceil(d/2)+"px, "+f+"px, 0px)";i.eq(0).css({clip:h}),h="rect(0px, "+d+"px, "+f+"px, "+Math.ceil(d/2)+"px)",i.eq(1).css({clip:h});break;case"labelAppearSplit4":var d=c.thumbFullWidth-ob.tn.borderWidth-ob.tn.imgcBorderWidth,f=c.thumbFullHeight-ob.tn.borderHeight-ob.tn.imgcBorderHeight;i=c.$getElt(".labelImage");var h="rect(0px, "+Math.ceil(d/2)+"px, "+Math.ceil(f/2)+"px, 0px)";i.eq(0).css({clip:h}),h="rect(0px, "+d+"px, "+Math.ceil(f/2)+"px, "+Math.ceil(d/2)+"px)",i.eq(1).css({clip:h}),h="rect("+Math.ceil(f/2)+"px, "+d+"px, "+f+"px, "+Math.ceil(d/2)+"px)",i.eq(2).css({clip:h}),h="rect("+Math.ceil(f/2)+"px, "+Math.ceil(d/2)+"px, "+f+"px, 0px)",i.eq(3).css({clip:h}),c.eltTransform.labelImage0.translateX=-c.thumbFullWidth/2,c.eltTransform.labelImage0.translateY=-c.thumbFullHeight/2,Fa(c,"labelImage0"),c.eltTransform.labelImage1.translateX=c.thumbFullWidth/2,c.eltTransform.labelImage1.translateY=-c.thumbFullHeight/2,Fa(c,"labelImage1"),c.eltTransform.labelImage2.translateX=c.thumbFullWidth/2,c.eltTransform.labelImage2.translateY=c.thumbFullHeight/2,Fa(c,"labelImage2"),c.eltTransform.labelImage3.translateX=-c.thumbFullWidth/2,c.eltTransform.labelImage3.translateY=c.thumbFullHeight/2,Fa(c,"labelImage3");break;case"labelAppearSplitVert":var d=c.thumbFullWidth-ob.tn.borderWidth-ob.tn.imgcBorderWidth,f=c.thumbFullHeight-ob.tn.borderHeight-ob.tn.imgcBorderHeight;i=c.$getElt(".labelImage");var h="rect(0px, "+Math.ceil(d/2)+"px, "+f+"px, 0px)";i.eq(0).css({clip:h}),h="rect(0px, "+d+"px, "+f+"px, "+Math.ceil(d/2)+"px)",i.eq(1).css({clip:h}),c.eltTransform.labelImage0.translateX=-c.thumbFullWidth/2,Fa(c,"labelImage0"),c.eltTransform.labelImage1.translateX=c.thumbFullWidth/2,Fa(c,"labelImage1");break;case"slideUp":
// item.$getElt('.labelImage').css({top:item.thumbFullHeight});
c.eltTransform.labelImage0.translateY=c.thumbFullHeight,Fa(c,"labelImage0");break;case"slideDown":
// item.$getElt('.labelImage').css({bottom:item.thumbFullHeight});  //, 'background':'none'});
c.eltTransform.labelImage0.translateY=-c.thumbFullHeight,Fa(c,"labelImage0");break;case"slideRight":
// item.$getElt('.labelImage').css({left:-item.thumbFullWidth});
c.eltTransform.labelImage0.translateX=-c.thumbFullWidth,Fa(c,"labelImage0");break;case"slideLeft":
// item.$getElt('.labelImage').css({left:item.thumbFullWidth});
c.eltTransform.labelImage0.translateX=c.thumbFullWidth,Fa(c,"labelImage0");break;case"imageExplode":for(var g=(c.$getElt(".subcontainer"),c.$getElt(".imgContainer")),b=Math.sqrt(g.length),d=g.eq(0).outerWidth(!0)/b,f=g.eq(0).outerHeight(!0)/b,k=0;b>k;k++)for(var l=0;b>l;l++)var h="rect("+f*k+"px, "+d*(l+1)+"px, "+f*(k+1)+"px, "+d*l+"px)";break;case"imageFlipHorizontal":var m=c.$getElt(".subcontainer"),b=Math.round(1.2*c.thumbFullHeight)+"px";m[0].style[ob.CSSperspective]=b;
// item.$getElt('.imgContainer').css({perspective: n, rotateX: '0deg', 'backface-visibility': 'hidden'});
// item.$getElt('.labelImage').css({ perspective: n, rotateX: '180deg', 'backface-visibility': 'hidden','height':item.thumbFullHeight,'opacity':'1' });
break;case"imageFlipVertical":var m=c.$getElt(".subcontainer"),b=Math.round(1.2*c.thumbFullWidth)+"px";m[0].style[ob.CSSperspective]=b;
//item.$getElt('.imgContainer').css({perspective: n, rotateY: '0deg', 'backface-visibility': 'hidden'});
//item.$getElt('.labelImage').css({ perspective: n, rotateY: '180deg', 'backface-visibility': 'hidden','height':item.thumbFullHeight,'opacity':'1' });
break;case"imageSlide2Up":case"imageSlide2Down":case"imageSlide2Left":case"imageSlide2Right":case"imageSlide2UpRight":case"imageSlide2UpLeft":case"imageSlide2DownRight":case"imageSlide2DownLeft":case"imageSlide2Random":Aa(a,c);break;case"slideUp":c.eltTransform.labelImage0.translateY=c.thumbFullHeight,Fa(c,"labelImage0");break;case"slideDown":c.eltTransform.labelImage0.translateY=-c.thumbFullHeight,Fa(c,"labelImage0");break;case"slideRight":c.eltTransform.labelImage0.translateX=-c.thumbFullWidth,Fa(c,"labelImage0");break;case"slideLeft":c.eltTransform.labelImage0.translateX=c.thumbFullWidth,Fa(c,"labelImage0");break;case"labelSlideUpTop":case"labelSlideUp":c.eltTransform.labelImage0.translateY=c.thumbFullHeight,Fa(c,"labelImage0");break;case"labelSlideDown":a.css({overflow:"hidden"}),
// item.$getElt('.labelImage').css({top:-item.thumbFullHeight, bottom:''});
c.eltTransform.labelImage0.translateY=-c.thumbFullHeight,Fa(c,"labelImage0");break;case"descriptionSlideUp":}}}function Ca(a,b,c){return void 0==a.eltTransform[b]&&(a.eltTransform[b]=Ea(),a.eltTransform[b].$elt=c),a.eltTransform[b]}function Da(a){for(var b in a.eltTransform)delete a.eltTransform[b]}function Ea(){var a={translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,scale:100};return a}function Fa(a,b){var c=a.eltTransform[b],d="translateX("+c.translateX+"px) translateY("+c.translateY+"px) scale("+c.scale/100+")";d+=ob.IE<=9||ob.isGingerbread?" rotate("+c.rotateZ+"deg)":" rotateX("+c.rotateX+"deg) rotateY("+c.rotateY+"deg) rotateZ("+c.rotateZ+"deg)",void 0!=c.$elt[0]&&(c.$elt[0].style[ob.CSStransformName]=d)}
// ANIMATION OF ONE THUMBNAIL ELEMENT
function Ga(a,c,d,e,f){
// STEP 1: animate CSS transform
var g=["translateX","translateY","scale","rotateX","rotateY","rotateZ"];if("animate"==ob.aengine)for(var h=0;h<g.length;h++){var i=g[h];if("undefined"!=typeof d[i]){var j=new b,k=parseInt(d[i]);j.tween({attachment:{it:e,eC:f,t:i,f:k},from:{v:parseInt(e.eltTransform[f][i])},to:{v:k},duration:ob.tn.getHE()[c].duration,delay:ob.tn.getHE()[c].delay,step:function(a,b){b.it.hovered&&(b.it.eltTransform[b.eC][b.t]=a.v,Fa(b.it,b.eC))},finish:function(a,b){b.it.hovered&&(b.it.eltTransform[b.eC][b.t]=b.f,Fa(b.it,b.eC))}}),delete d[i]}}
// is there something else to animate?
var l=0;for(var m in d)if(d.hasOwnProperty(m)){l++;break}if(0!=l)
// STEP 2: remaining animations
if("transition"!=ob.aengine){
// retrieve the 'from' values
var n={};for(var m in d)"borderColor"==m?n[m]=a.css("borderTopColor"):n[m]=a.css(m),"transparent"==n[m]&&(// some browser return "transparent" as rgba(0,0,0,0),
a.hasClass("labelImage")?n[m]="rgb("+ob.custGlobals.oldLabelRed+","+ob.custGlobals.oldLabelGreen+","+ob.custGlobals.oldLabelBlue+",0.01)":n[m]="rgba(0,0,0,0)");var j=new b;j.tween({attachment:{$e:a,it:e,to:d},from:n,to:d,duration:ob.tn.getHE()[c].duration,delay:ob.tn.getHE()[c].delay,step:function(a,b){b.it.hovered&&b.$e.css(a)},finish:function(a,b){b.it.hovered&&b.$e.css(d)}})}else ob.tn.getHE()[c].delay>0?
// transit has a bug on queue --> we do not use it
a.delay(ob.tn.getHE()[c].delay)[ob.aengine](d,ob.tn.getHE()[c].duration,ob.tn.getHE()[c].easing):
// transit has a bug on queue --> we do not use it
//anime.queue=false;
//anime.duration=5000;
a[ob.aengine](d,ob.tn.getHE()[c].duration,ob.tn.getHE()[c].easing)}function Ha(a){var b=a.data("index");if(void 0!=b){// required because can be fired on ghost elements
"velocity"==ob.aengine?a.find("*").velocity("stop",!0):a.find("*").stop(!0,!1);var c=ob.I[b];c.hovered=!0;var d="animate"==ob.aengine?1:100;"function"==typeof ob.O.fnThumbnailHover&&ob.O.fnThumbnailHover(a,c,e());try{for(j=0;j<ob.tn.getHE().length;j++)switch(ob.tn.getHE()[j].name){case"imageSplit4":var f=c.$getElt(".imgContainer");Ga(f.eq(0),j,{translateX:-c.thumbFullWidth/2,translateY:-c.thumbFullHeight/2},c,"imgContainer0"),Ga(f.eq(1),j,{translateX:c.thumbFullWidth/2,translateY:-c.thumbFullHeight/2},c,"imgContainer1"),Ga(f.eq(2),j,{translateX:c.thumbFullWidth/2,translateY:c.thumbFullHeight/2},c,"imgContainer2"),Ga(f.eq(3),j,{translateX:-c.thumbFullWidth/2,translateY:c.thumbFullHeight/2},c,"imgContainer3");break;case"imageSplitVert":var f=c.$getElt(".imgContainer");Ga(f.eq(0),j,{translateX:-c.thumbFullWidth/2},c,"imgContainer0"),Ga(f.eq(1),j,{translateX:c.thumbFullWidth/2},c,"imgContainer1");break;case"labelSplit4":var f=c.$getElt(".labelImage");Ga(f.eq(0),j,{translateX:-c.thumbFullWidth/2,translateY:-c.thumbFullHeight/2},c,"labelImage0"),Ga(f.eq(1),j,{translateX:c.thumbFullWidth/2,translateY:-c.thumbFullHeight/2},c,"labelImage1"),Ga(f.eq(2),j,{translateX:c.thumbFullWidth/2,translateY:c.thumbFullHeight/2},c,"labelImage2"),Ga(f.eq(3),j,{translateX:-c.thumbFullWidth/2,translateY:c.thumbFullHeight/2},c,"labelImage3");break;case"labelSplitVert":var f=c.$getElt(".labelImage");Ga(f.eq(0),j,{translateX:-c.thumbFullWidth/2},c,"labelImage0"),Ga(f.eq(1),j,{translateX:c.thumbFullWidth/2},c,"labelImage1");break;case"labelAppearSplit4":var f=c.$getElt(".labelImage");Ga(f.eq(0),j,{translateX:0,translateY:0},c,"labelImage0"),Ga(f.eq(1),j,{translateX:0,translateY:0},c,"labelImage1"),Ga(f.eq(2),j,{translateX:0,translateY:0},c,"labelImage2"),Ga(f.eq(3),j,{translateX:0,translateY:0},c,"labelImage3");break;case"labelAppearSplitVert":var f=c.$getElt(".labelImage");Ga(f.eq(0),j,{translateX:0},c,"labelImage0"),Ga(f.eq(1),j,{translateX:0},c,"labelImage1");break;case"scaleLabelOverImage":Ga(c.$getElt(".labelImage"),j,{scale:100/d,opacity:"1"},c,"labelImage0"),Ga(c.$getElt(".imgContainer"),j,{scale:50/d},c,"imgContainer0");break;case"overScale":case"overScaleOutside":Ga(c.$getElt(".labelImage"),j,{opacity:"1",scale:100/d},c,"labelImage0"),Ga(c.$getElt(".imgContainer"),j,{opacity:"0",scale:50/d},c,"imgContainer0");break;case"imageInvisible":Ga(c.$getElt(".imgContainer"),j,{opacity:"0"},c);break;case"rotateCornerBL":var g="transition"==ob.aengine?{rotate:"0deg"}:{rotateZ:"0"};Ga(c.$getElt(".labelImage"),j,g,c,"labelImage0"),g="transition"==ob.aengine?{rotate:"90deg"}:{rotateZ:"90"},Ga(c.$getElt(".imgContainer"),j,g,c,"imgContainer0");break;case"rotateCornerBR":var g="transition"==ob.aengine?{rotate:"0deg"}:{rotateZ:"0"};Ga(c.$getElt(".labelImage"),j,g,c,"labelImage0"),g="transition"==ob.aengine?{rotate:"-90deg"}:{rotateZ:"-90"},Ga(c.$getElt(".imgContainer"),j,g,c,"imgContainer0");break;case"imageRotateCornerBL":var g="transition"==ob.aengine?{rotate:"90deg"}:{rotateZ:"90"};Ga(c.$getElt(".imgContainer"),j,g,c,"imgContainer0");break;case"imageRotateCornerBR":var g="transition"==ob.aengine?{rotate:"-90deg"}:{rotateZ:"-90"};Ga(c.$getElt(".imgContainer"),j,g,c,"imgContainer0");break;case"slideUp":Ga(c.$getElt(".imgContainer"),j,{translateY:-c.thumbFullHeight},c,"imgContainer0"),Ga(c.$getElt(".labelImage"),j,{translateY:0},c,"labelImage0");break;case"slideDown":Ga(c.$getElt(".imgContainer"),j,{translateY:c.thumbFullHeight},c,"imgContainer0"),Ga(c.$getElt(".labelImage"),j,{translateY:0},c,"labelImage0");break;case"slideRight":Ga(c.$getElt(".imgContainer"),j,{translateX:c.thumbFullWidth},c,"imgContainer0"),Ga(c.$getElt(".labelImage"),j,{translateX:0},c,"labelImage0");break;case"slideLeft":Ga(c.$getElt(".imgContainer"),j,{translateX:-c.thumbFullWidth},c,"imgContainer0"),Ga(c.$getElt(".labelImage"),j,{translateX:0},c,"labelImage0");break;case"imageSlideUp":Ga(c.$getElt(".imgContainer"),j,{translateY:-c.thumbFullHeight},c,"imgContainer0");break;case"imageSlideDown":Ga(c.$getElt(".imgContainer"),j,{translateY:c.thumbFullHeight},c,"imgContainer0");break;case"imageSlideLeft":Ga(c.$getElt(".imgContainer"),j,{translateX:-c.thumbFullWidth},c,"imgContainer0");break;case"imageSlideRight":Ga(c.$getElt(".imgContainer"),j,{translateX:c.thumbFullWidth},c,"imgContainer0");break;case"labelAppear":if("velocity"==ob.aengine)Ga(c.$getElt(".labelImage"),j,{backgroundColorRed:ob.custGlobals.oldLabelRed,backgroundColorGreen:ob.custGlobals.oldLabelGreen,backgroundColorBlue:ob.custGlobals.oldLabelBlue,backgroundColorAlpha:1},c);else{var h="rgba("+ob.custGlobals.oldLabelRed+","+ob.custGlobals.oldLabelGreen+","+ob.custGlobals.oldLabelBlue+",0.99)";// use 0.99 instead of 1 for opacity because 1=no transparency so jQuery would return RGB instead of RGBA
Ga(c.$getElt(".labelImage"),j,{backgroundColor:h},c)}"album"==c.kind?Ga(c.$getElt(".labelFolderTitle"),j,{opacity:"1"},c):Ga(c.$getElt(".labelImageTitle"),j,{opacity:"1"},c),Ga(c.$getElt(".labelDescription"),j,{opacity:"1"},c);break;case"labelAppear75":if("velocity"==ob.aengine)Ga(c.$getElt(".labelImage"),j,{backgroundColorRed:ob.custGlobals.oldLabelRed,backgroundColorGreen:ob.custGlobals.oldLabelGreen,backgroundColorBlue:ob.custGlobals.oldLabelBlue,backgroundColorAlpha:.75},c);else{var h="rgba("+ob.custGlobals.oldLabelRed+","+ob.custGlobals.oldLabelGreen+","+ob.custGlobals.oldLabelBlue+",0.75)";Ga(c.$getElt(".labelImage"),j,{backgroundColor:h},c)}"album"==c.kind?Ga(c.$getElt(".labelFolderTitle"),j,{opacity:"1"},c):Ga(c.$getElt(".labelImageTitle"),j,{opacity:"1"},c),Ga(c.$getElt(".labelDescription"),j,{opacity:"1"},c);break;case"descriptionAppear":Ga(c.$getElt(".labelDescription"),j,{opacity:"1"},c);break;case"labelSlideDown":Ga(c.$getElt(".labelImage"),j,{translateY:0},c,"labelImage0");break;case"labelSlideUpTop":case"labelSlideUp":Ga(c.$getElt(".labelImage"),j,{translateY:0},c,"labelImage0");break;case"descriptionSlideUp":var i="album"==c.kind?c.$getElt(".labelFolderTitle").outerHeight(!0):c.$getElt(".labelImageTitle").outerHeight(!0),k=c.$getElt(".labelDescription").outerHeight(!0),l=c.thumbFullHeight-i-k;0>l&&(l=0),Ga(c.$getElt(".labelImage"),j,{translateY:0,height:i+k},c,"labelImage0"),Ga(c.$getElt(".labelDescription"),j,{opacity:"1"},c);break;case"labelOpacity50":Ga(c.$getElt(".labelImage"),j,{opacity:"0.5"},c);break;case"imageOpacity50":Ga(c.$getElt(".imgContainer"),j,{opacity:"0.5"},c);break;case"borderLighter":if("velocity"==ob.aengine){var m=sb(ob.custGlobals.oldBorderColor,.5),n=m.substring(m.indexOf("(")+1,m.lastIndexOf(")")).split(/,\s*/);Ga(a,j,{borderColorRed:n[0],borderColorGreen:n[1],borderColorBlue:n[2],colorAlpha:n[3]},c)}else{
// TnAni($e, j, { borderColor: lighterColor(G.custGlobals.oldBorderColor,0.5) }, item );
var h=a.css("borderTopColor");a.data("ngcache_borderColor",h),Ga(a,j,{borderColor:sb(h,.5)},c)}break;case"borderDarker":if("velocity"==ob.aengine){var m=tb(ob.custGlobals.oldBorderColor,.5),n=m.substring(m.indexOf("(")+1,m.lastIndexOf(")")).split(/,\s*/);Ga(a,j,{borderColorRed:n[0],borderColorGreen:n[1],borderColorBlue:n[2],colorAlpha:n[3]},c)}else{
// TnAni($e, j, { borderColor: darkerColor(G.custGlobals.oldBorderColor,0.5) }, item );
var h=a.css("borderTopColor");a.data("ngcache_borderColor",h),Ga(a,j,{borderColor:tb(h,.5)},c)}break;case"imageScale150":Ga(c.$getElt("img"),j,{scale:150/d},c,"img0");break;case"imageScaleIn80":Ga(c.$getElt("img"),j,{scale:100/d},c,"img0");break;case"imageSlide2Up":case"imageSlide2Down":case"imageSlide2Left":case"imageSlide2Right":case"imageSlide2UpRight":case"imageSlide2UpLeft":case"imageSlide2DownRight":case"imageSlide2DownLeft":case"imageSlide2Random":switch(c.customData.hoverEffectRDir){case"imageSlide2Up":var o=c.thumbFullHeight<1.4*c.imgHeight?(1.4*c.imgHeight-c.thumbFullHeight)/2:0;Ga(c.$getElt("img"),j,{translateY:-o},c,"img0");break;case"imageSlide2Down":var o=c.thumbFullHeight<1.4*c.imgHeight?(1.4*c.imgHeight-c.thumbFullHeight)/2:0;Ga(c.$getElt("img"),j,{translateY:o},c,"img0");break;case"imageSlide2Left":Ga(c.$getElt("img"),j,{translateX:.1*-c.thumbFullWidth},c,"img0");break;case"imageSlide2Right":Ga(c.$getElt("img"),j,{translateX:.1*c.thumbFullWidth},c,"img0");break;case"imageSlide2UpRight":Ga(c.$getElt("img"),j,{translateY:.05*-c.thumbFullHeight,translateX:.05*c.thumbFullWidth},c,"img0");break;case"imageSlide2UpLeft":Ga(c.$getElt("img"),j,{translateY:.05*-c.thumbFullHeight,translateX:.05*-c.thumbFullWidth},c,"img0");break;case"imageSlide2DownRight":Ga(c.$getElt("img"),j,{translateY:.05*c.thumbFullHeight,translateX:.05*c.thumbFullWidth},c,"img0");break;case"imageSlide2DownLeft":Ga(c.$getElt("img"),j,{translateY:.05*c.thumbFullHeight,translateX:.05*-c.thumbFullWidth},c,"img0")}break;case"imageScale150Outside":mb("",a),Ga(c.$getElt("img"),j,{scale:150/d},c,"img0");break;case"scale120":mb("",a),Ga(a,j,{scale:120/d},c,"base");break;case"imageExplode":mb("",a);var p=c.$getElt(".imgContainer");b=Math.sqrt(p.length);for(var q=[],r=0;r<=Math.PI;r+=Math.PI/(b-1))q.push(Math.sin(r));for(var s=p.outerWidth(!0)/b,t=p.outerHeight(!0)/b,r=0,g=0;b>g;g++)for(var h=0;b>h;h++)Ga(p.eq(r++),j,{top:(-t*b/3+t*g-t)*q[h],left:(-s*b/3+s*h-s)*q[g],scale:1.5,opacity:0},c);break;case"imageFlipHorizontal":mb("",a),Ga(c.$getElt(".imgContainer"),j,{rotateX:180},c,"imgContainer0"),Ga(c.$getElt(".labelImage"),j,{rotateX:360},c,"labelImage0");break;case"imageFlipVertical":mb("",a),Ga(c.$getElt(".imgContainer"),j,{rotateY:180},c,"imgContainer0"),Ga(c.$getElt(".labelImage"),j,{rotateY:360},c,"labelImage0");break;
// case 'flipHorizontal':
// setElementOnTop('', $e);
// var n= Math.round(item.thumbFullHeight*1.2) + 'px';
// TnAni($e, j, { perspective: n, rotateX: '180deg'}, item );
// break;
// case 'flipVertical':
// setElementOnTop('', $e);
// var n= Math.round(item.thumbFullWidth*1.2) + 'px';
// TnAni($e, j, { perspective: n, rotateY: '180deg'}, item );
// break;
case"TEST":}}catch(u){hb("error on hover "+u.message)}}}function Ia(a,c,d,e,f){
// STEP 1: animate CSS transform
var g=["translateX","translateY","scale","rotateX","rotateY","rotateZ"];if("animate"==ob.aengine)for(var h=0;h<g.length;h++){var i=g[h];if("undefined"!=typeof d[i]){var j=new b,k=parseInt(d[i]);j.tween({attachment:{it:e,eC:f,t:i,f:k},from:{v:parseInt(e.eltTransform[f][i])},to:{v:k},duration:ob.tn.getHE()[c].durationBack,delay:ob.tn.getHE()[c].delayBack,step:function(a,b){b.it.eltTransform[b.eC][b.t]=a.v,Fa(b.it,b.eC)},finish:function(a,b){b.it.eltTransform[b.eC][b.t]=b.f,Fa(b.it,b.eC)}}),delete d[i]}}
// is there something else to animate?
var l=0;for(var m in d)if(d.hasOwnProperty(m)){l++;break}if(0!=l)
// STEP 2: remaining animations
if("transition"!=ob.aengine){
// retrieve the 'from' values
var n={};for(var m in d)"borderColor"==m?
// borderColor is not supported in Firefox
n[m]=a.css("borderTopColor"):(n[m]=a.css(m),"transparent"==n[m]&&(// some browser return "transparent" as rgba(0,0,0,0)
n[m]="rgba(0,0,0,0.01)"));var j=new b;j.tween({attachment:{$e:a,it:e,to:d},from:n,to:d,duration:ob.tn.getHE()[c].durationBack,delay:ob.tn.getHE()[c].delayBack,step:function(a,b){b.$e.css(a)},finish:function(a,b){b.$e.css(b.to)}})}else ob.tn.getHE()[c].delay>0?
// transit has a bug on queue --> we do not use it
a.delay(ob.tn.getHE()[c].delay)[ob.aengine](d,ob.tn.getHE()[c].durationBack,ob.tn.getHE()[c].easingBack):
// transit has a bug on queue --> we do not use it
//anime.queue=false;
//anime.duration=5000;
a[ob.aengine](d,ob.tn.getHE()[c].durationBack,ob.tn.getHE()[c].easingBack)}function Ja(a){if(!ob.containerViewerDisplayed){var b=a.data("index");if(void 0!=b){// required because can be fired on ghost elements
"velocity"==ob.aengine?a.find("*").velocity("stop",!0):a.find("*").filter(":animated").stop(!0,!1);var c=ob.I[b];c.hovered=!1;var d="animate"==ob.aengine?1:100;"function"==typeof ob.O.fnThumbnailHoverOut&&ob.O.fnThumbnailHoverOut(a,c,e());try{for(j=0;j<ob.tn.getHE().length;j++)switch(ob.tn.getHE()[j].name){case"imageSplit4":var f=c.$getElt(".imgContainer");Ia(f.eq(0),j,{translateX:0,translateY:0},c,"imgContainer0"),Ia(f.eq(1),j,{translateX:0,translateY:0},c,"imgContainer1"),Ia(f.eq(2),j,{translateX:0,translateY:0},c,"imgContainer2"),Ia(f.eq(3),j,{translateX:0,translateY:0},c,"imgContainer3");break;case"imageSplitVert":var f=c.$getElt(".imgContainer");Ia(f.eq(0),j,{translateX:0},c,"imgContainer0"),Ia(f.eq(1),j,{translateX:0},c,"imgContainer1");break;case"labelSplit4":var f=c.$getElt(".labelImage");Ia(f.eq(0),j,{translateX:0,translateY:0},c,"labelImage0"),Ia(f.eq(1),j,{translateX:0,translateY:0},c,"labelImage1"),Ia(f.eq(2),j,{translateX:0,translateY:0},c,"labelImage2"),Ia(f.eq(3),j,{translateX:0,translateY:0},c,"labelImage3");break;case"labelSplitVert":var f=c.$getElt(".labelImage");Ia(f.eq(0),j,{translateX:0},c,"labelImage0"),Ia(f.eq(1),j,{translateX:0},c,"labelImage1");break;case"labelAppearSplit4":var f=c.$getElt(".labelImage");Ia(f.eq(0),j,{translateX:-c.thumbFullWidth/2,translateY:-c.thumbFullHeight/2},c,"labelImage0"),Ia(f.eq(1),j,{translateX:c.thumbFullWidth/2,translateY:-c.thumbFullHeight/2},c,"labelImage1"),Ia(f.eq(2),j,{translateX:c.thumbFullWidth/2,translateY:c.thumbFullHeight/2},c,"labelImage2"),Ia(f.eq(3),j,{translateX:-c.thumbFullWidth/2,translateY:c.thumbFullHeight/2},c,"labelImage3");break;case"labelAppearSplitVert":var f=c.$getElt(".labelImage");Ia(f.eq(0),j,{translateX:-c.thumbFullWidth/2},c,"labelImage0"),Ia(f.eq(1),j,{translateX:c.thumbFullWidth/2},c,"labelImage1");break;case"scaleLabelOverImage":Ia(c.$getElt(".labelImage"),j,{opacity:"0",scale:50/d},c,"labelImage0"),Ia(c.$getElt(".imgContainer"),j,{scale:100/d},c,"imgContainer0");break;case"overScale":case"overScaleOutside":Ia(c.$getElt(".labelImage"),j,{opacity:"0",scale:150/d},c,"labelImage0"),Ia(c.$getElt(".imgContainer"),j,{opacity:"1",scale:100/d},c,"imgContainer0");break;case"imageInvisible":Ia(c.$getElt(".imgContainer"),j,{opacity:"1"});break;case"rotateCornerBL":var g="transition"==ob.aengine?{rotate:"-90deg"}:{rotateZ:"-90"};Ia(c.$getElt(".labelImage"),j,g,c,"labelImage0"),g="transition"==ob.aengine?{rotate:"0deg"}:{rotateZ:"0"},Ia(c.$getElt(".imgContainer"),j,g,c,"imgContainer0");break;case"rotateCornerBR":var g="transition"==ob.aengine?{rotate:"90deg"}:{rotateZ:"90"};Ia(c.$getElt(".labelImage"),j,g,c,"labelImage0"),g="transition"==ob.aengine?{rotate:"0deg"}:{rotateZ:"0"},Ia(c.$getElt(".imgContainer"),j,g,c,"imgContainer0");break;case"imageRotateCornerBL":case"imageRotateCornerBR":var g="transition"==ob.aengine?{rotate:"0deg"}:{rotateZ:"0"};Ia(c.$getElt(".imgContainer"),j,g,c,"imgContainer0");break;case"slideUp":Ia(c.$getElt(".imgContainer"),j,{translateY:0},c,"imgContainer0"),Ia(c.$getElt(".labelImage"),j,{translateY:c.thumbFullHeight},c,"labelImage0");break;case"slideDown":Ia(c.$getElt(".imgContainer"),j,{translateY:0},c,"imgContainer0"),Ia(c.$getElt(".labelImage"),j,{translateY:-c.thumbFullHeight},c,"labelImage0");break;case"slideRight":Ia(c.$getElt(".imgContainer"),j,{translateX:0},c,"imgContainer0"),Ia(c.$getElt(".labelImage"),j,{translateX:-c.thumbFullWidth},c,"labelImage0");break;case"slideLeft":Ia(c.$getElt(".imgContainer"),j,{translateX:0},c,"imgContainer0"),Ia(c.$getElt(".labelImage"),j,{translateX:c.thumbFullWidth},c,"labelImage0");break;case"imageSlideUp":case"imageSlideDown":Ia(c.$getElt(".imgContainer"),j,{translateY:0},c,"imgContainer0");break;case"imageSlideLeft":case"imageSlideRight":Ia(c.$getElt(".imgContainer"),j,{translateX:0},c,"imgContainer0");break;case"labelAppear":case"labelAppear75":if("velocity"==ob.aengine)Ia(c.$getElt(".labelImage"),j,{backgroundColorRed:ob.custGlobals.oldLabelRed,backgroundColorGreen:ob.custGlobals.oldLabelGreen,backgroundColorBlue:ob.custGlobals.oldLabelBlue,backgroundColorAlpha:0});else{var h="rgba("+ob.custGlobals.oldLabelRed+","+ob.custGlobals.oldLabelGreen+","+ob.custGlobals.oldLabelBlue+",0.01)";Ia(c.$getElt(".labelImage"),j,{backgroundColor:h})}"album"==c.kind?Ia(c.$getElt(".labelFolderTitle"),j,{opacity:"0"}):Ia(c.$getElt(".labelImageTitle"),j,{opacity:"0"}),Ia(c.$getElt(".labelDescription"),j,{opacity:"0"});break;case"descriptionAppear":Ia(c.$getElt(".labelDescription"),j,{opacity:"0"});break;case"labelSlideDown":Ia(c.$getElt(".labelImage"),j,{translateY:-c.thumbFullHeight},c,"labelImage0");break;case"labelSlideUpTop":case"labelSlideUp":Ia(c.$getElt(".labelImage"),j,{translateY:c.thumbFullHeight},c,"labelImage0");break;case"descriptionSlideUp":var i="album"==c.kind?c.$getElt(".labelFolderTitle").outerHeight(!0):c.$getElt(".labelImageTitle").outerHeight(!0);c.thumbFullHeight-i-ob.tn.borderHeight-ob.tn.imgcBorderHeight;Ia(c.$getElt(".labelImage"),j,{translateY:0,height:i},c,"labelImage0");break;case"labelOpacity50":Ia(c.$getElt(".labelImage"),j,{opacity:ob.custGlobals.oldLabelOpacity});break;case"imageOpacity50":Ia(c.$getElt(".imgContainer"),j,{opacity:"1"});break;case"borderLighter":case"borderDarker":if("velocity"==ob.aengine){var k=ob.custGlobals.oldBorderColor,l=k.substring(k.indexOf("(")+1,k.lastIndexOf(")")).split(/,\s*/);Ia(a,j,{borderColorRed:l[0],borderColorGreen:l[1],borderColorBlue:l[2],colorAlpha:l[3]})}else
// TnAniO($e, j, { borderColor: G.custGlobals.oldBorderColor } );
Ia(a,j,{borderColor:a.data("ngcache_borderColor")});break;case"imageScale150":case"imageScale150Outside":Ia(c.$getElt("img"),j,{scale:100/d},c,"img0");break;case"imageScaleIn80":Ia(c.$getElt("img"),j,{scale:120/d},c,"img0");break;case"imageSlide2Up":case"imageSlide2Down":case"imageSlide2Left":case"imageSlide2Right":case"imageSlide2UpRight":case"imageSlide2UpLeft":case"imageSlide2DownRight":case"imageSlide2DownLeft":case"imageSlide2Random":switch(c.customData.hoverEffectRDir){case"imageSlide2Up":var m=c.thumbFullHeight<1.4*c.imgHeight?(1.4*c.imgHeight-c.thumbFullHeight)/2:0;Ia(c.$getElt("img"),j,{translateY:m},c,"img0");break;case"imageSlide2Down":var m=c.thumbFullHeight<1.4*c.imgHeight?(1.4*c.imgHeight-c.thumbFullHeight)/2:0;Ia(c.$getElt("img"),j,{translateY:-m},c,"img0");break;case"imageSlide2Left":Ia(c.$getElt("img"),j,{translateX:.1*c.thumbFullWidth},c,"img0");break;case"imageSlide2Right":Ia(c.$getElt("img"),j,{translateX:.1*-c.thumbFullWidth},c,"img0");break;case"imageSlide2UpRight":Ia(c.$getElt("img"),j,{translateY:.05*c.thumbFullHeight,translateX:.05*-c.thumbFullWidth},c,"img0");break;case"imageSlide2UpLeft":Ia(c.$getElt("img"),j,{translateY:.05*c.thumbFullHeight,translateX:.05*c.thumbFullWidth},c,"img0");break;case"imageSlide2DownRight":Ia(c.$getElt("img"),j,{translateY:.05*-c.thumbFullHeight,translateX:.05*-c.thumbFullWidth},c,"img0");break;case"imageSlide2DownLeft":Ia(c.$getElt("img"),j,{translateY:.05*-c.thumbFullHeight,translateX:.05*c.thumbFullWidth},c,"img0")}break;case"scale120":Ia(a,j,{scale:100/d},c,"base");break;case"imageExplode":var n=c.$getElt(".imgContainer");b=Math.sqrt(n.length);for(var o=0,g=0;b>g;g++)for(var h=0;b>h;h++)Ia(n.eq(o++),j,{top:"0",left:"0",scale:"1",opacity:"1"});break;case"imageFlipHorizontal":
// var n= Math.round(item.thumbFullHeight*1.2) + 'px';
Ia(c.$getElt(".imgContainer"),j,{rotateX:0},c,"imgContainer0"),Ia(c.$getElt(".labelImage"),j,{rotateX:180},c,"labelImage0");break;case"imageFlipVertical":
// var n= Math.round(item.thumbFullWidth*1.2) + 'px';
Ia(c.$getElt(".imgContainer"),j,{rotateY:0},c,"imgContainer0"),Ia(c.$getElt(".labelImage"),j,{rotateY:180},c,"labelImage0");break;
// case 'flipHorizontal':
// var n= Math.round(item.thumbFullHeigh*1.2) + 'px';
// TnAniO($e, j, { rotateX: '0deg'} );
// break;
// case 'flipVertical':
// var n= Math.round(item.thumbFullWidth*1.2) + 'px';
// TnAniO($e, j, { rotateY: '0deg'} );
// break;
case"TEST":}}catch(p){hb("error on hoverOut "+p.message)}}}}
// #########################
// ##### IMAGE DISPLAY #####
// #########################
function Ka(a){return ob.O.thumbnailOpenImage?"function"==typeof ob.O.fnThumbnailOpen?void db(a):void("fancybox"==ob.O.viewer?eb(a):ob.containerViewerDisplayed?Ya(a,""):La(a)):void 0}function La(a){
//if( !G.O.locationHash ) {
//  top.location.hash='nanogallery/'+G.baseEltID+'/v';
//}
// if( G.O.viewerScrollBarHidden ) {
jQuery("body").css({overflow:"hidden"}),//avoid scrollbars
// }
ob.containerViewerDisplayed=!0,ob.$E.conVwCon=jQuery('<div  class="nanoGalleryViewerContainer" style="visibility:visible"></div>').appendTo("body"),ob.$E.conVwCon.addClass("nanogallery_theme_"+ob.O.theme),gb(ob.$E.conVwCon),ob.$E.conVw=jQuery('<div  id="nanoGalleryViewer" class="nanoGalleryViewer" style="visibility:visible" itemscope itemtype="http://schema.org/ImageObject"></div>').appendTo(ob.$E.conVwCon),ob.$E.conVw.css({visibility:"visible",position:"fixed"}),
// avoid pinch zoom
ob.$E.conVw.css({msTouchAction:"none",touchAction:"none"});var b="";ob.I.length;b+='<img class="image nGEvent" src="'+ob.I[a].responsiveURL()+'" alt=" " style="visibility:visible;opacity:0;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;zoom:1;" itemprop="contentURL">',b+='<img class="image nGEvent" src="'+ob.I[a].responsiveURL()+'" alt=" " style="visibility:visible;opacity:0;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;zoom:1;" itemprop="contentURL">',b+='<img class="image nGEvent" src="'+ob.I[a].responsiveURL()+'" alt=" " style="visibility:visible;opacity:0;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;zoom:1;" itemprop="contentURL">',ob.$E.vwContent=jQuery('<div class="content nGEvent">'+b+'<div class="contentAreaPrevious nGEvent"></div><div class="contentAreaNext nGEvent"></div></div>').appendTo(ob.$E.conVw),ob.$E.vwImgP=ob.$E.conVw.find(".image").eq(0),ob.$E.vwImgC=ob.$E.conVw.find(".image").eq(1),ob.$E.vwImgN=ob.$E.conVw.find(".image").eq(2),ob.$E.conVwCon.find("*").attr("draggable","false").attr("unselectable","on");var c=jQuery('<div class="closeButtonFloating nGEvent"></div>').appendTo(ob.$E.conVw);c.on("touchstart click",function(a){
// $closeB.on( (G.isIOS ? "touchstart" : "click") ,function(e){     // IPAD
return a.preventDefault(),a.stopPropagation(),(new Date).getTime()-ob.timeImgChanged<400?void 0:(bb(!0),!1)});for(var d='<div class="toolbarContainer nGEvent" style="visibility:'+(ob.O.viewerToolbar.display?"visible":"hidden")+';"><div class="toolbar nGEvent">',f=ob.O.viewerToolbar.standard.split(","),g=0,h=f.length;h>g;g++)d+=Ma(f[g]);for(var i=ob.O.viewerToolbar.minimized.split(","),g=0,j=i.length;j>g;g++)-1==ob.O.viewerToolbar.standard.indexOf(i[g])&&(d+=Ma(i[g]));d+="</div></div>",ob.$E.conVwTb=jQuery(d).appendTo(ob.$E.conVw),"min"==ob.toolbarMode||ob.O.viewerToolbar.autoMinimize>0&&ob.O.viewerToolbar.autoMinimize>=jb().w?Ta():Sa(),ob.O.viewerFullscreen&&(ob.viewerIsFullscreen=!0,ob.$E.conVwTb.find(".fullscreenButton").removeClass("setFullscreenButton").addClass("removeFullscreenButton"),ngscreenfull.request()),ob.O.viewerDisplayLogo&&(ob.$E.vwLogo=jQuery('<div class="nanoLogo"></div>').appendTo(ob.$E.conVw)),mb("",ob.$E.conVw),mb(ob.$E.conVw,c),cb(),ob.timeImgChanged=(new Date).getTime(),ob.$E.conVwTb.find(".closeButton").on("touchstart click",function(a){a.preventDefault(),a.stopPropagation(),(new Date).getTime()-ob.timeImgChanged<400||bb(!0)}),ob.$E.conVwTb.find(".playPauseButton").on("touchstart click",function(a){a.stopPropagation(),Qa()}),ob.$E.conVwTb.find(".minimizeButton").on("touchstart click",function(a){a.stopPropagation(),Ra()}),ob.$E.conVwTb.find(".fullscreenButton").on("touchstart click",function(a){a.stopPropagation(),Pa()}),ob.$E.conVwTb.find(".infoButton").on("touchstart click",function(a){a.stopPropagation(),"function"==typeof ob.O.fnViewerInfo&&ob.O.fnViewerInfo(ob.I[ob.viewerCurrentItemIdx],e())}),ob.$E.conVwTb.find(".ngCustomBtn").on("touchstart click",function(a){if(a.stopPropagation(),"function"==typeof ob.O.fnImgToolbarCustClick){for(var b=a.target||a.srcElement;null==b||null==b.getAttribute("class")||-1==b.getAttribute("class").indexOf("ngCustomBtn");)b=b.parentNode;var c=b.getAttribute("class");if(c.indexOf("ngCustomBtn")>=0)for(var d=c.split(" "),f=0,g=d.length;g>f;f++)0==d[f].indexOf("custom")&&ob.O.fnImgToolbarCustClick(d[f],jQuery(b),ob.I[ob.viewerCurrentItemIdx],e())}}),ob.$E.conVwTb.find(".linkOriginalButton").on("touchstart click",function(a){if(a.stopPropagation(),"picasa"==ob.O.kind){var b="https://plus.google.com/photos/"+ob.O.userID+"/albums/"+ob.I[ob.viewerCurrentItemIdx].albumID+"/"+ob.I[ob.viewerCurrentItemIdx].GetID();window.open(b,"_blank")}if("flickr"==ob.O.kind){var b="https://www.flickr.com/photos/"+ob.O.userID+"/"+ob.I[ob.viewerCurrentItemIdx].GetID();window.open(b,"_blank")}}),ob.$E.conVwTb.find(".nextButton").on("touchstart click",function(a){a.stopPropagation(),Va()}),ob.$E.conVwTb.find(".previousButton").on("touchstart click",function(a){a.stopPropagation(),Xa()}),ob.$E.vwContent.find(".contentAreaNext").on("touchstart click",function(a){a.stopPropagation(),Va()}),ob.$E.vwContent.find(".contentAreaPrevious").on("touchstart click",function(a){a.stopPropagation(),Xa()}),ob.$E.vwContent.on("click",function(a){return(new Date).getTime()-ob.timeImgChanged<400?void 0:(a.preventDefault(),a.stopPropagation(),bb(!0),!1)}),ob.$E.conVw.find(".image").attr("draggable","false").attr("unselectable","on").css({"-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-o-user-select":"none","user-select":"none"}),Ya(a,""),null==ob.viewerSwipe&&(ob.viewerSwipe=new Na(ob.$E.conVwCon[0])),ob.O.slideshowAutoStart&&(ob.playSlideshow=!0,ob.$E.conVwTb.find(".playPauseButton").removeClass("playButton").addClass("pauseButton"),Wa(),ob.playSlideshowTimerID=window.setInterval(function(){Wa()},ob.slideshowDelay))}function Ma(a){var b="",c=a.replace(/^\s+|\s+$/g,"");// remove trailing/leading whitespace
switch(c){case"minimizeButton":b='<div class="ngbt minimizeButton hideToolbarButton nGEvent"></div>';break;case"previousButton":b='<div class="ngbt previousButton nGEvent"></div>';break;case"pageCounter":b='<div class="pageCounter nGEvent"></div>';break;case"nextButton":b='<div class="ngbt nextButton nGEvent"></div>';break;case"playPauseButton":b='<div class="ngbt playButton playPauseButton nGEvent"></div>';break;case"fullscreenButton":ob.supportFullscreenAPI&&(b='<div class="ngbt setFullscreenButton fullscreenButton nGEvent"></div>');break;case"infoButton":"function"==typeof ob.O.fnViewerInfo&&(b='<div class="ngbt infoButton nGEvent"></div>');break;case"linkOriginalButton":("flickr"==ob.O.kind||"picasa"==ob.O.kind)&&(b='<div class="ngbt linkOriginalButton nGEvent"></div>');break;case"closeButton":b='<div class="ngbt closeButton nGEvent"></div>';break;case"label":b='<div class="label"><div class="title nGEvent" itemprop="name"></div><div class="description nGEvent" itemprop="description"></div></div>';break;default:0==c.indexOf("custom")&&(b='<div class="ngbt ngCustomBtn '+c+' nGEvent">'+("function"==typeof ob.O.fnImgToolbarCustInit?ob.O.fnImgToolbarCustInit(c):"")+"</div>")}return b}
// based on "Implement Custom Gestures" from Google
// https://developers.google.com/web/fundamentals/input/touch-input/touchevents/
function Na(a){function b(a){ob.containerViewerDisplayed&&(ob.timeLastTouchStart=(new Date).getTime(),a.preventDefault(),a.touches&&a.touches.length>1||(j=f(a),window.navigator.msPointerEnabled?(document.addEventListener("MSPointerMove",c,!0),document.addEventListener("MSPointerUp",d,!0)):(document.addEventListener("touchmove",c,!0),document.addEventListener("touchend",d,!0),document.addEventListener("touchcancel",d,!0),document.addEventListener("mousemove",c,!0),document.addEventListener("mouseup",d,!0))))}function c(a){a.preventDefault(),k=f(a),i||(i=!0,window.requestAnimationFrame(g))}
// Handle end gestures
function d(a){a.cancelable&&a.preventDefault(),a.touches&&a.touches.length>0||(i=!1,window.navigator.msPointerEnabled?(document.removeEventListener("MSPointerMove",c,!0),document.removeEventListener("MSPointerUp",d,!0)):(document.removeEventListener("touchmove",c,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("touchcancel",d,!0),document.removeEventListener("mousemove",c,!0),document.removeEventListener("mouseup",d,!0)),e())}
// function updateSwipeRestPositionOLD(me) {
function e(){if(null==k)return l=0,void(j=null);var a=j.x-k.x;l-=a,-50>a&&Xa(),a>50&&Va(),l=0,j=null,k=null,Math.abs(a)<50&&Oa(l)}function f(a){var b={};
// Either Mouse event or Pointer Event
return a.targetTouches?(b.x=a.targetTouches[0].clientX,b.y=a.targetTouches[0].clientY):(b.x=a.clientX,b.y=a.clientY),b}function g(){if(i){var a=j.x-k.x;Oa(l-a),i=!1}}var h=a,i=!1,j=null,k=null,l=0;this.removeEventListeners=function(){
// we need to remove all the event listeners (becauase of an issue with the close button)
window.navigator.msPointerEnabled?(h.removeEventListener("MSPointerDown",b,!0),document.removeEventListener("MSPointerMove",c,!0),document.removeEventListener("MSPointerUp",d,!0)):(
// Remove Touch Listeners
h.removeEventListener("touchstart",b,!0),document.removeEventListener("touchmove",c,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("touchcancel",d,!0),
// Remove Mouse Listeners
document.removeEventListener("mousemove",c,!0),document.removeEventListener("mouseup",d,!0))},
// Check if pointer events are supported.
window.navigator.msPointerEnabled?
// Add Pointer Event Listener
// elementToSwipe.addEventListener('MSPointerDown', this.handleGestureStart, true);
h.addEventListener("MSPointerDown",b,!0):
// Add Touch Listener
// elementToSwipe.addEventListener('touchstart', this.handleGestureStart, true);
h.addEventListener("touchstart",b,!0)}function Oa(a){if(ob.imageSwipePosX=a,null==ob.CSStransformName)ob.$E.vwImgC.css({left:a});else if(ob.$E.vwImgC[0].style[ob.CSStransformName]="translateX("+a+"px)","slide"==ob.O.imageTransition)if(a>0){var b=(ob.$E.vwImgP,jb().w);ob.$E.vwImgP.css({visibility:"visible",left:0,opacity:1}),ob.$E.vwImgP[0].style[ob.CSStransformName]="translateX("+(-b+a)+"px) ",ob.$E.vwImgN[0].style[ob.CSStransformName]="translateX("+-b+"px) "}else{var b=(ob.$E.vwImgN,-jb().w);ob.$E.vwImgN.css({visibility:"visible",left:0,opacity:1}),ob.$E.vwImgN[0].style[ob.CSStransformName]="translateX("+(-b+a)+"px) ",ob.$E.vwImgP[0].style[ob.CSStransformName]="translateX("+-b+"px) "}}
// Toggle viewer fullscreen mode on/off
function Pa(){ngscreenfull.enabled&&(
// ngscreenfull.toggle(G.$E.conVwCon[0]);    // --> issue on scrollbar visibility
ngscreenfull.toggle(),ob.viewerIsFullscreen?(ob.viewerIsFullscreen=!1,ob.$E.conVwTb.find(".fullscreenButton").removeClass("removeFullscreenButton").addClass("setFullscreenButton")):(ob.viewerIsFullscreen=!0,ob.$E.conVwTb.find(".fullscreenButton").removeClass("setFullscreenButton").addClass("removeFullscreenButton")))}
// toggle slideshow mode on/off
function Qa(){ob.playSlideshow?(window.clearInterval(ob.playSlideshowTimerID),ob.playSlideshow=!1,ob.$E.conVwTb.find(".playPauseButton").removeClass("pauseButton").addClass("playButton")):(ob.playSlideshow=!0,ob.$E.conVwTb.find(".playPauseButton").removeClass("playButton").addClass("pauseButton"),Wa(),ob.playSlideshowTimerID=window.setInterval(function(){Wa()},ob.slideshowDelay))}
// toggle toolbar visibility
function Ra(){"std"==ob.toolbarMode?Ta():Sa()}function Sa(){ob.toolbarMode="std",ob.$E.conVwTb.find(".minimizeButton").removeClass("viewToolbarButton").addClass("hideToolbarButton"),Ua("std"),cb()}function Ta(){ob.toolbarMode="min",ob.$E.conVwTb.find(".minimizeButton").removeClass("hideToolbarButton").addClass("viewToolbarButton"),Ua("min"),cb()}function Ua(a){for(var b=ob.O.viewerToolbar,b="std"==a?ob.O.viewerToolbar.standard:ob.O.viewerToolbar.minimized,c=["minimizeButton","previousButton","pageCounter","nextButton","playPauseButton","fullscreenButton","infoButton","linkOriginalButton","closeButton","label"],d=0,e=c.length;e>d;d++)"label"==c[d]&&""==ob.$E.conVwTb.find(".title").text()&&""==ob.$E.conVwTb.find(".description").text()?ob.$E.conVwTb.find("."+c[d]).css({display:"none"}):ob.$E.conVwTb.find("."+c[d]).css({display:b.indexOf(c[d])>=0?"table-cell":"none"});
// custom elements
ob.$E.conVwTb.find(".ngCustomBtn").css({display:"none"});for(var f=b.split(","),d=0,e=f.length;e>d;d++){var g=f[d].replace(/^\s+|\s+$/g,"");// remove trailing/leading whitespace
0==g.indexOf("custom")&&ob.$E.conVwTb.find("."+g).css({display:"table-cell"})}}
// Display next image
function Va(){ob.playSlideshow&&(window.clearInterval(ob.playSlideshowTimerID),ob.playSlideshowTimerID=window.setInterval(function(){Wa()},ob.slideshowDelay)),Wa()}function Wa(){if(!(ob.viewerImageIsChanged||(new Date).getTime()-ob.timeImgChanged<300)){var a=(ob.I.length,$a(ob.viewerCurrentItemIdx));Ya(a,"nextImage")}}
// Display previous image
function Xa(){if(!(ob.viewerImageIsChanged||(new Date).getTime()-ob.timeImgChanged<300)){ob.playSlideshow&&Qa();var a=_a(ob.viewerCurrentItemIdx);Ya(a,"previousImage")}}
// Display image (and run animation)
function Ya(a,c){ob.timeImgChanged=(new Date).getTime(),ob.viewerImageIsChanged=!0;if(ob.O.locationHash){var d="nanogallery/"+ob.baseEltID+"/"+ob.I[a].albumID+"/"+ob.I[a].GetID();if("#"+d!=location.hash){ob.lastLocationHash="#"+d;try{top.location.hash=d}catch(e){ob.O.locationHash=!1}}else try{ob.lastLocationHash=top.location.hash}catch(e){ob.O.locationHash=!1}}if(ob.O.debugMode&&console.timeline&&console.timeline("nanoGALLERYviewer"),
// G.viewerResizeTimerID=window.setInterval( function() { ResizeInternalViewer() }, 100);
ob.viewerResizeTimerID=window.setTimeout(cb,100),ob.viewerCurrentItemIdx=a,""==c){
// first image --> just appear / no slide animation
ob.$E.vwImgC.css({opacity:0,left:0,visibility:"visible"}).attr("src",ob.emptyGif).attr("src",ob.I[a].responsiveURL());
// G.$E.vwImgC.css({ opacity:0, left:0, visibility: 'visible', 'background-image':'url('+G.I[imageIdx].responsiveURL()+')'}).attr('src',G.emptyGif);
var f=new b;f.tween({from:{o:0},to:{o:1},attachment:{idx:a,dT:c},duration:400,step:function(a,b){ob.$E.vwImgC.css({opacity:a.o})},finish:function(a,b){ob.$E.vwImgC.css({opacity:1}),Za(b.idx,b.dT)}})}else
// animate image change
switch(ob.O.imageTransition){case"fade":var g="nextImage"==c?ob.$E.vwImgN:ob.$E.vwImgP;g.css({opacity:0,left:0,visibility:"visible"});var f=new b;f.tween({from:{o:0},to:{o:1},attachment:{idx:a,dT:c,$e:g},duration:300,step:function(a,b){ob.$E.vwImgC.css({opacity:1-a.o}),b.$e.css({opacity:a.o})},finish:function(a,b){ob.$E.vwImgC.css({opacity:0}),b.$e.css({opacity:1}),Za(b.idx,b.dT)}});break;case"slideBETA":var g="nextImage"==c?ob.$E.vwImgN:ob.$E.vwImgP;if(g.css({opacity:1,left:0,visibility:"visible"}),null==ob.CSStransformName)
// animate LEFT
jQuery.when(ob.$E.vwImgC.animate({left:("nextImage"==c?-jb().w:jb().w)+"px",opacity:0},500),g.animate({opacity:1},300)).done(function(){Za(a,c)});else{
// animate TRANSLATEX
var h="nextImage"==c?-jb().w:jb().w;g[0].style[ob.CSStransformName]="translateX("+-h+"px) ";var i={v:ob.imageSwipePosX},j={v:"nextImage"==c?-jb().w:jb().w};jQuery(i).animate(j,{duration:500,step:function(a){ob.$E.vwImgC[0].style[ob.CSStransformName]="translateX("+a+"px)",ob.$E.vwImgC.css({opacity:1-Math.abs(a/h)}),g[0].style[ob.CSStransformName]="translateX("+(-h+a)+"px) "},complete:function(){ob.$E.vwImgC[0].style[ob.CSStransformName]="",ob.$E.vwImgC.css({opacity:0}),Za(a,c)}})}break;case"slideOLD":var g="nextImage"==c?ob.$E.vwImgN:ob.$E.vwImgP;
// if( G.CSStransformName == null || ( G.isIOS && G.IOSversion < 6 ) ) {
if(null==ob.CSStransformName)
// animate LEFT
g.css({opacity:0,left:0,visibility:"visible"}),jQuery.when(ob.$E.vwImgC.animate({left:("nextImage"==c?-jb().w:jb().w)+"px"},500),g.animate({opacity:1},300)).done(function(){Za(a,c)});else{
// animate using TRANSLATEX
g.css({opacity:1,left:0,visibility:"visible"});var h="nextImage"==c?-jb().w:jb().w;g[0].style[ob.CSStransformName]="translateX("+-h+"px) ";var i={v:ob.imageSwipePosX},j={v:"nextImage"==c?-jb().w:jb().w};jQuery(i).animate(j,{duration:400,easing:"linear",step:function(a){window.requestAnimationFrame(function(){ob.$E.vwImgC[0].style[ob.CSStransformName]="translateX("+a+"px)",
//G.$E.vwImgC.css({ opacity: (1-Math.abs(currentValue/dir)) });
g[0].style[ob.CSStransformName]="translateX("+(-h+a)+"px) "})},complete:function(){window.requestAnimationFrame(function(){ob.$E.vwImgC[0].style[ob.CSStransformName]="",
//G.$E.vwImgC.css({ opacity:0 });
Za(a,c)})}})}break;case"slide":var g="nextImage"==c?ob.$E.vwImgN:ob.$E.vwImgP;
// if( G.CSStransformName == null || ( G.isIOS && G.IOSversion < 6 ) ) {
if(null==ob.CSStransformName)
// animate LEFT
g.css({opacity:0,left:0,visibility:"visible"}),jQuery.when(ob.$E.vwImgC.animate({left:2*("nextImage"==c?-jb().w:jb().w)+"px"},500),g.animate({opacity:1},300)).done(function(){Za(a,c)});else{
// animate using TRANSLATEX
var h="nextImage"==c?-jb().w:jb().w;g.css({opacity:1,left:0,visibility:"visible"}),g[0].style[ob.CSStransformName]="translateX("+-h+"px) ";var f=new b;f.tween({from:{t:ob.imageSwipePosX},to:{t:"nextImage"==c?-jb().w:jb().w},attachment:{idx:a,dT:c,$e:g,dir:h},duration:300,step:function(a,b){ob.$E.vwImgC[0].style[ob.CSStransformName]="translateX("+a.t+"px)",b.$e[0].style[ob.CSStransformName]="translateX("+(-b.dir+a.t)+"px) "},finish:function(a,b){ob.$E.vwImgC[0].style[ob.CSStransformName]="",b.$e[0].style[ob.CSStransformName]="",Za(b.idx,b.dT)}})}break;case"slideAppear":default:var h=jb().w+"px",g=ob.$E.vwImgP;"nextImage"==c&&(h="-"+h,g=ob.$E.vwImgN),g.css({opacity:0,left:0,visibility:"visible"}),jQuery.when(ob.$E.vwImgC.animate({left:h,opacity:0},500),g.animate({opacity:1},300)).done(function(){Oa(0),Za(a,c)})}}function Za(a,b){if(ab(a),ob.O.debugMode&&console.timeline&&console.timelineEnd("nanoGALLERYviewer"),"function"!=typeof ob.O.fnImgDisplayed||ob.O.fnImgDisplayed(ob.I[a].$elt,ob.I[a])){ob.imageSwipePosX=0,ob.$E.vwImgC.off("click"),ob.$E.vwImgC.removeClass("imgCurrent");var c=ob.$E.vwImgC;switch(b){case"nextImage":ob.$E.vwImgC=ob.$E.vwImgN,ob.$E.vwImgN=c;break;case"previousImage":ob.$E.vwImgC=ob.$E.vwImgP,ob.$E.vwImgP=c}ob.$E.vwImgC.addClass("imgCurrent"),ob.$E.vwImgN.css({opacity:0,left:0,visibility:"hidden"}).attr("src",ob.emptyGif).attr("src",ob.I[$a(a)].responsiveURL()),
// G.$E.vwImgN.css({ opacity:0, left:0, visibility:'hidden', 'background-image':'url('+G.I[GetNextImageIdx(imageIdx)].responsiveURL()+')' }).attr('src',G.emptyGif);
ob.$E.vwImgP.css({opacity:0,left:0,visibility:"hidden"}).attr("src",ob.emptyGif).attr("src",ob.I[_a(a)].responsiveURL()),
// G.$E.vwImgP.css({ opacity:0, left:0, visibility:'hidden', 'background-image':'url('+G.I[GetPreviousImageIdx(imageIdx)].responsiveURL()+')'}).attr('src',G.emptyGif);
ob.$E.vwImgC.on("click",function(a){a.stopPropagation(),a.pageX<jQuery(window).width()/2?Xa():Va()}),cb(),
// TODO: this code does not work
//jQuery(G.containerViewerContent).item.$getElt('img').on('resize', function(){
//  ResizeInternalViewer('.imgCurrent');
//  console.log('resized');
//});
ob.viewerImageIsChanged=!1}}function $a(a){for(var b=ob.I.length,c=-1,d=a+1;b>d;d++)if(ob.I[d].albumID==ob.I[a].albumID&&"image"==ob.I[d].kind){c=d;break}if(-1==c)for(var d=0;a>=d;d++)if(ob.I[d].albumID==ob.I[a].albumID&&"image"==ob.I[d].kind){c=d;break}return c}function _a(a){for(var b=-1,c=a-1;c>=0;c--)if(ob.I[c].albumID==ob.I[a].albumID&&"image"==ob.I[c].kind){b=c;break}if(-1==b)for(var c=ob.I.length-1;c>=a;c--)if(ob.I[c].albumID==ob.I[a].albumID&&"image"==ob.I[c].kind){b=c;break}return b}function ab(a){if(ob.O.viewerToolbar.display){ob.$E.conVwTb.css({visibility:"visible"});var b=!1;
// set title
void 0!==ob.I[a].title&&""!=ob.I[a].title?(ob.$E.conVwTb.find(".title").html(ob.I[a].title),b=!0):ob.$E.conVwTb.find(".title").html(""),
// set description
void 0!==ob.I[a].description&&""!=ob.I[a].description?(ob.$E.conVwTb.find(".description").html(ob.I[a].description),b=!0):ob.$E.conVwTb.find(".description").html("");
// custom elements
var c=ob.$E.conVwTb.find(".ngCustomBtn");c.length>0&&"function"==typeof ob.O.fnImgToolbarCustDisplay&&ob.O.fnImgToolbarCustDisplay(c,ob.I[a],e()),
// if( setTxt && (G.O.viewerToolbar.label == 'always' || G.O.viewerToolbar.label == G.toolbarMode) ) {
b&&("std"==ob.toolbarMode?ob.O.viewerToolbar.standard:ob.O.viewerToolbar.minimized).indexOf("label")>=0?ob.$E.conVwTb.find(".label").show():ob.$E.conVwTb.find(".label").hide();
// set page number
var d=oa();d>0&&ob.$E.conVwTb.find(".pageCounter").html(ob.I[a].imageNumber+1+"/"+d)}}function bb(a){if(ob.viewerImageIsChanged&&ob.$E.vwContent.find("*").stop(!0,!0),ob.viewerImageIsChanged=!1,ob.containerViewerDisplayed){if(
// window.clearInterval(G.viewerResizeTimerID);
window.clearTimeout(ob.viewerResizeTimerID),ob.playSlideshow&&(window.clearInterval(ob.playSlideshowTimerID),ob.playSlideshow=!1),ob.viewerSwipe.removeEventListeners(),ob.viewerSwipe=null,ob.O.galleryFullpageButton&&ob.$E.base.hasClass("fullpage")||// avoid displaying scrollbar when gallery is in fullpage mode
k(),ob.viewerIsFullscreen&&(ob.viewerIsFullscreen=!1,ngscreenfull.exit()),ob.$E.conVwCon.hide(0).off().show(0).html("").remove(),ob.containerViewerDisplayed=!1,-1!=ob.albumIdxToOpenOnViewerClose)S(ob.albumIdxToOpenOnViewerClose,!0);else{if(ob.O.locationHash&&a){var b=ob.I[ob.viewerCurrentItemIdx].albumID,c="nanogallery/"+ob.baseEltID+"/"+b;ob.lastLocationHash="#"+c;try{top.location.hash=c}catch(d){ob.O.locationHash=!1}}ya()}ob.timeImgChanged=(new Date).getTime()}}function cb(){ob.containerViewerDisplayed&&((new Date).getTime()-ob.viewerResizeTimerLastRun<100||
//window.clearInterval(G.viewerResizeTimerID);
//G.viewerResizeTimerID=window.setInterval(function(){ResizeInternalViewer()},200);
window.requestAnimationFrame(function(){var a=ob.$E.conVw.width(),b=ob.$E.conVw.height(),c=ob.$E.vwImgC,d=c.height(),e=c.width(),f=c.outerHeight(!0),g=c.outerHeight(!1),h=ob.$E.conVwTb.find(".toolbar"),i=h.outerHeight(!0);40>=d||!ob.O.viewerToolbar.display?ob.$E.conVwTb.css({visibility:"hidden"}):ob.$E.conVwTb.css({visibility:"visible"});var j=Math.abs(ob.$E.vwContent.outerHeight(!0)-ob.$E.vwContent.height()),// vertical margin+border+padding
k=Math.abs(ob.$E.vwContent.outerWidth(!0)-ob.$E.vwContent.width()),// horizontal margin+border+padding
l=g-c.innerHeight(),m=Math.abs(c.outerWidth(!1)-c.innerWidth()),n=Math.abs(c.innerHeight()-d),o=Math.abs(c.innerWidth()-e),p=l+n,//+tmargin;
q=m+o,//+tmargin;
r=0;"innerImage"!=ob.O.viewerToolbar.style&&(r=i);var s=b-r-j,t=a-k;switch(ob.O.viewerToolbar.position){case"top":ob.$E.vwContent.css({height:s,width:t,top:r});var u=0;"innerImage"==ob.O.viewerToolbar.style&&(u=Math.abs(f-d)/2+5),"stuckImage"==ob.O.viewerToolbar.style&&(u=Math.abs(f-d)/2-p),ob.$E.conVwTb.css({top:u});break;case"bottom":default:ob.$E.vwContent.css({height:s,width:t});var u=0;"innerImage"==ob.O.viewerToolbar.style&&(u=Math.abs(f-d)/2+5),"stuckImage"==ob.O.viewerToolbar.style&&(u=Math.abs(f-d)/2-p),ob.$E.conVwTb.css({bottom:u})}"innerImage"==ob.O.viewerToolbar.style&&h.css({"max-width":e}),"fullWidth"==ob.O.viewerToolbar.style&&h.css({width:t}),ob.$E.conVwTb.css({height:i}),// resize toolbar container to toolbar size
ob.$E.vwContent.children("img").css({"max-width":t-q,"max-height":s-p}),
// G.$E.vwContent.children('img').css({'width':'100%', 'height':'100%' });
// G.$E.vwContent.children('img').css({'background-size':'contain', 'background-position':'center', 'background-repeat':'no-repeat' });
ob.$E.vwContent.children("img").css({"object-fit":"contain"}),ob.viewerResizeTimerID=window.setTimeout(cb,100),ob.viewerResizeTimerLastRun=(new Date).getTime()}))}function db(a){var b=a,c=[],d=0;c.push(ob.I[b]);for(var e=ob.I.length,f=b+1;e>f;f++)"image"==ob.I[f].kind&&ob.I[f].albumID==ob.I[a].albumID&&""==ob.I[f].destinationURL&&(d++,c.push(ob.I[f]));for(var f=0;b>f;f++)"image"==ob.I[f].kind&&ob.I[f].albumID==ob.I[a].albumID&&""==ob.I[f].destinationURL&&(d++,c.push(ob.I[f]));ob.O.fnThumbnailOpen(c)}function eb(a){var b=a,c=[],d=0;c[d]=new Object,c[d].href=ob.I[b].responsiveURL(),c[d].title=ob.I[b].title;for(var e=ob.I.length,f=b+1;e>f;f++)"image"==ob.I[f].kind&&ob.I[f].albumID==ob.I[a].albumID&&""==ob.I[f].destinationURL&&(d++,c[d]=new Object,c[d].href=ob.I[f].responsiveURL(),c[d].title=ob.I[f].title);for(var f=0;b>f;f++)"image"==ob.I[f].kind&&ob.I[f].albumID==ob.I[a].albumID&&""==ob.I[f].destinationURL&&(d++,c[d]=new Object,c[d].href=ob.I[f].responsiveURL(),c[d].title=ob.I[f].title);null!=ob.O.fancyBoxOptions?jQuery.fancybox(c,ob.O.fancyBoxOptions):jQuery.fancybox(c,{autoPlay:!1,nextEffect:"fade",prevEffect:"fade",scrolling:"no",helpers:{buttons:{position:"bottom"}}})}
// ##### BREADCRUMB/THUMBNAIL COLOR SCHEME #####
function fb(a){var b=null;switch(qb(ob.O.colorScheme)){case"object":// user custom color scheme object
b=ob.colorScheme_default,jQuery.extend(!0,b,ob.O.colorScheme),ob.colorSchemeLabel="nanogallery_colorscheme_custom_"+ob.baseEltID;break;case"string":// name of an internal defined color scheme
switch(ob.O.colorScheme){case"none":return;case"light":b=ob.colorScheme_light,ob.colorSchemeLabel="nanogallery_colorscheme_light";break;case"lightBackground":b=ob.colorScheme_lightBackground,ob.colorSchemeLabel="nanogallery_colorscheme_lightBackground";break;case"darkRed":b=ob.colorScheme_darkRed,ob.colorSchemeLabel="nanogallery_colorscheme_darkred";break;case"darkGreen":b=ob.colorScheme_darkGreen,ob.colorSchemeLabel="nanogallery_colorscheme_darkgreen";break;case"darkBlue":b=ob.colorScheme_darkBlue,ob.colorSchemeLabel="nanogallery_colorscheme_darkblue";break;case"darkOrange":b=ob.colorScheme_darkOrange,ob.colorSchemeLabel="nanogallery_colorscheme_darkorange";break;case"default":case"dark":default:b=ob.colorScheme_default,ob.colorSchemeLabel="nanogallery_colorscheme_default"}break;default:return void hb("Error in colorScheme parameter.")}
//var s1='.nanogallery_theme_'+G.O.theme+' ';
var c="."+ob.colorSchemeLabel+" ",d=c+".nanoGalleryNavigationbar { background:"+b.navigationbar.background+" !important; }\n";void 0!==b.navigationbar.border&&(d+=c+".nanoGalleryNavigationbar { border:"+b.navigationbar.border+" !important; }\n"),void 0!==b.navigationbar.borderTop&&(d+=c+".nanoGalleryNavigationbar { border-top:"+b.navigationbar.borderTop+" !important; }\n"),void 0!==b.navigationbar.borderBottom&&(d+=c+".nanoGalleryNavigationbar { border-bottom:"+b.navigationbar.borderBottom+" !important; }\n"),void 0!==b.navigationbar.borderRight&&(d+=c+".nanoGalleryNavigationbar { border-right:"+b.navigationbar.borderRight+" !important; }\n"),void 0!==b.navigationbar.borderLeft&&(d+=c+".nanoGalleryNavigationbar { border-left:"+b.navigationbar.borderLeft+" !important; }\n"),d+=c+".nanoGalleryNavigationbar .oneFolder  { color:"+b.navigationbar.color+" !important; }\n",d+=c+".nanoGalleryNavigationbar .separator  { color:"+b.navigationbar.color+" !important; }\n",d+=c+".nanoGalleryNavigationbar .separatorRTL  { color:"+b.navigationbar.color+" !important; }\n",d+=c+".nanoGalleryNavigationbar .nanoGalleryTags { color:"+b.navigationbar.color+" !important; }\n",d+=c+".nanoGalleryNavigationbar .setFullPageButton { color:"+b.navigationbar.color+" !important; }\n",d+=c+".nanoGalleryNavigationbar .removeFullPageButton { color:"+b.navigationbar.color+" !important; }\n",d+=c+".nanoGalleryNavigationbar .oneFolder:hover { color:"+b.navigationbar.colorHover+" !important; }\n",d+=c+".nanoGalleryNavigationbar .separatorRTL:hover { color:"+b.navigationbar.colorHover+" !important; }\n",d+=c+".nanoGalleryNavigationbar .nanoGalleryTags:hover { color:"+b.navigationbar.colorHover+" !important; }\n",d+=c+".nanoGalleryNavigationbar .setFullPageButton:hover { color:"+b.navigationbar.colorHover+" !important; }\n",d+=c+".nanoGalleryNavigationbar .removeFullPageButton:hover { color:"+b.navigationbar.colorHover+" !important; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer { background:"+b.thumbnail.background+" !important; border:"+b.thumbnail.border+" !important; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .imgContainer { background:"+b.thumbnail.background+" !important; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .labelImage{ background:"+b.thumbnail.labelBackground+" ; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .labelImageTitle  { color:"+b.thumbnail.titleColor+" !important; Text-Shadow:"+b.thumbnail.titleShadow+" !important; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .labelImageTitle:before { color:"+b.thumbnail.titleColor+" !important; Text-Shadow:"+b.thumbnail.titleShadow+" !important; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .labelFolderTitle { color:"+b.thumbnail.titleColor+" !important; Text-Shadow:"+b.thumbnail.titleShadow+" !important; }\n";var e=b.thumbnail.labelBackground;"transparent"==e&&(e=""),d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .labelFolderTitle > span { background-color:"+b.thumbnail.titleColor+" !important; color:"+e+" !important; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .labelFolderTitle:before { color:"+b.thumbnail.titleColor+" !important; Text-Shadow:"+b.thumbnail.titleShadow+" !important; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .labelDescription { color:"+b.thumbnail.descriptionColor+" !important; Text-Shadow:"+b.thumbnail.descriptionShadow+" !important; }\n",d+=c+".nanoGalleryContainer > .nanoGalleryThumbnailContainer .labelDescription > span { background-color:"+b.thumbnail.titleColor+" !important; color:"+e+" !important; }\n",ob.O.paginationDots&&(d+=c+".nanoGalleryPaginationDot > .paginationItem { border:"+b.thumbnail.paginationDotBorder+" !important; background:"+b.thumbnail.paginationDotBack+" !important;}\n",d+=c+".nanoGalleryPaginationDot > .currentPage { background:"+b.thumbnail.paginationDotSelBack+" !important;}\n");
// gallery fullpage background color
var f="nanogallery_galleryfullpage_bgcolor_"+ob.baseEltID;d+="."+f+".fullpage { background:"+ob.O.galleryFullpageBgColor+" !important; }\n",jQuery("head").append("<style>"+d+"</style>"),jQuery(a).addClass(ob.colorSchemeLabel),jQuery(a).addClass(f)}
// ##### VIEWER COLOR SCHEME #####
function gb(a){var b=null;switch(qb(ob.O.colorSchemeViewer)){case"object":// user custom color scheme object
b=ob.colorSchemeViewer_default,jQuery.extend(!0,b,ob.O.colorSchemeViewer),ob.colorSchemeLabel="nanogallery_colorschemeviewer_custom";break;case"string":// name of an internal defined color scheme
switch(ob.O.colorSchemeViewer){case"none":return;case"light":b=ob.colorSchemeViewer_light,ob.colorSchemeLabel="nanogallery_colorschemeviewer_light";break;case"darkRed":b=ob.colorSchemeViewer_darkRed,ob.colorSchemeLabel="nanogallery_colorschemeviewer_darkred";break;case"darkGreen":b=ob.colorSchemeViewer_darkGreen,ob.colorSchemeLabel="nanogallery_colorschemeviewer_darkgreen";break;case"darkBlue":b=ob.colorSchemeViewer_darkBlue,ob.colorSchemeLabel="nanogallery_colorschemeviewer_darkblue";break;case"darkOrange":b=ob.colorSchemeViewer_darkOrange,ob.colorSchemeLabel="nanogallery_colorschemeviewer_darkorange";break;case"dark":b=ob.colorSchemeViewer_dark,ob.colorSchemeLabel="nanogallery_colorschemeviewer_dark";break;case"default":default:b=ob.colorSchemeViewer_default,ob.colorSchemeLabel="nanogallery_colorschemeviewer_default"}break;default:return void hb("Error in colorSchemeViewer parameter.")}
//var s1='.nanogallery_theme_'+G.O.theme+' ';
var c="."+ob.colorSchemeLabel+" ",d=c+".nanoGalleryViewer { background:"+b.background+" !important; }\n";d+=c+".nanoGalleryViewer .content img { border:"+b.imageBorder+" !important; box-shadow:"+b.imageBoxShadow+" !important; }\n",d+=c+".nanoGalleryViewer .toolbar { background:"+b.barBackground+" !important; border:"+b.barBorder+" !important; color:"+b.barColor+" !important; }\n",d+=c+".nanoGalleryViewer .toolbar .previousButton:after { color:"+b.barColor+" !important; }\n",d+=c+".nanoGalleryViewer .toolbar .nextButton:after { color:"+b.barColor+" !important; }\n",d+=c+".nanoGalleryViewer .toolbar .closeButton:after { color:"+b.barColor+" !important; }\n",d+=c+".nanoGalleryViewer .toolbar .label .title { color:"+b.barColor+" !important; }\n",d+=c+".nanoGalleryViewer .toolbar .label .description { color:"+b.barDescriptionColor+" !important; }\n",jQuery("head").append("<style>"+d+"</style>"),jQuery(a).addClass(ob.colorSchemeLabel)}
// #################
// ##### TOOLS #####
// #################
// Display a message
function hb(a,b){ib(a),null!=ob.$E.conConsole&&(ob.$E.conConsole.css({visibility:"visible",height:"auto"}),0==b?ob.$E.conConsole.append("<p>"+a+"</p>"):ob.$E.conConsole.append("<p>nanoGALLERY: "+a+" ["+ob.baseEltID+"]</p>"))}
// write to console log
function ib(a){window.console&&console.log("nanoGALLERY: "+a+" ["+ob.baseEltID+"]")}
// get viewport coordinates and size
function jb(){var a=jQuery(window);
// to simulate smaller device screen width
return vpW=a.width(),ob.O.demoViewportWidth>0&&(ob.O.demoViewportWidth<vpW&&(vpW=ob.O.demoViewportWidth),ob.O.maxWidth=vpW,jQuery(ob.$E.base).css({width:ob.O.maxWidth}),jQuery(ob.$E.base).css({"margin-left":"auto"}),jQuery(ob.$E.base).css({"margin-right":"auto"})),{l:a.scrollLeft(),t:a.scrollTop(),w:vpW,h:a.height()}}function kb(a,b){var c=jb(),d=a.offset(),e=a.outerHeight(!0),f=a.outerWidth(!0);return d.top>=c.t-b&&d.top+e<=c.t+c.h+b&&d.left>=c.l-b&&d.left+f<=c.l+c.w+b?!0:!1}function lb(a,b){var c=jb(),d=a.offset(),e=a.outerHeight(!0);a.outerWidth(!0);return 0==c.t&&d.top<=c.t+c.h?!0:d.top>=c.t&&d.top+e<=c.t+c.h-b?!0:!1}
// set z-index to display element on top of all others
function mb(a,b){var c=0;""==a&&(a="*"),jQuery(a).each(function(){var a=parseInt(jQuery(this).css("z-index"));c=a>c?a:c}),c++,jQuery(b).css("z-index",c)}
//+ Jonas Raoni Soares Silva
//@ http://jsfromhell.com/array/shuffle [v1.0]
function nb(a){//v1.0
for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}/**
    * Force reload the current album, if provided by Json
    */
this.ReloadAlbum=function(){if(""===ob.O.kind)throw"Not supported for this kind.";
// find current album index
for(var a=ob.I.length,b=-1,c=0;a>c;c++)if(ob.lastOpenAlbumID==ob.I[c].GetID()){b=c;break}if(-1==b)throw"Current album not found.";
// unselect everything & remove link to album (=logical delete)
ob.O.keepSelection===!1&&(ob.selectedItems=[]);for(var d=0;a>d;d++)ob.O.keepSelection===!1&&(ob.I[d].selected=!1),ob.I[d].albumID==b&&(ob.I[d].albumID=-1);switch(ob.I[b].contentIsLoaded=!1,ob.lastOpenAlbumID=-1,ob.O.kind){case"json":return D(b,!1,-1,!1,!0);case"flickr":return G(b,!1,-1,!1,!0);case"picasa":default:return M(b,!1,-1,!1,!0)}},/**
    * When in Album view, moves to next album
    */
this.moveToNextAlbum=function(){U()},/**
    * When in Album view, moves to previous album
    */
this.moveToPreviousAlbum=function(){V()},
// Closes the image viewer
this.closeViewer=function(){return bb(!0),!1},
// Toggle Toolbar between standard and minimized
this.minimizeToolbar=function(){return Ta(),!1},
// Toggle Toolbar between standard and minimized
this.maximizeToolbar=function(){return Sa(),!1},/**
    * Force recheck of container size and resize accordingly
    */
this.RefreshSize=function(){ca()},
// Display one item
// itemID syntax:
//    - albumID --> display one album
//    - albumID/imageID --> display one image
this.displayItem=function(a){return w(!1,a,!0)},
// manage gallery pagination
// Pagination - goto previous page
this.paginationPreviousPage=function(){na()},
// Pagination - goto next page
this.paginationNextPage=function(){ma()},
// Pagination - goto specific page
this.paginationGotoPage=function(b){var c=ob.$E.conPagin.data("galleryIdx");lb(ob.$E.base,0)||a("html, body").animate({scrollTop:ob.$E.base.offset().top},200),b>1&&b--,pa(c,b)},
// Pagination - count number of pages
this.paginationCountPages=function(){var a=ob.$E.conPagin.data("galleryIdx"),b=0;
// pagination - max lines per page mode
return ob.pgMaxLinesPerPage>0&&(b=ob.I[a].contentLength/(ob.pgMaxLinesPerPage*ob.pgMaxNbThumbnailsPerRow)),n2=Math.ceil(b),n2},
// Viewer - Count number of images
this.galleryCountImages=function(){return oa()},/**
     * Get an item by its index
     * @param {int} index
     * @returns {object}
     */
this.GetItem=function(a){if(isNaN(a))throw"index must be a number";return ob.I[a]},/**
     * Get an array of every items handled by nanoGallery
     * @returns {nanoGALLERY.G.I|Array}
     */
this.GetItems=function(){return ob.I},/**
     * Get the index of an item in the G.I array
     * @param {object} items
     * @returns {array}
     */
this.GetItemsIndex=function(a){for(var b=[],c=a.length,d=0;c>d;d++){if(isNaN(a[d])?index=ob.I.indexOf(a[d]):index=a[d],isNaN(index))throw"This item does not exists";b.push(index)}return b},/**
     * Set one or several items selected
     * @param {array} items
     */
this.SetSelectedItems=function(a){for(var b=a.length,c=0;b>c;c++)null!==a[c].$elt&&va(a[c],!0)},/**
     * Set one or several items unselected
     * @param {array} items
     */
this.SetUnselectedItems=function(a){for(var b=a.length,c=0;b>c;c++)null!==a[c].$elt&&va(a[c],!1)},/**
     * Returns an array of selected items
     * @returns {Array}
     */
this.GetSelectedItems=function(){return ob.selectedItems},/**
     * Returns current item of image in viewer
     * @returns {int}
     */
this.GetCurrentViewedItem=function(){return ob.containerViewerDisplayed?ob.I[ob.viewerCurrentItemIdx]:null},/**
     * Returns current index of image in viewer
     * @returns {int}
     */
this.GetCurrentViewedItemIdx=function(){return ob.containerViewerDisplayed?ob.viewerCurrentItemIdx:-1},/**
     * Returns the value of an option
     * @param {string} option
     * @returns {nanoGALLERY.G.O}
     */
this.Get=function(a){return ob.O[a]},/**
     * Set a new value for a defined option
     * @param {string} option
     */
this.Set=function(a,b){ob.O[a]=b},this.SetSelectMode=function(b){"undefined"==typeof b&&ob.selectModeForce===!0&&(b=ob.selectMode),(b===!0||b===!1||"image"===b||"album"===b)&&(ob.selectModeForce=b!==!1,ob.selectMode=b,"album"===b||"image"==b?ob.$E.base.find(".nanoGalleryThumbnailContainer").each(function(){a(this).hasClass("album")&&"image"===b||!a(this).hasClass("album")&&"album"===b?a(this).addClass("unselectable"):a(this).removeClass("unselectable")}):ob.$E.base.find(".nanoGalleryThumbnailContainer").removeClass("unselectable"),(ob.O.keepSelection===!1||b===!1)&&this.SetUnselectedItems(ob.I),"function"==typeof ob.O.fnChangeSelectMode&&ob.O.fnChangeSelectMode(ob.selectMode))},this.GetSelectMode=function(){return ob.selectMode};
// Global data for this nanoGALLERY instance
var ob=this;ob.I=[],// gallery items
ob.O=null,// user options
ob.$E={base:null,// $g_baseControl = null,
conTnParent:null,// $g_containerThumbnailsParent
conLoadingB:null,// loading bar - nanoGalleryLBarOff
conConsole:null,// $g_containerConsole
conTn:null,// $g_containerThumbnails
conTnHid:null,// $g_containerThumbnailsHidden
conPagin:null,// $g_containerPagination
conBC:null,// $g_containerBreadcrumb
conNavB:null,// $g_containerNavigationbar
conNavBCon:null,// $g_containerNavigationbarCont
conNavBFullpage:null,// breadcrumb fullpage button
conVwCon:null,// $g_containerViewerContainer
conVw:null,// $g_containerViewer
conVwTb:null,// $g_containerViewerToolbar
vwImgP:null,// $g_ViewerImagePrevious
vwImgN:null,// $g_ViewerImageNext
vwImgC:null,// $g_ViewerImageCurrent
vwContent:null,// $g_containerViewerContent
vwLogo:null},ob.i18nTranslations={paginationPrevious:"Previous",paginationNext:"Next",breadcrumbHome:"List of Albums",thumbnailImageTitle:"",thumbnailAlbumTitle:"",thumbnailImageDescription:"",thumbnailAlbumDescription:""},ob.$currentTouchedThumbnail=null,// currently touched thumbnail
ob.baseEltID=null,ob.containerTags=null,ob.containerNavigationbarContDisplayed=!1,ob.containerViewerDisplayed=!1,ob.containerThumbnailsDisplayed=!1,ob.tn={// GENERAL THUMBNAILS PROPERTIES
displayInterval:30,// delay between 2 thumbnails display
lazyLoadTreshold:100,// image lazy load treshold in pixel
scale:1,// image scale depending of the hover effect
borderWidth:0,// thumbnail container border width
borderHeight:0,// thumbnail container border height
imgcBorderHeight:0,// image container border height
imgcBorderWidth:0,// image container border width
labelHeight:{// in case label on bottom, otherwise=0
l1:0,lN:0,get:function(){return ob.tn.labelHeight[ob.curNavLevel]}},outerWidth:{// default thumbnail outerWidths (not used in case thumbnailWidth='auto'
l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0},get:function(){return ob.tn.outerWidth[ob.curNavLevel][ob.curWidth]}},outerHeight:{// default thumbnail outerHeights (not used in case thumbnailHeight='auto'
l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0},get:function(){return ob.tn.outerHeight[ob.curNavLevel][ob.curWidth]}},settings:{// user defined width/height to display depending on the screen size
width:{l1:{xs:0,sm:0,me:0,la:0,xl:0,xsc:"u",smc:"u",mec:"u",lac:"u",xlc:"u"},lN:{xs:0,sm:0,me:0,la:0,xl:0,xsc:"u",smc:"u",mec:"u",lac:"u",xlc:"u"}},height:{l1:{xs:0,sm:0,me:0,la:0,xl:0,xsc:"u",smc:"u",mec:"u",lac:"u",xlc:"u"},lN:{xs:0,sm:0,me:0,la:0,xl:0,xsc:"u",smc:"u",mec:"u",lac:"u",xlc:"u"}},getH:function(){return ob.tn.settings.height[ob.curNavLevel][ob.curWidth]},getW:function(){return ob.tn.settings.width[ob.curNavLevel][ob.curWidth]}},getHE:function(){return"l1"==ob.curNavLevel&&0!==ob.tnL1HE.length?ob.tnL1HE:ob.tnHE},styleFTitle:"",styleITitle:"",styleDesc:"",styleLabelImage:"",styleL1FTitle:"",styleL1ITitle:"",styleL1Desc:"",styleL1LabelImage:""},ob.tnHE=[],// Thumbnail hover effects
ob.tnL1HE=[],// Thumbnail hover effects - Level 1
ob.L={// Layout informations
nbMaxTnPerRow:0},ob.blackList=null,ob.whiteList=null,ob.albumList=null,ob.galleryItemsCount=0,ob.toolbarMode="std",// image toolbar display mode
ob.playSlideshow=!1,// slideshow mode
ob.playSlideshowTimerID=0,// slideshow mode timer ID
ob.slideshowDelay=3e3,// slideshow mode delay
ob.touchAutoOpenDelayTimerID=0,ob.supportFullscreenAPI=!1,ob.viewerIsFullscreen=!1,ob.bodyOverflowInitial=null,ob.i18nLang="",ob.timeImgChanged=0,ob.timeLastTouchStart=0,ob.pgMaxNbThumbnailsPerRow=1,ob.pgMaxLinesPerPage=0,ob.lastOpenAlbumID=-1,ob.lastLocationHash="",ob.touchSelectTO=null,ob.viewerImageIsChanged=!1,ob.viewerResizeTimerID=-1,ob.viewerResizeTimerLastRun=-1,ob.viewerCurrentItemIdx=-1,ob.imageSwipePosX=0,ob.albumIdxToOpenOnViewerClose=-1,ob.custGlobals={},ob.delayedAlbumIdx=-1,ob.curAlbumIdx=-1,ob.delayedSetLocationHash=!1,ob.viewerSwipe=null,ob.isShiftPressed=!1,ob.isAltPressed=!1,ob.isCtrlPressed=!1,ob.isMetaPressed=!1,ob.selectedItems=[],ob.aengine="animate",// animation engine
ob.scrollTimeOut=0,ob.maxAlbums=1e6,ob.maxPhotos=1e6,ob.curNavLevel="l1",ob.curWidth="me",ob.gallerySwipeInitDone=!1,ob.emptyGif="data:image/gif;base64,R0lGODlhEAAQAIAAAP///////yH5BAEKAAEALAAAAAAQABAAAAIOjI+py+0Po5y02ouzPgUAOw==",ob.CSStransformName=g(["transform","msTransform","MozTransform","WebkitTransform","OTransform"]),ob.CSStransformStyle=g(["transformStyle","msTransformStyle","MozTransformStyle","WebkitTransformStyle","OTransformStyle"]),ob.CSSperspective=g(["perspective","msPerspective","MozPerspective","WebkitPerspective","OPerspective"]),ob.CSSbackfaceVisibilityName=g(["backfaceVisibility","msBackfaceVisibility","MozBackfaceVisibility","WebkitBackfaceVisibility","OBackfaceVisibility"]),ob.CSStransitionName=g(["transition","msTransition","MozTransition","WebkitTransition","OTransition"]),ob.CSSanimationName=g(["animation","msAnimation","MozAnimation","WebkitAnimation","OAnimation"]),/* IE detection. Copyright Julian Shapiro - Gist: https://gist.github.com/julianshapiro/9098609 */
ob.IE=function(){if(document.documentMode)return document.documentMode;for(var a=7;a>4;a--){var b=document.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}}(),ob.IOSversion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]}}(),ob.isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),ob.isGingerbread=/Android 2\.3\.[3-7]/i.test(navigator.userAgent),ob.openNoDelay=!1,ob.startDateTime=new Date,ob.toRender=[],
// ### Picasa/Google+
// square format : 32, 48, 64, 72, 104, 144, 150, 160 (cropped)
// details: https://developers.google.com/picasa-web/docs/2.0/reference
ob.picasa={url:function(){
// return (location.protocol=='https:' ? 'https://picasaweb.google.com/data/feed/api/' : 'https://picasaweb.google.com/data/feed/api/');
return ob.O.picasaUseUrlCrossDomain?"https://photos.googleapis.com/data/feed/api/":"https://picasaweb.google.com/data/feed/api/"},thumbSize:64,thumbAvailableSizes:new Array(32,48,64,72,94,104,110,128,144,150,160,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600),thumbAvailableSizesCropped:" 32 48 64 72 104 144 150 160 "},
// ### Flickr
// Details: http://www.flickr.com/services/api/misc.urls.html
ob.flickr={url:function(){
// Flickr API Going SSL-Only on June 27th, 2014
return"https://api.flickr.com/services/rest/"},thumbSize:"sq",thumbSizeX2:"sq",thumbAvailableSizes:new Array(75,100,150,240,500,640),thumbAvailableSizesStr:new Array("sq","t","q","s","m","z"),photoSize:"sq",photoAvailableSizes:new Array(75,100,150,240,500,640,1024,1024,1600,2048),photoAvailableSizesStr:new Array("sq","t","q","s","m","z","b","l","h","k"),ApiKey:"2f0e634b471fdb47446abcb9c5afebdc"},
// Color schemes - Gallery
ob.colorScheme_default={navigationbar:{background:"none",borderTop:"1px solid #555",borderBottom:"1px solid #555",borderRight:"",borderLeft:"",color:"#ccc",colorHover:"#fff"},thumbnail:{background:"#000",border:"1px solid #000",labelBackground:"rgba(34, 34, 34, 0.75)",titleColor:"#eee",titleShadow:"",descriptionColor:"#ccc",descriptionShadow:"",paginationDotBorder:"2px solid #fff",paginationDotBack:"#444",paginationDotSelBack:"#fff"}},ob.colorScheme_darkRed={
// #ffa3a3 #ff7373 #ff4040 #ff0000 #a60000
navigationbar:{background:"#a60000",border:"1px dotted #ff0000",color:"#ccc",colorHover:"#fff"},thumbnail:{background:"#a60000",border:"1px solid #ff0000",labelBackground:"rgba(134, 0, 0, 0.75)",titleColor:"#eee",titleShadow:"",descriptionColor:"#ccc",descriptionShadow:"",paginationDotBorder:"2px solid #d00",paginationDotBack:"#400",paginationDotSelBack:"#d00"}},ob.colorScheme_darkGreen={
// #97e697 #67e667 #39e639 #00cc00 #008500
navigationbar:{background:"#008500",border:"1px dotted #00cc00",color:"#ccc",colorHover:"#fff"},thumbnail:{background:"#008500",border:"1px solid #00cc00",labelBackground:"rgba(0, 105, 0, 0.75)",titleColor:"#eee",titleShadow:"",descriptionColor:"#ccc",descriptionShadow:"",paginationDotBorder:"2px solid #0c0",paginationDotBack:"#008500",paginationDotSelBack:"#0c0"}},ob.colorScheme_darkBlue={
// #a0b0d7 #7080d7 #4a60d7 #162ea2 #071871
navigationbar:{background:"#071871",border:"1px dotted #162ea2",color:"#ccc",colorHover:"#fff"},thumbnail:{background:"#071871",border:"1px solid #162ea2",labelBackground:"rgba(7, 8, 81, 0.75)",titleColor:"#eee",titleShadow:"",descriptionColor:"#ccc",descriptionShadow:"",paginationDotBorder:"2px solid #162ea2",paginationDotBack:"#071871",paginationDotSelBack:"#162ea2"}},ob.colorScheme_darkOrange={
// #ffd7b7 #ffd773 #ffc840 #ffb600 #a67600
navigationbar:{background:"#a67600",border:"1px dotted #ffb600",color:"#ccc",colorHover:"#fff"},thumbnail:{background:"#a67600",border:"1px solid #ffb600",labelBackground:"rgba(134, 86, 0, 0.75)",titleColor:"#eee",titleShadow:"",descriptionColor:"#ccc",descriptionShadow:"",paginationDotBorder:"2px solid #ffb600",paginationDotBack:"#a67600",paginationDotSelBack:"#ffb600"}},ob.colorScheme_light={navigationbar:{background:"none",borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd",borderRight:"",borderLeft:"",color:"#777",colorHover:"#eee"},thumbnail:{background:"#fff",border:"1px solid #fff",labelBackground:"rgba(60, 60, 60, 0.75)",titleColor:"#fff",titleShadow:"none",descriptionColor:"#eee",descriptionShadow:"none",paginationDotBorder:"2px solid #555",paginationDotBack:"#888",paginationDotSelBack:"#555"}},ob.colorScheme_lightBackground={navigationbar:{background:"none",border:"",color:"#000",colorHover:"#444"},thumbnail:{background:"#000",border:"1px solid #000",labelBackground:"rgba(34, 34, 34, 0.85)",titleColor:"#fff",titleShadow:"",descriptionColor:"#eee",descriptionShadow:"",paginationDotBorder:"2px solid #555",paginationDotBack:"#888",paginationDotSelBack:"#555"}},
// Color schemes - lightbox
ob.colorSchemeViewer_default={background:"#000",imageBorder:"4px solid #000",imageBoxShadow:"#888 0px 0px 0px",barBackground:"rgba(4, 4, 4, 0.7)",barBorder:"0px solid #111",barColor:"#eee",barDescriptionColor:"#aaa"},ob.colorSchemeViewer_dark={background:"rgba(1, 1, 1, 0.75)",imageBorder:"4px solid #f8f8f8",imageBoxShadow:"#888 0px 0px 20px",barBackground:"rgba(4, 4, 4, 0.7)",barBorder:"0px solid #111",barColor:"#eee",barDescriptionColor:"#aaa"},ob.colorSchemeViewer_darkRed={
// #ffa3a3 #ff7373 #ff4040 #ff0000 #a60000
background:"rgba(1, 1, 1, 0.75)",imageBorder:"4px solid #ffa3a3",imageBoxShadow:"#ff0000 0px 0px 20px",barBackground:"#a60000",barBorder:"2px solid #111",barColor:"#eee",barDescriptionColor:"#aaa"},ob.colorSchemeViewer_darkGreen={
// #97e697 #67e667 #39e639 #00cc00 #008500
background:"rgba(1, 1, 1, 0.75)",imageBorder:"4px solid #97e697",imageBoxShadow:"#00cc00 0px 0px 20px",barBackground:"#008500",barBorder:"2px solid #111",barColor:"#eee",barDescriptionColor:"#aaa"},ob.colorSchemeViewer_darkBlue={
// #a0b0d7 #7080d7 #4a60d7 #162ea2 #071871
background:"rgba(1, 1, 1, 0.75)",imageBorder:"4px solid #a0b0d7",imageBoxShadow:"#162ea2 0px 0px 20px",barBackground:"#071871",barBorder:"2px solid #111",barColor:"#eee",barDescriptionColor:"#aaa"},ob.colorSchemeViewer_darkOrange={
// #ffd7b7 #ffd773 #ffc840 #ffb600 #a67600
background:"rgba(1, 1, 1, 0.75)",imageBorder:"4px solid #ffd7b7",imageBoxShadow:"#ffb600 0px 0px 20px",barBackground:"#a67600",barBorder:"2px solid #111",barColor:"#eee",barDescriptionColor:"#aaa"},ob.colorSchemeViewer_light={background:"rgba(187, 187, 187, 0.75)",imageBorder:"none",imageBoxShadow:"#888 0px 0px 0px",barBackground:"rgba(4, 4, 4, 0.7)",barBorder:"0px solid #111",barColor:"#eee",barDescriptionColor:"#aaa"};/* ##### THUMBNAIL ELEMENT STRUCTURE #####

    +--------------------------+  -> G.tn.borderHeight/2        -+
    |                          |                                 | G.tn.outerHeight
    |+------------------------+|  -> =0 (always)            -+   | item.thumbFullHeight
    || subcontainer           ||                             |   |
    ||                        ||                             |   |
    || +--------------------+ ||  -> G.tn.imgcBorderHeight/2
    || | imgContainer       | ||
    || |+-------------------+ ||
    || || image             | ||
    || |+-------------------+ ||
    || +--------------------+ ||
    ||                        ||
    || +--------------------+ ||  -+ --> G.tn.labelBorderHeight
    || | labelImage         | ||   | G.tn.labelHeight
    || |+------------------+| ||   | (=0 --> overImage)
    || || labelTitle       || ||   | item.thumbLabelHeight
    || |+------------------+| ||   |
    || || labelDescription || ||
    || |+------------------+| ||
    || +--------------------+ ||
    ||                        ||
    |+------------------------+|
    +--------------------------+

    */
// **************************************************************************************
// Class to store one item (= one thumbnail)
// **************************************************************************************
var pb=function(){// private static --> all instances
// constructor
function a(a,c){var d=0;// private
// public (this instance only)
d=void 0===c||null===c?b++:c,this.GetID=function(){return d},this.title=a,this.description="",this.src="",this.width=0,this.height=0,this.destinationURL="",this.kind="",this.author="",this.thumbFullWidth=0,this.thumbFullHeight=0,this.thumbLabelWidth=0,this.thumbLabelHeight=0,this.thumbSizes={},this.thumbs={url:{l1:{xs:"",sm:"",me:"",la:"",xl:""},lN:{xs:"",sm:"",me:"",la:"",xl:""}},width:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}},height:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}}},this.picasaThumbs=null,this.hovered=!1,this.hoverInitDone=!1,this.contentIsLoaded=!1,this.contentLength=0,this.imageNumber=0,this.eltTransform={},this.albumID=0,this.paginationLastPage=0,this.paginationLastWidth=0,this.customData={},this.selected=!1,this.$elt=null,this.$Elts=[]}var b=1;
// public static
// public (shared across instances)
return a.get_nextId=function(){return b},a.prototype={
// cached sub elements
$getElt:function(a,b){return void 0!==this.$Elts[a]&&1==!b?this.$Elts[a]:(this.$Elts[a]=this.$elt.find(a),this.$Elts[a])},
// set thumbnail image real height for current level/resolution, and for all others level/resolutions having the same settings
thumbSetImgHeight:function(a){for(var b=["xs","sm","me","la","xl"],c=0;c<b.length;c++)ob.tn.settings.height.l1[b[c]]==ob.tn.settings.getH()&&ob.tn.settings.width.l1[b[c]]==ob.tn.settings.getW()&&(this.thumbs.height.l1[b[c]]=a);for(var c=0;c<b.length;c++)ob.tn.settings.height.lN[b[c]]==ob.tn.settings.getH()&&ob.tn.settings.width.l1[b[c]]==ob.tn.settings.getW()&&(this.thumbs.height.lN[b[c]]=a)},
// set thumbnail image real width for current level/resolution, and for all others level/resolutions having the same settings
thumbSetImgWidth:function(a){for(var b=["xs","sm","me","la","xl"],c=0;c<b.length;c++)ob.tn.settings.height.l1[b[c]]==ob.tn.settings.getH()&&ob.tn.settings.width.l1[b[c]]==ob.tn.settings.getW()&&(this.thumbs.width.l1[b[c]]=a);for(var c=0;c<b.length;c++)ob.tn.settings.height.lN[b[c]]==ob.tn.settings.getH()&&ob.tn.settings.width.l1[b[c]]==ob.tn.settings.getW()&&(this.thumbs.width.lN[b[c]]=a)},
// Returns Thumbnail image
thumbImg:function(){var a={src:"",width:0,height:0};return"dummydummydummy"==this.title?(a.src=ob.emptyGif,a):(a.src=this.thumbs.url[ob.curNavLevel][ob.curWidth],a.width=this.thumbs.width[ob.curNavLevel][ob.curWidth],a.height=this.thumbs.height[ob.curNavLevel][ob.curWidth],a)},
// for future use...
responsiveURL:function(){var a="";switch(ob.O.kind){case"":a=this.src;break;case"flickr":a=this.src;break;case"picasa":default:a=this.src}return a}},a}();
// ##########################
// ##### INITIALIZATION #####
// ##########################
this.Initiate=function(a,b){"use strict";
// Hide icons (thumbnails and breadcrumb)
if(ob.O=b,
// thumbnails - label
ob.O.thumbnailLabel.get=function(a){return"l1"==ob.curNavLevel&&void 0!==ob.O.thumbnailL1Label&&void 0!==ob.O.thumbnailL1Label[a]?ob.O.thumbnailL1Label[a]:ob.O.thumbnailLabel[a]},ob.O.thumbnailLabel.set=function(a,b){"l1"==ob.curNavLevel&&void 0!==ob.O.thumbnailL1Label&&void 0!==ob.O.thumbnailL1Label[a]?ob.O.thumbnailL1Label[a]=b:ob.O.thumbnailLabel[a]=b},ob.$E.base=jQuery(a),ob.baseEltID=ob.$E.base.attr("id"),ob.bodyOverflowInitial=jQuery("body").css("overflow"),
//    [TODO] deep linking support only once per page
//    if( G.O.locationHash ) {
//      alert(location.hash);
//      if( location.hash.length > 0 && location.hash.indexOf('#nanogallery/'+G.baseEltID) === 0 ) {
//        G.O.locationHash=false;
//        nanoConsoleLog('locationHash has been disabled in:' + G.baseEltID +'. This option can only be used for one nanoGALLERY per page.');
//      }
//    }
// POLYFILL FOR BIND function --> for older Safari mobile
// found on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Compatibility
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)
// closest thing possible to the ECMAScript 5
// internal IsCallable function
throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),String.prototype.replaceAll=function(a,b){return void 0===b?this.toString():this.split(a).join(b)},
// Detect the animation engine
// default is jQuery
"object"==qb(jQuery.velocity)?
// Velocity.js
ob.aengine="velocity":
// Transit.js
// if( jQuery.support.transition ) {    // conflict with bootstrap
"object"==qb(jQuery.transit)&&(ob.aengine="transition"),
// Set theme and colorScheme
jQuery(a).addClass("nanogallery_theme_"+ob.O.theme),fb(a),ob.O.thumbnailLabel.get("hideIcons")){var d=".nanogallery_thumbnails_icons_off ",e=d+".nanoGalleryContainer .nanoGalleryThumbnailContainer .labelImageTitle:before { display:none !important; }\n";e+=d+".nanoGalleryContainer .nanoGalleryThumbnailContainer .labelFolderTitle:before { display:none !important; }\n",jQuery("head").append("<style>"+e+"</style>"),jQuery(a).addClass("nanogallery_thumbnails_icons_off")}if(ob.O.galleryToolbarHideIcons){var d=".nanogallery_breadcrumb_icons_off ",e=d+".nanoGalleryNavigationbar .folderHome:before { display:none !important; }\n";e+=d+".nanoGalleryNavigationbar .folder:before { display:none !important; }\n",jQuery("head").append("<style>"+e+"</style>"),jQuery(a).addClass("nanogallery_breadcrumb_icons_off")}if("right"==ob.O.thumbnailLabel.get("align")){var d=".nanogallery_thumbnails_label_align_right ",e=d+".nanoGalleryContainer .nanoGalleryThumbnailContainer .labelImage { text-align : right !important; }\n";jQuery("head").append("<style>"+e+"</style>"),jQuery(a).addClass("nanogallery_thumbnails_label_align_right")}if("center"==ob.O.thumbnailLabel.get("align")){var d=".nanogallery_thumbnails_label_align_center ",e=d+".nanoGalleryContainer .nanoGalleryThumbnailContainer .labelImage { text-align : center !important; }\n";jQuery("head").append("<style>"+e+"</style>"),jQuery(a).addClass("nanogallery_thumbnails_label_align_center")}if("left"==ob.O.thumbnailLabel.get("align")){var d=".nanogallery_thumbnails_label_align_left ",e=d+".nanoGalleryContainer .nanoGalleryThumbnailContainer .labelImage { text-align : left !important; }\n";jQuery("head").append("<style>"+e+"</style>"),jQuery(a).addClass("nanogallery_thumbnails_label_align_left")}
// Build the gallery structure - add the containers
ob.$E.conNavBCon=jQuery('<div class="nanoGalleryNavigationbarContainer"></div>').appendTo(a),ob.$E.conNavBCon.hide(),//css('visibility','hidden');
ob.$E.conNavB=jQuery('<div class="nanoGalleryNavigationbar"></div>').appendTo(ob.$E.conNavBCon);var g="";switch(ob.O.RTL&&(g='style="text-align:right;direction:rtl;"'),ob.$E.conBC=jQuery('<div class="nanoGalleryBreadcrumb" '+g+"></div>").appendTo(ob.$E.conNavB),ob.$E.conLoadingB=jQuery('<div class="nanoGalleryLBarOff"><div></div><div></div><div></div><div></div><div></div></div>').appendTo(a),ob.$E.conTnParent=jQuery('<div class="nanoGalleryContainerParent"></div>').appendTo(a),ob.$E.conTn=jQuery('<div class="nanoGalleryContainer nGEvent"></div>').appendTo(ob.$E.conTnParent),ob.$E.conConsole=jQuery('<div class="nanoGalleryConsoleParent"></div>').appendTo(a),ob.O.thumbnailAlignment){case"left":ob.$E.conTnParent.css({"text-align":"left"}),ob.$E.conNavBCon.css({"margin-left":0});break;case"right":ob.$E.conTnParent.css({"text-align":"right"}),ob.$E.conNavBCon.css({"margin-right":0})}jQuery("head").append("<style>.nanogalleryHideElement {position: absolute !important; top: -9999px !important; left: -9999px !important;}</style>");var i=jQuery('<div class="nanogalleryHideElement '+jQuery(a).attr("class")+'"></div>').appendTo("body"),j=jQuery('<div class="nanoGalleryContainerParent"></div>').appendTo(i);if(ob.$E.conTnHid=jQuery('<div class="nanoGalleryContainer"></div>').appendTo(j),ob.O.supportIE8)
// POLYFILL FOR addEventListener/removeEventListener function --> for IE8
// found on https://gist.github.com/jonathantneal/3748027
try{!window.addEventListener&&function(a,b,c,d,e,f,g){a[d]=b[d]=c[d]=function(a,b){var c=this;g.unshift([c,a,b,function(a){a.currentTarget=c,a.preventDefault=function(){a.returnValue=!1},a.stopPropagation=function(){a.cancelBubble=!0},a.target=a.srcElement||c,b.call(c,a)}]),this.attachEvent("on"+a,g[0][3])},a[e]=b[e]=c[e]=function(a,b){for(var c,d=0;c=g[d];++d)if(c[0]==this&&c[1]==a&&c[2]==b)return this.detachEvent("on"+a,g.splice(d,1)[0][3])},a[f]=b[f]=c[f]=function(a){return this.fireEvent("on"+a.type,a)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[])}catch(k){return f(),!1}else if(ob.IE<=8)return f(),!1;
// check parameters consistency
o();
// pagination container
var l="";ob.O.RTL&&(l='style="direction:rtl;"'),ob.$E.conPagin=jQuery('<div class="nanoGalleryPagination'+(ob.O.paginationDots?"Dot":"")+'" '+l+"></div>").appendTo(ob.$E.conTnParent),ob.$E.conPagin.hide();
// attach events
new m(ob.$E.conTn[0]);
// i18n translations
u(),
// fullscreen API support
document.fullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled?ob.supportFullscreenAPI=!0:ib("Your browser does not support the fullscreen API. Fullscreen button will not be displayed."),
// cache some thumbnails data (sizes, styles...)
x(),ob.L.nbMaxTnPerRow=fa(),
// display an image on start and in fullscreen
ob.O.viewerFullscreen&&ob.O.openOnStart.indexOf("/")>0&&ngscreenfull.request(),
// lazy build the gallery
"loadData"!=ob.O.lazyBuild&&h();
// GLOBAL EVENT MANAGEMENT
// Page resize
var n=0;jQuery(window).resize(function(){n&&clearTimeout(n),ob.containerViewerDisplayed?cb():n=setTimeout(function(){var a=q();
// if( G.curAlbumIdx != -1 && G.curWidth != nw ) {
-1==ob.curAlbumIdx||ob.tn.settings.getH()==ob.tn.settings.height[ob.curNavLevel][a]&&ob.tn.settings.getW()==ob.tn.settings.width[ob.curNavLevel][a]?ca():(
// thumbnail size changed --> render the gallery with the new sizes
ob.curWidth=a,pa(ob.curAlbumIdx,0))},50)}),
// Event page scrolled
ob.$E.base.on("scroll",function(){c()}),jQuery(window).on("scroll",function(){c()})},
// requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel
// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
// MIT license
function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();
// return the real type of the object
var qb=function(a){
// by Angus Croll - http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/
return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},rb=function(a,b,c){a=a.replace(/^\s*|\s*$/,""),a=a.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");
// Calculate ratio
var d=Math.round(256*b)*(c?-1:1),
// Determine if input is RGB(A)
e=a.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),f=e&&null!=e[4]?e[4]:null,
// Convert hex to decimal
g=e?[e[1],e[2],e[3]]:a.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)}).split(/,/);
// Return RGB(A)
// Return hex
return e?"rgb"+(null!==f?"a":"")+"("+Math[c?"max":"min"](parseInt(g[0],10)+d,c?0:255)+", "+Math[c?"max":"min"](parseInt(g[1],10)+d,c?0:255)+", "+Math[c?"max":"min"](parseInt(g[2],10)+d,c?0:255)+(null!==f?", "+f:"")+")":["#",ub(Math[c?"max":"min"](parseInt(g[0],10)+d,c?0:255).toString(16),2),ub(Math[c?"max":"min"](parseInt(g[1],10)+d,c?0:255).toString(16),2),ub(Math[c?"max":"min"](parseInt(g[2],10)+d,c?0:255).toString(16),2)].join("")},sb=function(a,b){return rb(a,b,!1)},tb=function(a,b){return rb(a,b,!0)},ub=function(a,b){var c="0";for(a+="";a.length<b;)a=c+a;return a}}jQuery.nanoGallery=function(b,d){
// To avoid scope issues, use '_this' instead of 'this'
// to reference this class from internal events and functions.
var e=this;
// Access to jQuery and DOM versions of element
e.$e=a(b),e.e=b,
// Add a reverse reference to the DOM object
e.$e.data("nanoGallery",e),e.init=function(){e.options=a.extend(!0,{},a.nanoGallery.defaultOptions,d),
// Initialization code
e.nG=new c,e.nG.Initiate(e.e,e.options)},
// PUBLIC EXPOSED METHODS
e.test=function(){},
// Run initializer
e.init()},jQuery.nanoGallery.defaultOptions={userID:"",kind:"",album:"",photoset:"",blackList:"scrapbook|profil",whiteList:"",albumList:"",RTL:!1,picasaUseUrlCrossDomain:!0,flickrSkipOriginal:!0,galleryToolbarWidthAligned:!0,galleryToolbarHideIcons:!1,galleryFullpageButton:!1,galleryFullpageBgColor:"#111",galleryEnableKeyboard:!1,galleryRenderStep:10,breadcrumbAutoHideTopLevel:!1,displayBreadcrumb:!1,theme:"default",colorScheme:"none",colorSchemeViewer:"default",items:null,itemsBaseURL:"",itemsSelectable:!1,showCheckboxes:!0,checkboxStyle:"left:15px; top:15px;",keepSelection:!1,jsonCharset:"Latin",jsonProvider:"",paginationMaxLinesPerPage:0,paginationDots:!1,paginationSwipe:!0,maxWidth:0,viewer:"internal",viewerFullscreen:!1,viewerDisplayLogo:!1,fancyBoxOptions:null,imageTransition:"slide",openOnStart:"",viewerToolbar:{display:!0,position:"bottom",style:"innerImage",autoMinimize:800,standard:"minimizeButton , previousButton, pageCounter ,nextButton,playPauseButton,fullscreenButton,infoButton,linkOriginalButton,closeButton,label",minimized:"minimizeButton,label"},thumbnailAlignment:"center",thumbnailWidth:230,thumbnailHeight:154,thumbnailGutterWidth:2,thumbnailGutterHeight:2,thumbnailAdjustLastRowHeight:!0,thumbnailFeatured:!1,thumbnailAlbumDisplayImage:!1,thumbnailHoverEffect:null,thumbnailLabel:{position:"overImageOnBottom",display:!0,displayDescription:!0,titleMaxLength:0,descriptionMaxLength:0,hideIcons:!1,title:"",itemsCount:""},thumbnailDisplayInterval:5,thumbnailDisplayTransition:!0,thumbnailLazyLoad:!1,thumbnailLazyLoadTreshold:100,thumbnailGlobalImageTitle:"",thumbnailGlobalAlbumTitle:"",thumbnailOpenImage:!0,
//thumbnailSizeSM : 480, thumbnailSizeME : 992, thumbnailSizeLA : 1200, thumbnailSizeXL : 1800,
breakpointSizeSM:480,breakpointSizeME:992,breakpointSizeLA:1200,breakpointSizeXL:1800,fnThumbnailInit:null,fnThumbnailHoverInit:null,fnThumbnailHoverResize:null,fnThumbnailHover:null,fnThumbnailHoverOut:null,fnThumbnailDisplayEffect:null,fnThumbnailOpen:null,fnViewerInfo:null,fnImgToolbarCustInit:null,fnImgToolbarCustDisplay:null,fnImgToolbarCustClick:null,fnProcessData:null,fnChangeSelectMode:null,fnInitGallery:null,touchAnimation:!0,touchAutoOpenDelay:0,useTags:!1,preset:"none",locationHash:!0,demoViewportWidth:0,slideshowDelay:3e3,slideshowAutoStart:!1,photoSorting:"",albumSorting:"",dataSorting:"",albumMax:0,lazyBuild:"none",lazyBuildTreshold:150,debugMode:!1,i18n:{breadcrumbHome:"Galleries",breadcrumbHome_FR:"Galeries",paginationPrevious:"Previous",paginationPrevious_FR:"Pr&eacute;c&eacute;dent",paginationPrevious_DE:"Zur&uuml;ck",paginationPrevious_IT:"Indietro",paginationNext:"Next",paginationNext_FR:"Suivant",paginationNext_DE:"Weiter",paginationNext_IT:"Avanti",thumbnailLabelItemsCountPart1:"",//'| ',
thumbnailLabelItemsCountPart2:"",//' photos', 'thumbnailLabelItemsCountPart2_DE' : ' Fotos',
thumbnailImageTitle:"",thumbnailAlbumTitle:"",thumbnailImageDescription:"",thumbnailAlbumDescription:"",infoBoxPhoto:"Photo",infoBoxDate:"Date",infoBoxAlbum:"Album",infoBoxDimensions:"Dimensions",infoBoxFilename:"Filename",infoBoxFileSize:"File size",infoBoxCamera:"Camera",infoBoxFocalLength:"Focal length",infoBoxExposure:"Exposure",infoBoxFNumber:"F Number",infoBoxISO:"ISO",infoBoxMake:"Make",infoBoxFlash:"Flash",infoBoxViews:"Views",infoBoxComments:"Comments"}},jQuery.fn.nanoGallery=function(b,c,d){
// jQuery.fn.nanoGallery = function(options){
// if( typeof(options) !== 'undefined'){
if("undefined"==typeof a(this).data("nanoGallery"))return this.each(function(){new a.nanoGallery(this,b)});
// no options -->
// This function breaks the chain, but provides some API methods
switch(b){case"reload":return a(this).data("nanoGallery").nG.ReloadAlbum(),a(this);case"refreshSize":return a(this).data("nanoGallery").nG.RefreshSize(),a(this);case"getSelectedItems":return a(this).data("nanoGallery").nG.GetSelectedItems();case"selectItems":a(this).data("nanoGallery").nG.SetSelectedItems(c);break;case"unselectItems":a(this).data("nanoGallery").nG.SetUnselectedItems(c);break;case"setSelectMode":(c===!0||c===!1||"image"===c||"album"===c)&&a(this).data("nanoGallery").nG.SetSelectMode(c);break;case"getSelectMode":return a(this).data("nanoGallery").nG.GetSelectMode();case"getItem":return a(this).data("nanoGallery").nG.GetItem(c);case"getItems":return a(this).data("nanoGallery").nG.GetItems();case"getItemsIndex":return a(this).data("nanoGallery").nG.GetItemsIndex(c);case"option":if("undefined"==typeof d)return a(this).data("nanoGallery").nG.Get(c);a(this).data("nanoGallery").nG.Set(c,d),"demoViewportWidth"==c&&
// force resize event -> for demo purposes
a(window).trigger("resize");break;case"destroy":a(this).data("nanoGallery").nG.$E.base.text(""),a(this).removeData();break;case"closeViewer":a(this).data("nanoGallery").nG.closeViewer();break;case"minimizeToolbar":a(this).data("nanoGallery").nG.minimizeToolbar();break;case"maximizeToolbar":a(this).data("nanoGallery").nG.maximizeToolbar();break;case"displayItem":a(this).data("nanoGallery").nG.displayItem(c);break;case"paginationPreviousPage":a(this).data("nanoGallery").nG.paginationPreviousPage();break;case"paginationNextPage":a(this).data("nanoGallery").nG.paginationNextPage();break;case"paginationGotoPage":a(this).data("nanoGallery").nG.paginationGotoPage(c);break;case"paginationCountPages":return a(this).data("nanoGallery").nG.paginationCountPages();case"getCurrentViewedItem":return a(this).data("nanoGallery").nG.GetCurrentViewedItem();case"getCurrentViewedItemIdx":return a(this).data("nanoGallery").nG.GetCurrentViewedItemIdx();case"moveToNextAlbum":return a(this).data("nanoGallery").nG.moveToNextAlbum();case"moveToPreviousAlbum":return a(this).data("nanoGallery").nG.moveToPreviousAlbum();case"galleryCountImages":return a(this).data("nanoGallery").nG.galleryCountImages()}return a(this)}}),
// ##########################################
// #####        END NANOGALLERY         #####
// ##########################################
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(a,b){function c(a,b,c){var d=l[b.type]||{};
// ~~ is an short way of doing floor for positive numbers
// IE will pass in empty strings as value for alpha,
// which will hit this case
return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function d(b){var c=j(),d=c._rgba=[];return b=b.toLowerCase(),o(i,function(a,e){var f,g=e.re.exec(b),h=g&&e.parse(g),i=e.space||"rgba";return h?(f=c[i](h),c[k[i].cache]=f[k[i].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,f.transparent),c):f[b]}
// hsla conversions adapted from:
// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021
function e(a,b,c){return c=(c+1)%1,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var
// colors = jQuery.Color.names
f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
// plusequals test for += 100 -= 100
h=/^([\-+])=\s*(\d+\.?\d*)/,
// a set of RE's that can match strings and generate color tuples.
i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{
// this regex ignores A-F because it's compared against an already lowercased string
re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{
// this regex ignores A-F because it's compared against an already lowercased string
re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],
// jQuery.Color( )
j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},
// element for support tests
n=a("<p>")[0],
// local aliases of functions called often
o=a.each;
// determine rgba support immediately
n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,
// define cache name and alpha properties
// for rgba and hsla spaces
o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];
// more than 1 argument specified - assume ( red, green, blue, alpha )
return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){
// if the cache doesn't exist, and we know how to convert
if(!l[f]&&d.to){
// if the value was null, we don't need to copy it
// if the key was alpha, we don't need to copy it either
if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}
// this is the only case where we allow nulls for ALL properties.
// call clamp with alwaysAllowEmpty
l[f][b.idx]=c(e[a],b,!0)}),
// everything defined but alpha?
l[f]&&a.inArray(null,l[f].slice(0,3))<0&&(
// use the default of 1
l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):void 0},is:function(a){var b=j(a),c=!0,d=this;return o(k,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],o(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0})),c}),c},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){
// if we are already opaque - return ourself
if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){
// catch 1 and 2
return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){
// default to 0 when nulls exist
return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;
// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)
return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;
// makes rgba() and hsla()
j.fn[d]=function(d){if(
// generate a cache for this space if it doesn't exist
i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},
// makes red() green() blue() alpha() hue() saturation() lightness()
o(f,function(b,c){
// alpha is included in more than one space
j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),
// add cssHook and .fx.step function for each named hook.
// accept a space separated string of properties
j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},
// Basic color names only.
// Usage of any of the other color names requires adding yourself or including
// jquery.color.svg-names.js.
f=a.Color.names={
// 4.1. Basic color keywords
aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",
// 4.2.3. "transparent" color keyword
transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
/*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
function(){/**
	 * Class for managing events.
	 * Can be extended to provide event functionality in other classes.
	 *
	 * @class ngEventEmitter Manages event registering and emitting.
	 */
function a(){}/**
	 * Finds the index of the listener for the event in it's storage array.
	 *
	 * @param {Function[]} listeners Array of listeners to search through.
	 * @param {Function} listener Method to look for.
	 * @return {Number} Index of the specified listener, -1 if not found
	 * @api private
	 */
function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}/**
	 * Alias a method while keeping the context correct, to allow for overwriting of target method.
	 *
	 * @param {String} name The name of the target method.
	 * @return {Function} The aliased method
	 * @api private
	 */
function c(a){return function(){return this[a].apply(this,arguments)}}
// Shortcuts to improve speed and size
var d=a.prototype,e=this,f=e.ngEventEmitter;/**
	 * Returns the listener array for the specified event.
	 * Will initialise the event object and listener arrays if required.
	 * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.
	 * Each property in the object response is an array of listener functions.
	 *
	 * @param {String|RegExp} evt Name of the event to return the listeners from.
	 * @return {Function[]|Object} All listener functions for the event.
	 */
d.getListeners=function(a){var b,c,d=this._getEvents();
// Return a concatenated array of all matching events if
// the selector is a regular expression.
if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},/**
	 * Takes a list of listener objects and flattens it into a list of listener functions.
	 *
	 * @param {Object[]} listeners Raw listener objects.
	 * @return {Function[]} Just the listener functions.
	 */
d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},/**
	 * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.
	 *
	 * @param {String|RegExp} evt Name of the event to return the listeners from.
	 * @return {Object} All listener functions for an event in an object.
	 */
d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},/**
	 * Adds a listener function to the specified event.
	 * The listener will not be added if it is a duplicate.
	 * If the listener returns true then it will be removed after it is called.
	 * If you pass a regular expression as the event name then the listener will be added to all events that match it.
	 *
	 * @param {String|RegExp} evt Name of the event to attach the listener to.
	 * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},/**
	 * Alias of addListener
	 */
d.on=c("addListener"),/**
	 * Semi-alias of addListener. It will add a listener that will be
	 * automatically removed after it's first execution.
	 *
	 * @param {String|RegExp} evt Name of the event to attach the listener to.
	 * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},/**
	 * Alias of addOnceListener.
	 */
d.once=c("addOnceListener"),/**
	 * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.
	 * You need to tell it what event names should be matched by a regex.
	 *
	 * @param {String} evt Name of the event to create.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.defineEvent=function(a){return this.getListeners(a),this},/**
	 * Uses defineEvent to define multiple events.
	 *
	 * @param {String[]} evts An array of event names to define.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},/**
	 * Removes a listener function from the specified event.
	 * When passed a regular expression as the event name, it will remove the listener from all events that match it.
	 *
	 * @param {String|RegExp} evt Name of the event to remove the listener from.
	 * @param {Function} listener Method to remove from the event.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},/**
	 * Alias of removeListener
	 */
d.off=c("removeListener"),/**
	 * Adds listeners in bulk using the manipulateListeners method.
	 * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.
	 * You can also pass it a regular expression to add the array of listeners to all events that match it.
	 * Yeah, this function does quite a bit. That's probably a bad thing.
	 *
	 * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.
	 * @param {Function[]} [listeners] An optional array of listener functions to add.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.addListeners=function(a,b){
// Pass through to manipulateListeners
return this.manipulateListeners(!1,a,b)},/**
	 * Removes listeners in bulk using the manipulateListeners method.
	 * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
	 * You can also pass it an event name and an array of listeners to be removed.
	 * You can also pass it a regular expression to remove the listeners from all events that match it.
	 *
	 * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.
	 * @param {Function[]} [listeners] An optional array of listener functions to remove.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.removeListeners=function(a,b){
// Pass through to manipulateListeners
return this.manipulateListeners(!0,a,b)},/**
	 * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.
	 * The first argument will determine if the listeners are removed (true) or added (false).
	 * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
	 * You can also pass it an event name and an array of listeners to be added/removed.
	 * You can also pass it a regular expression to manipulate the listeners of all events that match it.
	 *
	 * @param {Boolean} remove True if you want to remove listeners, false if you want to add.
	 * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.
	 * @param {Function[]} [listeners] An optional array of listener functions to add/remove.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;
// If evt is an object then pass each of it's properties to this method
if("object"!=typeof b||b instanceof RegExp)for(
// So evt must be a string
// And listeners must be an array of listeners
// Loop over it and pass each one to the multiple method
d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&(
// Pass the single listener straight through to the singular method
"function"==typeof e?f.call(this,d,e):
// Otherwise pass back to the multiple function
g.call(this,d,e));return this},/**
	 * Removes all listeners from a specified event.
	 * If you do not specify an event then all listeners will be removed.
	 * That means every event will be emptied.
	 * You can also pass a regex to remove all events that match it.
	 *
	 * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();
// Remove different things depending on the state of evt
if("string"===c)
// Remove all listeners for the specified event
delete d[a];else if("object"===c)
// Remove all events matching the regex.
for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else
// Remove all listeners in all events
delete this._events;return this},/**
	 * Alias of removeEvent.
	 *
	 * Added to mirror the node API.
	 */
d.removeAllListeners=c("removeEvent"),/**
	 * Emits an event of your choice.
	 * When emitted, every listener attached to that event will be executed.
	 * If you pass the optional argument array then those arguments will be passed to every listener upon execution.
	 * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.
	 * So they will not arrive within the array on the other side, they will be separate.
	 * You can also pass a regular expression to emit to all events that match it.
	 *
	 * @param {String|RegExp} evt Name of the event to emit and execute listeners for.
	 * @param {Array} [args] Optional array of arguments to be passed to each listener.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},/**
	 * Alias of emitEvent
	 */
d.trigger=c("emitEvent"),/**
	 * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.
	 * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.
	 *
	 * @param {String|RegExp} evt Name of the event to emit and execute listeners for.
	 * @param {...*} Optional additional arguments to be passed to each listener.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},/**
	 * Sets the current value to check against when executing listeners. If a
	 * listeners return value matches the one set here then it will be removed
	 * after execution. This value defaults to true.
	 *
	 * @param {*} value The new value to check for when executing listeners.
	 * @return {Object} Current instance of EventEmitter for chaining.
	 */
d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},/**
	 * Fetches the current value to check against when executing listeners. If
	 * the listeners return value matches this one then it should be removed
	 * automatically. It will return true by default.
	 *
	 * @return {*|Boolean} The current value to check for or the default, true.
	 * @api private
	 */
d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},/**
	 * Fetches the events object and creates one if required.
	 *
	 * @return {Object} The events storage object.
	 * @api private
	 */
d._getEvents=function(){return this._events||(this._events={})},/**
	 * Reverts the global {@link ngEventEmitter} to its previous value and returns a reference to this version.
	 *
	 * @return {Function} Non conflicting ngEventEmitter class.
	 */
a.noConflict=function(){return e.ngEventEmitter=f,a},
// Expose the class either via AMD, CommonJS or the global object
"function"==typeof define&&define.amd?define("ngEventEmitter/ngEventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.ngEventEmitter=a}.call(this),/*!
 * eventie v1.0.4
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */
/*jshint browser: true, undef: true, unused: true */
/*global define: false */
function(a){function b(b){var c=a.event;
// add event.target
return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){
// can't delete window object properties
a[b+c]=void 0}});var f={bind:d,unbind:e};
// transport
"function"==typeof define&&define.amd?
// AMD
define("eventie/eventie",f):
// browser global
a.eventie=f}(this),/*!
 * imagesLoaded v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
function(a,b){
// universal module definition
/*global define: false, module: false, require: false */
"function"==typeof define&&define.amd?
// AMD
define(["ngEventEmitter/ngEventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("eventie")):a.ngimagesLoaded=b(a,a.ngEventEmitter,a.eventie)}(window,
// --------------------------  factory -------------------------- //
function(a,b,c){
// -------------------------- helpers -------------------------- //
// extend objects
function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){return"[object Array]"===m.call(a)}
// turn element or nodeList into an array
function f(a){var b=[];if(e(a))
// use object if already an array
b=a;else if("number"==typeof a.length)
// convert nodeList to array
for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else
// array of single index
b.push(a);return b}
// -------------------------- imagesLoaded -------------------------- //
/**
   * @param {Array, Element, NodeList, String} elem
   * @param {Object or Function} options - if function, use as callback
   * @param {Function} onAlways - callback function
   */
function g(a,b,c){
// coerce ImagesLoaded() without new, to be new ImagesLoaded()
if(!(this instanceof g))return new g(a,b);
// use elem as selector string
"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=f(a),this.options=d({},this.options),"function"==typeof b?c=b:d(this.options,b),c&&this.on("always",c),this.getImages(),j&&(
// add jQuery Deferred object
this.jqDeferred=new j.Deferred);
// HACK check async to allow time to bind listeners
var e=this;setTimeout(function(){e.check()})}
// --------------------------  -------------------------- //
function h(a){this.img=a}function i(a){this.src=a,
// add to cache
n[a]=this}var j=a.jQuery,k=a.console,l="undefined"!=typeof k,m=Object.prototype.toString;g.prototype=new b,g.prototype.options={},g.prototype.getImages=function(){this.images=[];
// filter & find items if we have an item selector
for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];
// filter siblings
"IMG"===c.nodeName&&this.addImage(c);
// find children
// no non-element nodes, #143
var d=c.nodeType;if(d&&(1===d||9===d||11===d))
// concat childElems to filterFound array
for(var e=c.querySelectorAll("img"),f=0,g=e.length;g>f;f++){var h=e[f];this.addImage(h)}}},/**
   * @param {Image} img
   */
g.prototype.addImage=function(a){var b=new h(a);this.images.push(b)},g.prototype.check=function(){function a(a,e){return b.options.debug&&l&&k.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;
// complete if no images
if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},g.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;
// HACK - Chrome triggers event before object properties have changed. #83
var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})},g.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;
// HACK - another setTimeout so that confirm happens after progress
setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},
// -------------------------- jquery -------------------------- //
j&&(j.fn.ngimagesLoaded=function(a,b){var c=new g(this,a,b);return c.jqDeferred.promise(j(this))}),h.prototype=new b,h.prototype.check=function(){
// first check cached any previous images that have same src
var a=n[this.img.src]||new i(this.img.src);if(a.isConfirmed)return void this.confirm(a.isLoaded,"cached was confirmed");
// If complete is true and browser supports natural sizes,
// try to check for image status manually.
if(this.img.complete&&void 0!==this.img.naturalWidth)
// report based on naturalWidth
return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");
// If none of the checks above matched, simulate loading on detached element.
var b=this;a.on("confirm",function(a,c){return b.confirm(a.isLoaded,c),!0}),a.check()},h.prototype.confirm=function(a,b){this.isLoaded=a,this.emit("confirm",this,b)};
// -------------------------- Resource -------------------------- //
// Resource checks each src, only once
// separate class from LoadingImage to prevent memory leaks. See #115
var n={};
// -----  ----- //
// ----- events ----- //
// trigger specified handler for event type
// ----- confirm ----- //
return i.prototype=new b,i.prototype.check=function(){
// only trigger checking once
if(!this.isChecked){
// simulate loading on detached element
var a=new Image;c.bind(a,"load",this),c.bind(a,"error",this),a.src=this.src,
// set flag
this.isChecked=!0}},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},i.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this),c.unbind(a.target,"error",this)},g}),
// screenfull.js
// v1.1.0
// by sindresorhus - https://github.com/sindresorhus
// from: https://github.com/sindresorhus/screenfull.js
function(){"use strict";var a="undefined"!=typeof module&&module.exports,b="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,c=function(){for(var a,b,c=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],
// new WebKit
["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],
// old WebKit (Safari 5.1)
["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],d=0,e=c.length,f={};e>d;d++)if(a=c[d],a&&a[1]in document){for(d=0,b=a.length;b>d;d++)f[c[0][d]]=a[d];return f}return!1}(),d={request:function(a){var d=c.requestFullscreen;a=a||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?a[d]():a[d](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[c.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(){},onerror:function(){},raw:c};return c?(Object.defineProperties(d,{isFullscreen:{get:function(){return!!document[c.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[c.fullscreenElement]}},enabled:{enumerable:!0,get:function(){
// Coerce to boolean in case of old WebKit
return!!document[c.fullscreenEnabled]}}}),document.addEventListener(c.fullscreenchange,function(a){d.onchange.call(d,a)}),document.addEventListener(c.fullscreenerror,function(a){d.onerror.call(d,a)}),void(a?module.exports=d:window.ngscreenfull=d)):void(a?module.exports=!1:window.ngscreenfull=!1)}();